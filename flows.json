[{"id":"eb1ef2a4.108a4","type":"tab","label":"***Git Server***"},{"id":"2923d480.7d402c","type":"tab","label":"***A:D Scale***"},{"id":"15488441.7338fc","type":"tab","label":"***Auto Tune***"},{"id":"533c797.688ee88","type":"tab","label":"***Horn***"},{"id":"50ab757c.8c567c","type":"tab","label":"***Network***"},{"id":"52db5dc3.18f7e4","type":"tab","label":"***USP Firmware***"},{"id":"9fcd592e.f55918","type":"tab","label":"***UPS Status***"},{"id":"2e61de0d.e4e032","type":"tab","label":"Battery"},{"id":"67c7041b.7dfd5c","type":"tab","label":"Control"},{"id":"7e2731d1.dcc1a","type":"tab","label":"Digital Inputs: Outputs"},{"id":"5abca664.098e18","type":"tab","label":"Pressure Calibration"},{"id":"ab94ed2a.3949c","type":"tab","label":"Runtime: Counters"},{"id":"aa21694d.456698","type":"tab","label":"Setpoints"},{"id":"83ad3f3c.c4e8","type":"tab","label":"Startup"},{"id":"f313e1b7.08c8b","type":"tab","label":"Vis Iputs: Outputs"},{"id":"86b9619.dbcd1a","type":"modbus-client","z":"","name":"","clienttype":"serial","bufferCommands":true,"stateLogEnabled":false,"tcpHost":"127.0.0.1","tcpPort":"502","tcpType":"DEFAULT","serialPort":"/dev/ttyUSB0","serialType":"RTU-BUFFERD","serialBaudrate":"38400","serialDatabits":"8","serialStopbits":"1","serialParity":"odd","serialConnectionDelay":"100","unit_id":"1","commandDelay":"1","clientTimeout":"1000","reconnectTimeout":"2000"},{"id":"3a50f7a3.c695d8","type":"json-db-collection","z":"","name":"","collection":"calibration","save":true},{"id":"c16c24c5.336ba8","type":"json-db-collection","z":"","name":"","collection":"Runtimes","save":true},{"id":"2df55d75.4ea572","type":"json-db-collection","z":"","name":"","collection":"setpoints","save":true},{"id":"f230d0ed.dbd7a","type":"json-db-collection","z":"","name":"","collection":"Startup","save":true},{"id":"1c2d54ae.b0228b","type":"inject","z":"2923d480.7d402c","name":"","topic":"","payload":"1","payloadType":"str","repeat":"","crontab":"","once":true,"x":188,"y":156,"wires":[["7387154d.4cb09c","65d9a243.33c9ac"]]},{"id":"24a3bab6.475c96","type":"comment","z":"2923d480.7d402c","name":"Scale A/D 0-5.2 Volts DC","info":"","x":251,"y":101,"wires":[]},{"id":"7387154d.4cb09c","type":"delay","z":"2923d480.7d402c","name":"","pauseType":"delay","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":361,"y":156,"wires":[["3864e7e1.503f88"]]},{"id":"3864e7e1.503f88","type":"bigexec","z":"2923d480.7d402c","name":"","command":"sudo","commandArgs":"update-rc.d picofssd defaults","minError":1,"minWarning":1,"cwd":"","shell":true,"extraArgumentProperty":"","envProperty":"","format":"","limiter":true,"payloadIs":"triggerNoStdin","x":570.9999465942383,"y":232.33334732055664,"wires":[[],[],[]]},{"id":"bd2689f5.93ab38","type":"bigexec","z":"2923d480.7d402c","name":"","command":"sudo","commandArgs":"i2cset -y 1 0x6b 0x08 0x00","minError":1,"minWarning":1,"cwd":"","shell":true,"extraArgumentProperty":"","envProperty":"","format":"","limiter":true,"payloadIs":"triggerNoStdin","x":570.9999580383301,"y":352.33333587646484,"wires":[[],[],[]]},{"id":"65d9a243.33c9ac","type":"delay","z":"2923d480.7d402c","name":"","pauseType":"delay","timeout":"10","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":335.99999618530273,"y":278.99999046325684,"wires":[["bd2689f5.93ab38"]]},{"id":"98aea004.13b51","type":"inject","z":"15488441.7338fc","name":"step 1 1","topic":"step1","payload":"1","payloadType":"num","repeat":"","crontab":"","once":false,"x":175,"y":132.77375984191895,"wires":[["4dd64335.acbafc"]]},{"id":"f36e6d49.8a2a7","type":"inject","z":"15488441.7338fc","name":"step 1 0","topic":"step1","payload":"0","payloadType":"num","repeat":"","crontab":"","once":true,"x":178.53968048095703,"y":90.69439315795898,"wires":[["4dd64335.acbafc"]]},{"id":"ea46eae8.525f98","type":"inject","z":"15488441.7338fc","name":"step 2 0","topic":"step2","payload":"0","payloadType":"num","repeat":"","crontab":"","once":true,"x":186.41665649414062,"y":335.9880714416504,"wires":[["3a2a5933.384096"]]},{"id":"95601ec3.89a6a","type":"inject","z":"15488441.7338fc","name":"step 2 1","topic":"step2","payload":"1","payloadType":"num","repeat":"","crontab":"","once":false,"x":193.98807907104492,"y":375.84521198272705,"wires":[["3a2a5933.384096"]]},{"id":"34be0c26.b06b74","type":"inject","z":"15488441.7338fc","name":"step 3 0","topic":"step3","payload":"0","payloadType":"num","repeat":"","crontab":"","once":true,"x":190.82142639160156,"y":603.0713443756104,"wires":[["4c326cd7.25c1d4"]]},{"id":"89780de0.b13b8","type":"inject","z":"15488441.7338fc","name":"step 3 1","topic":"step3","payload":"1","payloadType":"num","repeat":"","crontab":"","once":false,"x":198.39284896850586,"y":642.928484916687,"wires":[["4c326cd7.25c1d4"]]},{"id":"63b3b820.838b38","type":"inject","z":"15488441.7338fc","name":"step 4 0","topic":"step4","payload":"0","payloadType":"num","repeat":"","crontab":"","once":false,"x":204.92856216430664,"y":749.8569107055664,"wires":[["16b05837.5ea738"]]},{"id":"18508180.4690df","type":"inject","z":"15488441.7338fc","name":"step 4 1","topic":"step4","payload":"1","payloadType":"num","repeat":"","crontab":"","once":false,"x":212.49998474121094,"y":789.7140512466431,"wires":[["16b05837.5ea738"]]},{"id":"eb4fb96b.0b6848","type":"inject","z":"15488441.7338fc","name":"step 5 0","topic":"step5","payload":"0","payloadType":"num","repeat":"","crontab":"","once":true,"x":226.3571434020996,"y":1023.6068744659424,"wires":[["444c49ce.e71ba8"]]},{"id":"d5f1d7fe.19ae98","type":"inject","z":"15488441.7338fc","name":"step 5 1","topic":"step5","payload":"1","payloadType":"num","repeat":"","crontab":"","once":false,"x":233.9285659790039,"y":1063.464015007019,"wires":[["444c49ce.e71ba8"]]},{"id":"cdc1cd38.4c39f","type":"inject","z":"15488441.7338fc","name":"step 6 0","topic":"step6","payload":"0","payloadType":"num","repeat":"","crontab":"","once":true,"x":223.67856216430664,"y":1165.9284572601318,"wires":[["d072979a.a2fc28"]]},{"id":"8417dec9.99317","type":"inject","z":"15488441.7338fc","name":"step 6 1","topic":"step6","payload":"1","payloadType":"num","repeat":"","crontab":"","once":false,"x":231.24998474121094,"y":1205.7855978012085,"wires":[["d072979a.a2fc28"]]},{"id":"5bfb0ac6.a60384","type":"switch","z":"15488441.7338fc","name":"","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"begin","vt":"str"}],"checkall":"true","outputs":1,"x":812.7778396606445,"y":70,"wires":[["146f8a10.b48ff6"]]},{"id":"e6befe6b.1a2fb","type":"function","z":"15488441.7338fc","name":"step 1","func":"if (global.get('phase')==1 && (global.get ('step1')==1)) {\nglobal.set ('step1',2);\nreturn msg;}\nelse return;","outputs":1,"noerr":0,"x":588.5397262573242,"y":173.20238494873047,"wires":[["8c432a69.798078"]]},{"id":"5f9dfaa4.3c78c4","type":"inject","z":"15488441.7338fc","name":"step 1 2","topic":"step1","payload":"2","payloadType":"num","repeat":"","crontab":"","once":false,"x":172.8253936767578,"y":171.53571605682373,"wires":[["4dd64335.acbafc"]]},{"id":"90345653.c1db88","type":"inject","z":"15488441.7338fc","name":"step 2 2","topic":"step2","payload":"2","payloadType":"num","repeat":"","crontab":"","once":false,"x":189.49206924438477,"y":405.8214635848999,"wires":[["3a2a5933.384096"]]},{"id":"468cdbd0.a2c424","type":"inject","z":"15488441.7338fc","name":"step 3 2","topic":"step3","payload":"2","payloadType":"num","repeat":"","crontab":"","once":false,"x":190.68255233764648,"y":678.4404726028442,"wires":[["4c326cd7.25c1d4"]]},{"id":"2d6c28b.6e021d8","type":"inject","z":"15488441.7338fc","name":"step 4 2","topic":"step4","payload":"2","payloadType":"num","repeat":"","crontab":"","once":false,"x":210.6825408935547,"y":832.7260482311249,"wires":[["16b05837.5ea738"]]},{"id":"229cf728.f7e2d8","type":"inject","z":"15488441.7338fc","name":"step 5 2","topic":"step5","payload":"2","payloadType":"num","repeat":"","crontab":"","once":false,"x":229.25397491455078,"y":1104.1545877456665,"wires":[["444c49ce.e71ba8"]]},{"id":"36ca1442.c77eac","type":"inject","z":"15488441.7338fc","name":"step 6 2","topic":"step6","payload":"2","payloadType":"num","repeat":"","crontab":"","once":false,"x":222.1111068725586,"y":1239.8690195083618,"wires":[["d072979a.a2fc28"]]},{"id":"dc087d8d.e0876","type":"inject","z":"15488441.7338fc","name":"Auto Tune PULSE","topic":"","payload":"ddd","payloadType":"str","repeat":"1","crontab":"","once":true,"x":186.00397491455078,"y":235.4881477355957,"wires":[["2c3a9f83.78b6c","bdbed2e5.7f641","a51e829d.e4cb8","9d124f.920bcdb","d7a77cc0.3eb77","e88cb7f8.cd14b8"]]},{"id":"4dd64335.acbafc","type":"function","z":"15488441.7338fc","name":"global set step1","func":"global.set('step1',msg.payload);\nreturn;","outputs":1,"noerr":0,"x":399.34920501708984,"y":96.82143211364746,"wires":[[]]},{"id":"2c3a9f83.78b6c","type":"function","z":"15488441.7338fc","name":"global get step1","func":"msg.payload = global.get('step1');\nmsg.topic = 'step1';\nif(msg.payload===1){ var tune = global.set ('tune', 1);\n    global.set('gate',0);\n} else \nif(msg.payload===0){ var tune = global.set ('tune', 0);}\nreturn msg;","outputs":1,"noerr":0,"x":398.30162048339844,"y":182.72620296478271,"wires":[["e6befe6b.1a2fb","17ba065e.38112a"]]},{"id":"3561849a.85bbdc","type":"function","z":"15488441.7338fc","name":"global set step1","func":"if (msg.payload ===0) {global.set('step1', 0 );\n    global.set('step2',0);\n    global.set('step3',0);\n    global.set('step4',0);\n    global.set('step5',0);\n    global.set('step6',0);\n    global.set('step7',0);\n    global.set('blwr', 0);\n    global.set('gate',0);\n}\nif (msg.payload ===1) {global.set('step1', 1);}\nreturn;","outputs":1,"noerr":0,"x":1183.7777786254883,"y":137.25000762939453,"wires":[[]]},{"id":"146f8a10.b48ff6","type":"change","z":"15488441.7338fc","name":"begin / cancel","rules":[{"t":"change","p":"payload","pt":"msg","from":"true","fromt":"bool","to":"1","tot":"num"},{"t":"change","p":"payload","pt":"msg","from":"false","fromt":"bool","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":930.9206695556641,"y":115.82143974304199,"wires":[["3561849a.85bbdc"]]},{"id":"3a2a5933.384096","type":"function","z":"15488441.7338fc","name":"global set step2","func":"global.set('step2',msg.payload);\nreturn;","outputs":1,"noerr":0,"x":418.06349182128906,"y":372.9643039703369,"wires":[[]]},{"id":"bdbed2e5.7f641","type":"function","z":"15488441.7338fc","name":"global get step2","func":"if(global.get('step1')==2) {\nmsg.payload = global.get('step2');\nmsg.topic = 'step2';\nreturn msg;}\nelse {global.set ('step2', 0); msg.topic = 'step2';\n    msg.payload = global.get('step2');\n}\nreturn msg;","outputs":1,"noerr":0,"x":419.49203872680664,"y":314.3928732872009,"wires":[["9354cdd4.d1b09","431dd5db.7c5f6c","17ba065e.38112a"]]},{"id":"9354cdd4.d1b09","type":"function","z":"15488441.7338fc","name":"step 2","func":"if (global.get('flt')===0 && global.get ('step2')===1 &&\n global.get('blwr')===0 ) {\nglobal.set ('ballvalve',0);\nglobal.set ('step2',2);\nreturn msg;}\nelse\nif (global.get ('step2')===1 && global.get('test_mode')===1){\nglobal.set ('step2',2);\nreturn msg;}\nelse\nif (global.get ('step2')===1 && global.get('demo_mode')===1){\nglobal.set ('step2',2);\nreturn msg;}\nelse return;","outputs":1,"noerr":0,"x":586.634880065918,"y":284.39285373687744,"wires":[["5c0307f1.8b1258"]]},{"id":"8c432a69.798078","type":"delay","z":"15488441.7338fc","name":"","pauseType":"delay","timeout":"2","timeoutUnits":"seconds","rate":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":750.9206379481725,"y":164.39286286490324,"wires":[["3b07b985.c64206"]]},{"id":"3b07b985.c64206","type":"function","z":"15488441.7338fc","name":"global set step1","func":"global.set('step2', 1 );\nreturn;","outputs":1,"noerr":0,"x":945.2063522338867,"y":194.39285850524902,"wires":[[]]},{"id":"80b4f96f.c16b48","type":"inject","z":"15488441.7338fc","name":"FLOAT:Off 1","topic":"flt","payload":"1","payloadType":"num","repeat":"","crontab":"","once":false,"x":184.96826934814453,"y":474.86909198760986,"wires":[["e73e3880.2d1f98"]]},{"id":"a400eb38.ba7a08","type":"inject","z":"15488441.7338fc","name":"FLOAT:On 0","topic":"flt","payload":"0","payloadType":"num","repeat":"","crontab":"","once":true,"x":179.1349105834961,"y":519.6786451339722,"wires":[["e73e3880.2d1f98"]]},{"id":"e73e3880.2d1f98","type":"function","z":"15488441.7338fc","name":"global set flt","func":"global.set('flt',msg.payload);\nreturn;","outputs":1,"noerr":0,"x":453.2064514160156,"y":483.1666679382324,"wires":[[]]},{"id":"5c0307f1.8b1258","type":"delay","z":"15488441.7338fc","name":"","pauseType":"delay","timeout":"2","timeoutUnits":"seconds","rate":"1","nbRateUnits":"","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":808.6349029541016,"y":283.3928813934326,"wires":[["8e1ac1aa.98ad7"]]},{"id":"8e1ac1aa.98ad7","type":"function","z":"15488441.7338fc","name":"global set step3","func":"global.set('step3', 1 );\nreturn;","outputs":1,"noerr":0,"x":1046.634910583496,"y":351.53573513031006,"wires":[[]]},{"id":"431dd5db.7c5f6c","type":"function","z":"15488441.7338fc","name":"step 2","func":"if (global.get('step2')==1 && global.get ('flt')==1 && global.get('timedout_alarm')===0)\n{global.set ('ballvalve',1);\n    return;}\nif (global.get('step2')==1 && global.get ('flt')===0) \n{global.set ('ballvalve',0);\n    return;}\nelse if (global.get('timedout_alarm')==1) {\nglobal.set ('ballvalve',0);\n    return;}\nmsg.payload=global.get('ballvalve');\nreturn msg;","outputs":1,"noerr":0,"x":620.9206161499023,"y":391.05955696105957,"wires":[[]]},{"id":"4c326cd7.25c1d4","type":"function","z":"15488441.7338fc","name":"global set step 3","func":"global.set('step3',msg.payload);\nreturn;","outputs":1,"noerr":0,"x":442.1111297607422,"y":654.1548767089844,"wires":[[]]},{"id":"a51e829d.e4cb8","type":"function","z":"15488441.7338fc","name":"global get step3","func":"if(global.get('step2')==2) {\nmsg.payload = global.get('step3');\nmsg.topic = 'step3';\nreturn msg;}\nelse {global.set ('step3', 0); msg.topic = 'step3';\n    msg.payload = global.get('step3');\n}\nreturn msg;","outputs":1,"noerr":0,"x":418.3968276977539,"y":558.773871421814,"wires":[["1c40328e.71da9d","5a54eb1d.b394a4","17ba065e.38112a"]]},{"id":"1c40328e.71da9d","type":"function","z":"15488441.7338fc","name":"step 3","func":"if (global.get('blwr')===2 && global.get ('step3')===1 ) {\nglobal.set ('step3',2);\nreturn msg;\n}\nreturn ;","outputs":1,"noerr":0,"x":639.9682235717773,"y":560.8213977813721,"wires":[["fe91e91e.7f25c8"]]},{"id":"fe91e91e.7f25c8","type":"delay","z":"15488441.7338fc","name":"","pauseType":"delay","timeout":"2","timeoutUnits":"seconds","rate":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":817.3490905761719,"y":559.1548118591309,"wires":[["e8106817.9edc68"]]},{"id":"e8106817.9edc68","type":"function","z":"15488441.7338fc","name":"global set step4","func":"if(global.get('step3')===2){\nglobal.set('step4', 1 );\nreturn;}","outputs":1,"noerr":0,"x":1038.7183227539062,"y":570.285795211792,"wires":[["4e08bf7f.599f3"]]},{"id":"5a54eb1d.b394a4","type":"function","z":"15488441.7338fc","name":"step 3","func":"if (global.get('step3')===1 ) {\nglobal.set ('blwr',1);\n}\nreturn;","outputs":1,"noerr":0,"x":653.0634460449219,"y":647.7262487411499,"wires":[[]]},{"id":"d7a77cc0.3eb77","type":"function","z":"15488441.7338fc","name":"global get step4","func":"if(global.get('step3')==2) {\nmsg.payload = global.get('step4');\nmsg.topic = 'step4';\nreturn msg;}\nelse {global.set ('step4', 0); msg.topic = 'step4';\n    msg.payload = global.get('step4');\n}\nreturn msg;","outputs":1,"noerr":0,"x":416.63500595092773,"y":713.440553188324,"wires":[["fa11784b.3e6c08","aa575509.0821a8","17ba065e.38112a","86d86e39.23f6"]]},{"id":"19b75e4b.bf1d22","type":"delay","z":"15488441.7338fc","name":"","pauseType":"delay","timeout":"2","timeoutUnits":"seconds","rate":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":830.8730010986328,"y":700.8691215515137,"wires":[["1571cbb9.eab574"]]},{"id":"1571cbb9.eab574","type":"function","z":"15488441.7338fc","name":"global set step5","func":"global.set('step5', 1 );\nreturn;","outputs":1,"noerr":0,"x":1062.1111793518066,"y":775.5834349393845,"wires":[["4e08bf7f.599f3"]]},{"id":"16b05837.5ea738","type":"function","z":"15488441.7338fc","name":"global set step4","func":"global.set('step4',msg.payload);\nreturn;","outputs":1,"noerr":0,"x":464.96826553344727,"y":798.9166860580444,"wires":[[]]},{"id":"45c090dc.4828a","type":"inject","z":"15488441.7338fc","name":"setPres 2","topic":"setPres","payload":"2","payloadType":"num","repeat":"","crontab":"","once":true,"x":205.20637130737305,"y":908.2024564743042,"wires":[["acaa5b88.ddaf38"]]},{"id":"3cd31c23.abed64","type":"inject","z":"15488441.7338fc","name":"setPres 4","topic":"setPres","payload":"7","payloadType":"num","repeat":"","crontab":"","once":false,"x":205.08730697631836,"y":959.9167442321777,"wires":[["acaa5b88.ddaf38"]]},{"id":"acaa5b88.ddaf38","type":"function","z":"15488441.7338fc","name":"global set setPres","func":"global.set('setPres',msg.payload);\nreturn;","outputs":1,"noerr":0,"x":461.5396842956543,"y":893.643009185791,"wires":[[]]},{"id":"444c49ce.e71ba8","type":"function","z":"15488441.7338fc","name":"global set step5","func":"global.set('step5',msg.payload);\nreturn;","outputs":1,"noerr":0,"x":449.2539863586426,"y":1079.8690299987793,"wires":[[]]},{"id":"9d124f.920bcdb","type":"function","z":"15488441.7338fc","name":"global get step5","func":"if(global.get('step4')==2) {\nmsg.payload = global.get('step5');\nmsg.topic = 'step5';\nreturn msg;}\nelse {global.set ('step5', 0); msg.topic = 'step5';\n    msg.payload = global.get('step5');\n}\nreturn msg;","outputs":1,"noerr":0,"x":466.3968620300293,"y":997.0121514797211,"wires":[["7a3f627e.d2871c","bd5da8a7.87c648","ab625c23.e4ec3","4e08bf7f.599f3"]]},{"id":"7a3f627e.d2871c","type":"function","z":"15488441.7338fc","name":"step 5","func":"if (global.get('step5')===1 ) {\n    var newval1 = global.get ('PS0') - (- global.get ('setPhi'));\n    var newval2 = global.get ('PS0') - global.get ('setPlo');\n    var newval3 = global.get ('setFilt') + global.get ('setDirt');\n    global.set ('oldPhi', newval1);\n    global.set ('oldPlo', newval2); \n    global.set ('oldFilt', newval3);\n}\nreturn msg;","outputs":1,"noerr":0,"x":670.682559967041,"y":1075.7740097045898,"wires":[["2bdfa992.c99356","4850d60b.fe7208","2545e3dd.34908c"]]},{"id":"4bd9b11.a878f5","type":"delay","z":"15488441.7338fc","name":"","pauseType":"delay","timeout":"2","timeoutUnits":"seconds","rate":"1","nbRateUnits":"","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":824.3968544006348,"y":994.4405136108398,"wires":[["4cc6f27e.74119c"]]},{"id":"4cc6f27e.74119c","type":"function","z":"15488441.7338fc","name":"global set step6","func":"global.set('step6', 1 );\nreturn;","outputs":1,"noerr":0,"x":1133.6826934814453,"y":996.7262954711914,"wires":[["4e08bf7f.599f3"]]},{"id":"373d85e2.9dfcea","type":"inject","z":"15488441.7338fc","name":"setFilt 0.2","topic":"setFilt","payload":".2","payloadType":"num","repeat":"","crontab":"","once":false,"x":694.9682807922363,"y":877.0119800567627,"wires":[["af89b058.6657f"]]},{"id":"16b83f91.834b9","type":"inject","z":"15488441.7338fc","name":"setFilt 0.75","topic":"setFilt","payload":".75","payloadType":"num","repeat":"","crontab":"","once":false,"x":703.6587257385254,"y":924.2024068832397,"wires":[["af89b058.6657f"]]},{"id":"af89b058.6657f","type":"function","z":"15488441.7338fc","name":"global set setFilt","func":"global.set('setFilt',msg.payload);\nreturn;","outputs":1,"noerr":0,"x":966.3015937805176,"y":910.785816192627,"wires":[["4e08bf7f.599f3"]]},{"id":"d072979a.a2fc28","type":"function","z":"15488441.7338fc","name":"global set step6","func":"global.set('step6',msg.payload);\nreturn;","outputs":1,"noerr":0,"x":410.6825752258301,"y":1221.2976245880127,"wires":[[]]},{"id":"e88cb7f8.cd14b8","type":"function","z":"15488441.7338fc","name":"global get step6","func":"if(global.get('step5')==2) {\nmsg.payload = global.get('step6');\nmsg.topic = 'step6';\nreturn msg;}\nelse {global.set ('step6', 0); msg.topic = 'step6';\n    msg.payload = global.get('step6');\n}\nreturn msg;","outputs":1,"noerr":0,"x":456.3968391418457,"y":1161.2976245880127,"wires":[["1ed0ba4b.86a526","3652cdb.d8be232","4e08bf7f.599f3"]]},{"id":"1ed0ba4b.86a526","type":"function","z":"15488441.7338fc","name":"step 6","func":"if (global.get('blwr') === 0 && global.get('step6')=== 1) {\nglobal.set ('step6',2);\nglobal.set ('begin',0);\nreturn;\n} else if(global.get('step6')==2){\n    global.set('step1', 0);\n    global.set('step7', 2);\nreturn msg;}\n","outputs":1,"noerr":0,"x":696.3967132568359,"y":1175.583324432373,"wires":[["297560e9.cf372"]]},{"id":"3652cdb.d8be232","type":"function","z":"15488441.7338fc","name":"step 6","func":"if (global.get('step6')===1 ) {\n    global.set ('alarm', 0);\n    global.set ('blwr', 3);\n    //global.set ('start_stop', 0);\n}\nreturn;","outputs":1,"noerr":0,"x":702.111083984375,"y":1257.0119190216064,"wires":[[]]},{"id":"b754929f.a5224","type":"delay","z":"15488441.7338fc","name":"","pauseType":"delay","timeout":"2","timeoutUnits":"seconds","rate":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1016.3968544006348,"y":1235.5831909179688,"wires":[["4e08bf7f.599f3"]]},{"id":"fa11784b.3e6c08","type":"function","z":"15488441.7338fc","name":"step 4","func":"if (global.get('step4')==1 ) {\nglobal.set ('setPres', global.get ('PS0'));\nmsg.payload = global.get ('setPres');\nreturn msg; }\nelse \nreturn;","outputs":1,"noerr":0,"x":669.7302360534668,"y":780.5834445953369,"wires":[[]]},{"id":"aa575509.0821a8","type":"function","z":"15488441.7338fc","name":"step 4","func":"if (global.get('setPres') > 3 && global.get ('step4')==1 ) {\nglobal.set ('step4', 2 );\nreturn msg;\n} else ;\nreturn;","outputs":1,"noerr":0,"x":662.3492546081543,"y":697.2499961853027,"wires":[["19b75e4b.bf1d22"]]},{"id":"297560e9.cf372","type":"rbe","z":"15488441.7338fc","name":"","func":"rbe","gap":"","start":"","inout":"out","x":850.6825180053711,"y":1208.440578699112,"wires":[["b754929f.a5224"]]},{"id":"b4e98a67.aacae8","type":"inject","z":"15488441.7338fc","name":"blwr 0","topic":"blwr","payload":"0","payloadType":"num","repeat":"","crontab":"","once":true,"x":1239.015869140625,"y":427.3452310562134,"wires":[["bc567ba4.44a8d8"]]},{"id":"a2a80cab.6f858","type":"inject","z":"15488441.7338fc","name":"blwr 1","topic":"blwr","payload":"1","payloadType":"num","repeat":"","crontab":"","once":false,"x":1242.3492126464844,"y":470.6786050796509,"wires":[["bc567ba4.44a8d8"]]},{"id":"bc567ba4.44a8d8","type":"function","z":"15488441.7338fc","name":"global set blwr","func":"global.set('blwr',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":1467.0159149169922,"y":498.01195430755615,"wires":[["4e08bf7f.599f3"]]},{"id":"fe351232.b08bc","type":"inject","z":"15488441.7338fc","name":"blwr 2","topic":"blwr","payload":"2","payloadType":"num","repeat":"","crontab":"","once":false,"x":1245.6825408935547,"y":529.0119791030884,"wires":[["bc567ba4.44a8d8"]]},{"id":"e43a8ca7.acd95","type":"inject","z":"15488441.7338fc","name":"blwr 3","topic":"blwr","payload":"3","payloadType":"num","repeat":"","crontab":"","once":false,"x":1242.34912109375,"y":580.6785745620728,"wires":[["bc567ba4.44a8d8"]]},{"id":"2bdfa992.c99356","type":"function","z":"15488441.7338fc","name":"oldPhi","func":"msg.payload = global.get('oldPhi');\nmsg.topic = 'oldPhi';\nreturn msg;","outputs":1,"noerr":0,"x":827.230167388916,"y":1076.1706161499023,"wires":[["4e08bf7f.599f3"]]},{"id":"4850d60b.fe7208","type":"function","z":"15488441.7338fc","name":"oldPlo","func":"msg.payload = global.get('oldPlo');\nmsg.topic = 'oldPlo';\nreturn msg;","outputs":1,"noerr":0,"x":831.5158729553223,"y":1123.3134384155273,"wires":[["4e08bf7f.599f3"]]},{"id":"2545e3dd.34908c","type":"function","z":"15488441.7338fc","name":"oldFilt","func":"msg.payload = global.get('oldFilt');\nmsg.topic = 'oldFilt';\nreturn msg;","outputs":1,"noerr":0,"x":832.9444618225098,"y":1159.0277938842773,"wires":[["4e08bf7f.599f3"]]},{"id":"86d86e39.23f6","type":"function","z":"15488441.7338fc","name":"global set setFilt","func":"if (global.get('step4')==1 ) {\n    msg.payload = Math.abs(global.get('actFilt') - global.get ('tempPres'));\nglobal.set('setFilt',msg.payload);\nreturn msg;}\nelse \nreturn;","outputs":1,"noerr":0,"x":687.0872344970703,"y":741.0277519226074,"wires":[[]]},{"id":"722195e9.22338c","type":"comment","z":"15488441.7338fc","name":"step 2 test mode modification","info":"We will ignore float input and move to next step","x":691.7896881103516,"y":236.19439506530762,"wires":[]},{"id":"d15c8444.073668","type":"function","z":"15488441.7338fc","name":"step 3","func":"if (global.get('step3')===1 )\nreturn msg;","outputs":1,"noerr":0,"x":593.8015899658203,"y":1488.3134536743164,"wires":[["8cf3c839.a51df8","aaf8bf03.27b85"]]},{"id":"13486d5a.067f03","type":"inject","z":"15488441.7338fc","name":"1 Sec PULSE","topic":"","payload":"ddd","payloadType":"str","repeat":"1","crontab":"","once":true,"x":231.80160522460938,"y":1408.313398361206,"wires":[["80de7c3f.b84bf"]]},{"id":"b31d2ade.2a36a8","type":"function","z":"15488441.7338fc","name":"step 2","func":"if (global.get('step2')===1 )\nreturn msg;","outputs":1,"noerr":0,"x":598.8015899658203,"y":1401.3134536743164,"wires":[["9d784865.f745e8","bd613a92.79de88"]]},{"id":"60bf0383.9abbbc","type":"function","z":"15488441.7338fc","name":"step 1","func":"if (global.get('step1')===1 )\nreturn msg;","outputs":1,"noerr":0,"x":594.0873260498047,"y":1325.5991439819336,"wires":[["91b1988.95e8368"]]},{"id":"9b40fa27.ef7dd8","type":"function","z":"15488441.7338fc","name":"step 4","func":"if (global.get('step4')===1 )\nreturn msg;","outputs":1,"noerr":0,"x":593.8015899658203,"y":1557.3134536743164,"wires":[["16a78fd1.43a3","8c5717d3.8b4478"]]},{"id":"b4278515.c509b8","type":"function","z":"15488441.7338fc","name":"step 5","func":"if (global.get('step5')===1 )\nreturn msg;","outputs":1,"noerr":0,"x":602.8015899658203,"y":1631.3134536743164,"wires":[["de4a04fd.3aaac8","a94f2d91.e867b"]]},{"id":"7857953c.44b01c","type":"function","z":"15488441.7338fc","name":"set step 5 timed out alarm ","func":"if (global.get('step5')===1 ) {\n    global.set ('timedout', 1);\n    global.set ('blwr', 0);\n    global.set ('start_stop', 0);\n}\nreturn;","outputs":1,"noerr":0,"x":1073.8015899658203,"y":1617.3134536743164,"wires":[[]]},{"id":"95e07a2c.4bc038","type":"function","z":"15488441.7338fc","name":"set step 4 timed out alarm ","func":"if (global.get('step4')===1 ) {\n    global.set ('timedout', 1);\n    global.set ('blwr', 0);\n    global.set ('start_stop', 0);\n}\nreturn;","outputs":1,"noerr":0,"x":1069.8015899658203,"y":1541.3134536743164,"wires":[[]]},{"id":"2908fc8.fbd5f04","type":"function","z":"15488441.7338fc","name":"set step 3 timed out alarm ","func":"if (global.get('step3')===1 ) {\n    global.set ('timedout', 1);\n    global.set ('blwr', 0);\n    global.set ('start_stop', 0);\n}\nreturn;","outputs":1,"noerr":0,"x":1076.8015899658203,"y":1470.3134536743164,"wires":[[]]},{"id":"df01f91f.33a588","type":"function","z":"15488441.7338fc","name":"set step 2 timed out alarm ","func":"if (global.get('step2')===1 ) {\n    global.set ('timedout', 1);\n    global.set ('blwr', 0);\n    global.set ('start_stop', 0);\n}\nreturn;","outputs":1,"noerr":0,"x":1081.8015899658203,"y":1398.3134536743164,"wires":[[]]},{"id":"342128d1.272308","type":"function","z":"15488441.7338fc","name":"set step 1 timed out alarm ","func":"if (global.get('step1')===1 ) {\n    global.set ('timedout', 1);\n    global.set ('blwr', 0);\n    global.set ('start_stop', 0);\n}\nreturn;","outputs":1,"noerr":0,"x":1082.8015899658203,"y":1328.3134536743164,"wires":[[]]},{"id":"9d784865.f745e8","type":"trigger","z":"15488441.7338fc","op1":"","op2":"1","op1type":"nul","op2type":"str","duration":"30","extend":false,"units":"min","reset":"99","name":"","x":859.3015899658203,"y":1401.3134536743164,"wires":[["df01f91f.33a588"]]},{"id":"8cf3c839.a51df8","type":"change","z":"15488441.7338fc","name":"reset 99","rules":[{"t":"set","p":"payload","pt":"msg","to":"99","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":708.8015899658203,"y":1440.3134536743164,"wires":[["9d784865.f745e8"]]},{"id":"bd613a92.79de88","type":"change","z":"15488441.7338fc","name":"reset 99","rules":[{"t":"set","p":"payload","pt":"msg","to":"99","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":720.8015899658203,"y":1361.3134536743164,"wires":[["91b1988.95e8368"]]},{"id":"16a78fd1.43a3","type":"change","z":"15488441.7338fc","name":"reset 99","rules":[{"t":"set","p":"payload","pt":"msg","to":"99","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":710.8015899658203,"y":1517.3134536743164,"wires":[["aaf8bf03.27b85"]]},{"id":"de4a04fd.3aaac8","type":"change","z":"15488441.7338fc","name":"reset 99","rules":[{"t":"set","p":"payload","pt":"msg","to":"99","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":721.8015899658203,"y":1588.3134536743164,"wires":[["8c5717d3.8b4478"]]},{"id":"91b1988.95e8368","type":"trigger","z":"15488441.7338fc","op1":"","op2":"1","op1type":"nul","op2type":"str","duration":"20","extend":false,"units":"s","reset":"99","name":"","x":863.3015899658203,"y":1329.3134536743164,"wires":[["342128d1.272308"]]},{"id":"aaf8bf03.27b85","type":"trigger","z":"15488441.7338fc","op1":"","op2":"1","op1type":"nul","op2type":"str","duration":"20","extend":false,"units":"s","reset":"99","name":"","x":855.8015899658203,"y":1474.3134536743164,"wires":[["2908fc8.fbd5f04"]]},{"id":"8c5717d3.8b4478","type":"trigger","z":"15488441.7338fc","op1":"","op2":"1","op1type":"nul","op2type":"str","duration":"20","extend":false,"units":"s","reset":"99","name":"","x":855.8015899658203,"y":1543.3134536743164,"wires":[["95e07a2c.4bc038"]]},{"id":"a94f2d91.e867b","type":"trigger","z":"15488441.7338fc","op1":"","op2":"1","op1type":"nul","op2type":"str","duration":"20","extend":false,"units":"s","reset":"99","name":"","x":853.8015899658203,"y":1614.3134536743164,"wires":[["7857953c.44b01c"]]},{"id":"80de7c3f.b84bf","type":"function","z":"15488441.7338fc","name":"global get test or  demo mode","func":"if (global.get ('test_mode') ===1 || \nglobal.get ('demo_mode')===1) {\nmsg.payload = 1;\nreturn msg;\n} else\nmsg.payload = 0;\nreturn msg;\n","outputs":1,"noerr":0,"x":320.2301788330078,"y":1492.599220275879,"wires":[["569fcb00.8cc8c4"]]},{"id":"569fcb00.8cc8c4","type":"switch","z":"15488441.7338fc","name":"switch","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"num"},{"t":"eq","v":"0","vt":"num"}],"checkall":"true","outputs":2,"x":441.32545471191406,"y":1419.1447525024414,"wires":[[],["b4278515.c509b8","9b40fa27.ef7dd8","d15c8444.073668","b31d2ade.2a36a8","60bf0383.9abbbc"]]},{"id":"ab625c23.e4ec3","type":"function","z":"15488441.7338fc","name":"if test or  demo mode","func":"if (global.get('step5')===1 && (global.get ('test_mode') ===1 || \nglobal.get ('demo_mode')===1)) {\nreturn msg;} \n\n","outputs":1,"noerr":0,"x":715.2301788330078,"y":1037.599220275879,"wires":[["8ee3c11.4572f4"]]},{"id":"bd5da8a7.87c648","type":"function","z":"15488441.7338fc","name":"step 5","func":"if (2.0< global.get('oldPlo') < global.get ('actPres') && \nglobal.get('step5')===1 && global.get ('actPres') <global.get('oldPhi') < 9.0)  {\nglobal.set ('step5',2);\nreturn msg;\n}\nreturn ;","outputs":1,"noerr":0,"x":672.3967933654785,"y":996.0120468139648,"wires":[["4bd9b11.a878f5"]]},{"id":"8ee3c11.4572f4","type":"delay","z":"15488441.7338fc","name":"","pauseType":"delay","timeout":"10","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":912.7301788330078,"y":1037.599220275879,"wires":[["4cc6f27e.74119c"]]},{"id":"17ba065e.38112a","type":"vis in","z":"15488441.7338fc","language":"en","x":609,"y":46,"wires":[["5bfb0ac6.a60384"]]},{"id":"4e08bf7f.599f3","type":"vis in","z":"15488441.7338fc","language":"en","x":1573.666603088379,"y":1050.0001239776611,"wires":[[]]},{"id":"1572c95f.e856d7","type":"vis in","z":"2e61de0d.e4e032","language":"en","x":232,"y":243.00000095367432,"wires":[["83b02417.11be48"]]},{"id":"69ba8967.348cf8","type":"inject","z":"2e61de0d.e4e032","name":"","topic":"","payload":"","payloadType":"str","repeat":"","crontab":"","once":false,"x":349.1666463216152,"y":158.0000057220459,"wires":[["78f4c53a.05a6bc"]]},{"id":"83b02417.11be48","type":"switch","z":"2e61de0d.e4e032","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"shutdown","vt":"str"}],"checkall":"true","outputs":1,"x":400.1666463216152,"y":227.50000095367432,"wires":[["78f4c53a.05a6bc"]]},{"id":"78f4c53a.05a6bc","type":"exec","z":"2e61de0d.e4e032","command":"sudo i2cset -y 1 0x6B 0xcc","addpay":false,"append":"","useSpawn":"","timer":"","name":"","x":638.1666463216152,"y":237.00000095367432,"wires":[[],[],[]]},{"id":"985b88b8.ea1558","type":"comment","z":"2e61de0d.e4e032","name":"shutdown from VIS","info":"","x":553.4971135457363,"y":150.3835163116455,"wires":[]},{"id":"f6b18156.2ead","type":"inject","z":"2e61de0d.e4e032","name":"ONCE A SEC PULSE","topic":"","payload":"ddd","payloadType":"str","repeat":"1","crontab":"","once":true,"x":317.0000050862636,"y":424.4168839454651,"wires":[["201ca795.5a63b8","9582bc83.95a21"]]},{"id":"201ca795.5a63b8","type":"function","z":"2e61de0d.e4e032","name":"global get onbattery","func":"msg.payload = global.get('onbattery');\nmsg.topic = 'onbattery';\nreturn msg;","outputs":1,"noerr":0,"x":585.0001042683925,"y":338.9999933242798,"wires":[["f3acd96d.3e35f8"]]},{"id":"f3acd96d.3e35f8","type":"vis in","z":"2e61de0d.e4e032","language":"en","x":809.2501271565761,"y":411.5954751968384,"wires":[[]]},{"id":"9582bc83.95a21","type":"function","z":"2e61de0d.e4e032","name":"global get batterystatus","func":"msg.payload = global.get('batterystatus');\nmsg.topic = 'batterystatus';\nreturn msg;","outputs":1,"noerr":0,"x":597.9999974568691,"y":422.00566959381104,"wires":[["f3acd96d.3e35f8"]]},{"id":"4fadcc99.e47854","type":"comment","z":"2e61de0d.e4e032","name":"onbattery lets vis shutdown and battery status widgets know when to be visible","info":"","x":589.5028279622402,"y":295.37495517730713,"wires":[]},{"id":"88b0ca4.300ac38","type":"comment","z":"2e61de0d.e4e032","name":"batterystatus goes to widget to display battery remaining, number from 0 to 100","info":"","x":420.5000050862636,"y":380.3805675506592,"wires":[]},{"id":"d97321cb.ee3df","type":"inject","z":"2e61de0d.e4e032","name":"startup","topic":"","payload":"0","payloadType":"num","repeat":"","crontab":"","once":true,"x":314.0000050862636,"y":76,"wires":[["bf3973ec.1c4f"]]},{"id":"bf3973ec.1c4f","type":"function","z":"2e61de0d.e4e032","name":"initialize variables","func":"var onbattery = global.set ('onbattery', 0);\nvar batterystatus = global.set ('batterystatus', 0);\n\nreturn msg;\n","outputs":"1","noerr":0,"x":568.8929341634121,"y":80.5712308883667,"wires":[[]]},{"id":"daaaba0e.32eea8","type":"function","z":"2e61de0d.e4e032","name":"set batterystatus","func":"global.set ('batterystatus', msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":907.7500165303554,"y":832.083324432373,"wires":[["abb169a9.827ff8"]]},{"id":"5e525b74.98f624","type":"comment","z":"2e61de0d.e4e032","name":"nodes to get onbattery/batterystatus","info":"","x":528.5000050862636,"y":521.3333129882812,"wires":[]},{"id":"abb169a9.827ff8","type":"debug","z":"2e61de0d.e4e032","name":"","active":false,"console":"false","complete":"false","x":1166.5000203450527,"y":817.8333263397217,"wires":[]},{"id":"7904b2de.c0bbac","type":"function","z":"2e61de0d.e4e032","name":"set onbattery","func":"global.set ('onbattery', msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":1139.741536458334,"y":695.8333864212036,"wires":[["d6ed4bd6.d81798"]]},{"id":"d6ed4bd6.d81798","type":"debug","z":"2e61de0d.e4e032","name":"","active":false,"console":"false","complete":"false","x":1285.5000203450527,"y":754.0833873748779,"wires":[]},{"id":"21d64882.1ee5c8","type":"inject","z":"2e61de0d.e4e032","name":"","topic":"","payload":"1","payloadType":"num","repeat":"","crontab":"","once":false,"x":1152.795491536459,"y":551.9015617370605,"wires":[["7904b2de.c0bbac"]]},{"id":"47888bf8.feb794","type":"inject","z":"2e61de0d.e4e032","name":"","topic":"","payload":"0","payloadType":"num","repeat":"","crontab":"","once":false,"x":1188.045491536459,"y":589.9015636444092,"wires":[["7904b2de.c0bbac"]]},{"id":"70083d52.6edca4","type":"inject","z":"2e61de0d.e4e032","name":"","topic":"","payload":"0","payloadType":"num","repeat":"","crontab":"","once":false,"x":559.0000165303554,"y":942.5833225250244,"wires":[["daaaba0e.32eea8"]]},{"id":"b6ee0723.4aeec8","type":"inject","z":"2e61de0d.e4e032","name":"","topic":"","payload":"50","payloadType":"num","repeat":"","crontab":"","once":false,"x":545.0000165303554,"y":1012.5833225250244,"wires":[["daaaba0e.32eea8"]]},{"id":"1e580975.da7187","type":"inject","z":"2e61de0d.e4e032","name":"","topic":"","payload":"100","payloadType":"num","repeat":"","crontab":"","once":false,"x":558.0000165303554,"y":1086.5833225250244,"wires":[["daaaba0e.32eea8"]]},{"id":"1b880ca3.b51dc3","type":"inject","z":"2e61de0d.e4e032","name":"","topic":"","payload":"75","payloadType":"num","repeat":"","crontab":"","once":false,"x":528.0000165303554,"y":1048.5833225250244,"wires":[["daaaba0e.32eea8"]]},{"id":"6d4ff5e3.0fc66c","type":"inject","z":"2e61de0d.e4e032","name":"","topic":"","payload":"25","payloadType":"num","repeat":"","crontab":"","once":false,"x":523.0000165303554,"y":980.5833225250244,"wires":[["daaaba0e.32eea8"]]},{"id":"fd3bc358.fa94","type":"inject","z":"2e61de0d.e4e032","name":"","topic":"","payload":"","payloadType":"num","repeat":"","crontab":"","once":false,"x":298.67332967122456,"y":1175.75563621521,"wires":[["39b43351.0b771c"]]},{"id":"39b43351.0b771c","type":"exec","z":"2e61de0d.e4e032","command":"sudo i2cget -y 1 0x69 0x08","addpay":false,"append":"","useSpawn":"","timer":"","name":"","x":534.6733296712246,"y":1153.25563621521,"wires":[["3308278.52548d8"],[],[]]},{"id":"3308278.52548d8","type":"debug","z":"2e61de0d.e4e032","name":"","active":true,"console":"false","complete":"false","x":840.1761067708339,"y":1161.3550624847412,"wires":[]},{"id":"20a17d48.e16e22","type":"inject","z":"2e61de0d.e4e032","name":"","topic":"","payload":"","payloadType":"num","repeat":"","crontab":"","once":false,"x":301.76424153645894,"y":1260.9374599456787,"wires":[["72619854.e3b018"]]},{"id":"72619854.e3b018","type":"exec","z":"2e61de0d.e4e032","command":"sudo i2cget -y 1 0x69 0x00","addpay":false,"append":"","useSpawn":false,"timer":"","name":"","x":537.7642415364589,"y":1238.4374599456787,"wires":[["754a8745.748bf8"],[],[]]},{"id":"754a8745.748bf8","type":"debug","z":"2e61de0d.e4e032","name":"","active":true,"console":"false","complete":"false","x":847.2670491536464,"y":1243.5369472503662,"wires":[]},{"id":"70f0d4e6.cf8e0c","type":"function","z":"2e61de0d.e4e032","name":"Extract battery status","func":"var check = msg.payload;\nvar n = check.includes(\"BAT POWERED\");\nif (n === true) {\nmsg.payload = 1;\nreturn msg;\n}\nelse\nmsg.payload = 0;\nreturn msg;","outputs":1,"noerr":0,"x":624.7556889851894,"y":722.9829246997833,"wires":[["c8399984.7ff488","b1288bc0.873878"]]},{"id":"31b9d55f.1215ba","type":"exec","z":"2e61de0d.e4e032","command":"sudo python modules/pico_status.py","addpay":false,"append":"","useSpawn":"","timer":"","name":"","x":318.505711873373,"y":732.7102193832397,"wires":[["491f500a.d27e2","70f0d4e6.cf8e0c","d4289581.f7d9f8"],[],[]]},{"id":"766ea15a.cd04e","type":"inject","z":"2e61de0d.e4e032","name":"","topic":"","payload":"","payloadType":"str","repeat":"2","crontab":"","once":false,"x":176.25000508626363,"y":624.5937032699585,"wires":[["31b9d55f.1215ba"]]},{"id":"491f500a.d27e2","type":"debug","z":"2e61de0d.e4e032","name":"","active":false,"console":"false","complete":"false","x":501.51136525472066,"y":590.5539684295654,"wires":[]},{"id":"49950332.1f471c","type":"trigger","z":"2e61de0d.e4e032","op1":"","op2":"1","op1type":"nul","op2type":"num","duration":"2","extend":false,"units":"s","reset":"0","name":"","x":972.5085042317714,"y":620.6277551651001,"wires":[["9d1291e6.be02a"]]},{"id":"c8399984.7ff488","type":"switch","z":"2e61de0d.e4e032","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"num"},{"t":"eq","v":"0","vt":"num"}],"checkall":"true","outputs":2,"x":846.5055707295742,"y":693.9375762939453,"wires":[["49950332.1f471c"],["9d1291e6.be02a","49950332.1f471c"]]},{"id":"9d1291e6.be02a","type":"rbe","z":"2e61de0d.e4e032","name":"","func":"rbe","gap":"","start":"","inout":"out","x":1007.5482972462978,"y":741.6789035797119,"wires":[["7904b2de.c0bbac"]]},{"id":"b1288bc0.873878","type":"debug","z":"2e61de0d.e4e032","name":"","active":false,"console":"false","complete":"false","x":769.0454305013027,"y":624.0623931884766,"wires":[]},{"id":"d4289581.f7d9f8","type":"function","z":"2e61de0d.e4e032","name":"Extract battery percentage","func":"var find = msg.payload;\nvar position = find.indexOf(\"BAT Percentage..........: \");\nvar percentage = find.substring(position + 26, position + 32);\nmsg.payload = Math.abs(percentage);\nreturn msg;\n","outputs":1,"noerr":0,"x":602.3920415242519,"y":843.8238677978516,"wires":[["c4ab6cb.3d53a9","daaaba0e.32eea8"]]},{"id":"c4ab6cb.3d53a9","type":"debug","z":"2e61de0d.e4e032","name":"","active":false,"console":"false","complete":"false","x":682.9033406575527,"y":781.8039684295654,"wires":[]},{"id":"e311da5d.b896d8","type":"inject","z":"2e61de0d.e4e032","name":"","topic":"","payload":"","payloadType":"num","repeat":"","crontab":"","once":false,"x":298.4687550862636,"y":1361.5511474609375,"wires":[["11447a83.c7f765"]]},{"id":"11447a83.c7f765","type":"exec","z":"2e61de0d.e4e032","command":"sudo i2cget -y 1 0x69 0x0a","addpay":false,"append":"","useSpawn":"","timer":"","name":"","x":534.4687550862636,"y":1339.0511474609375,"wires":[["8b5f6bc5.593388"],[],[]]},{"id":"8b5f6bc5.593388","type":"debug","z":"2e61de0d.e4e032","name":"","active":true,"console":"false","complete":"false","x":839.971532185873,"y":1347.1505737304688,"wires":[]},{"id":"f663fcfd.af80e","type":"inject","z":"2e61de0d.e4e032","name":"","topic":"","payload":"","payloadType":"num","repeat":"","crontab":"","once":false,"x":283.4687550862636,"y":1482.5511474609375,"wires":[["428e5663.4a5b68"]]},{"id":"428e5663.4a5b68","type":"exec","z":"2e61de0d.e4e032","command":"sudo i2cdetect -y 1","addpay":false,"append":"","useSpawn":"","timer":"","name":"","x":489.4687550862636,"y":1460.0511474609375,"wires":[["7ede1c8f.096074"],[],[]]},{"id":"7ede1c8f.096074","type":"debug","z":"2e61de0d.e4e032","name":"","active":true,"console":"false","complete":"false","x":824.971532185873,"y":1468.1505737304688,"wires":[]},{"id":"a97a13b0.c4358","type":"inject","z":"67c7041b.7dfd5c","name":"ALRM 0","topic":"","payload":"0","payloadType":"num","repeat":"","crontab":"","once":false,"x":167,"y":108,"wires":[["2210b7d6.9b8af8"]]},{"id":"38f9978.5b29768","type":"inject","z":"67c7041b.7dfd5c","name":"ALRM 1","topic":"","payload":"1","payloadType":"num","repeat":"","crontab":"","once":false,"x":168.3333740234375,"y":142.33335971832275,"wires":[["2210b7d6.9b8af8"]]},{"id":"69a8bde9.0e5774","type":"inject","z":"67c7041b.7dfd5c","name":"blwr 0","topic":"blwr","payload":"0","payloadType":"num","repeat":"","crontab":"","once":true,"x":94.66670989990234,"y":441.3333559036255,"wires":[["d44dc59a.0ca868"]]},{"id":"705ddde8.342fb4","type":"inject","z":"67c7041b.7dfd5c","name":"blwr 1","topic":"blwr","payload":"1","payloadType":"num","repeat":"","crontab":"","once":false,"x":98.00003814697266,"y":485.666729927063,"wires":[["d44dc59a.0ca868"]]},{"id":"d44dc59a.0ca868","type":"function","z":"67c7041b.7dfd5c","name":"global set blwr","func":"global.set('blwr',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":271.0000305175781,"y":501.0001173019409,"wires":[[]]},{"id":"4fdafef9.1bd11","type":"inject","z":"67c7041b.7dfd5c","name":"blwr 2","topic":"blwr","payload":"2","payloadType":"num","repeat":"","crontab":"","once":false,"x":101.33338165283203,"y":528.0001039505005,"wires":[["d44dc59a.0ca868"]]},{"id":"d1fd7713.32a428","type":"inject","z":"67c7041b.7dfd5c","name":"blwr 3","topic":"blwr","payload":"3","payloadType":"num","repeat":"","crontab":"","once":false,"x":99.99994659423828,"y":568.6666994094849,"wires":[["d44dc59a.0ca868"]]},{"id":"54274195.434be","type":"inject","z":"67c7041b.7dfd5c","name":"ONCE A SEC PULSE","topic":"","payload":"ddd","payloadType":"str","repeat":"1","crontab":"","once":true,"x":181.3333511352539,"y":653.9999899864197,"wires":[["da73b503.a9f5a8","26304674.5fb7ba","84590fe.4b46ff","50119b6d.019be4","4476cec9.af7cc","a5ad04b2.1cf208","b73532d8.1f397"]]},{"id":"ab64bc52.906c9","type":"function","z":"67c7041b.7dfd5c","name":"global get alarm","func":"msg.payload = global.get('alarm');\nmsg.topic = 'alarm';\nreturn msg;","outputs":1,"noerr":0,"x":851.3333740234375,"y":524.6667003631592,"wires":[["2990386d.a533f8"]]},{"id":"da73b503.a9f5a8","type":"function","z":"67c7041b.7dfd5c","name":"global get blwr","func":"msg.payload = global.get('blwr');\nmsg.topic = 'blwr';\nreturn msg;","outputs":1,"noerr":0,"x":484.2380599975586,"y":852.8571758270264,"wires":[["2e05ec01.6172b4","4e31c0b6.4d03","2990386d.a533f8"]]},{"id":"2e05ec01.6172b4","type":"function","z":"67c7041b.7dfd5c","name":"global get speed","func":"if (global.get('blwr')===0) {global.set('speed', 'BLWR IDLE');}\nif (global.get('blwr')===1) {global.set('speed', 'BLWR WIND UP');}\nif (global.get('blwr')===2) {global.set('speed', 'FULL SPEED');}\nif (global.get('blwr')===3) {global.set('speed', 'BLWR SLOWING');}\nif (global.get('blwr')===4) {global.set('speed', 'BLWR LOCKED OFF');}\nmsg.payload = global.get('speed');\nmsg.topic = 'speed';\nreturn msg;","outputs":1,"noerr":0,"x":718.2382659912109,"y":910.1427593231201,"wires":[["2990386d.a533f8"]]},{"id":"b5363ac0.609b18","type":"function","z":"67c7041b.7dfd5c","name":"global get phase","func":"msg.payload = global.get('phase');\nmsg.topic = 'phase';\nreturn msg;","outputs":1,"noerr":0,"x":851.6665725708008,"y":488.33331203460693,"wires":[["2990386d.a533f8"]]},{"id":"84590fe.4b46ff","type":"function","z":"67c7041b.7dfd5c","name":"global get ballvalve","func":"msg.payload = global.get('ballvalve');\nmsg.topic = 'ballvalve';\nreturn msg;","outputs":1,"noerr":0,"x":496.99998474121094,"y":748.5713577270508,"wires":[["a7b1a2b7.45f4b","2990386d.a533f8"]]},{"id":"88c4a59d.c57808","type":"inject","z":"67c7041b.7dfd5c","name":"FLOAT:Off 1","topic":"flt","payload":"1","payloadType":"num","repeat":"","crontab":"","once":true,"x":147.45257186889648,"y":994.8889212608337,"wires":[["d0c641e1.4526f"]]},{"id":"4b6b4a92.9f8d84","type":"inject","z":"67c7041b.7dfd5c","name":"FLOAT:On 0","topic":"flt","payload":"0","payloadType":"num","repeat":"","crontab":"","once":false,"x":139.00018310546875,"y":1056.365108013153,"wires":[["d0c641e1.4526f"]]},{"id":"d0c641e1.4526f","type":"function","z":"67c7041b.7dfd5c","name":"global set flt","func":"global.set('flt',msg.payload);\nreturn;","outputs":1,"noerr":0,"x":358.07161712646484,"y":1038.1865830421448,"wires":[[]]},{"id":"50119b6d.019be4","type":"function","z":"67c7041b.7dfd5c","name":"compare man_control, blwr, flt, alarm","func":"if (global.get('man_control')===1 && global.get ('flt')===1 && \nglobal.get ('blwr')===0 && global.get ('alarm')===0 && global.get ('tune')===0 && \nglobal.get('press_calibration')===0) {\nvar ballvalve = global.set ('ballvalve',1);\nmsg.payload = global.get ('ballvalve');\nmsg.topic = 'ballvalve';\nreturn msg;\n}\nelse \nif (global.get('dynFill')==1 && global.get ('blwr')===2 && global.get ('alarm')===0 && \nglobal.get ('tune')===0 && global.get('press_calibration')===0) {\nvar ballvalve = global.set ('ballvalve',1);\nmsg.payload = global.get ('ballvalve');\nmsg.topic = 'ballvalve';\nreturn msg;\n} else\nif (global.get('tune')===1) {\nmsg.payload = global.get ('ballvalve');\nmsg.topic = 'ballvalve';\nreturn msg;\n} else\nif (global.get('press_calibration')===1) {\nmsg.payload = global.get ('ballvalve');\nmsg.topic = 'ballvalve';\nreturn msg;\n} else\nglobal.set('ballvalve', 0 );\nmsg.payload = global.get ('ballvalve');\nmsg.topic = 'ballvalve';","outputs":1,"noerr":0,"x":599.8451843261719,"y":697.5833415985107,"wires":[["2990386d.a533f8"]]},{"id":"213c9d41.9a72f2","type":"inject","z":"67c7041b.7dfd5c","name":"START - ON","topic":"start_stop","payload":"1","payloadType":"num","repeat":"","crontab":"","once":false,"x":374.5555191040039,"y":1240.11110830307,"wires":[["587831d1.bbc41"]]},{"id":"219a81e2.76fe9e","type":"inject","z":"67c7041b.7dfd5c","name":"START OFF (STOP)","topic":"start_stop","payload":"0","payloadType":"num","repeat":"","crontab":"","once":false,"x":399.65066146850586,"y":1281.3494124412537,"wires":[["587831d1.bbc41"]]},{"id":"587831d1.bbc41","type":"function","z":"67c7041b.7dfd5c","name":"global set START_STOP","func":"global.set('start_stop',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":740.1150054931641,"y":1239.0873045921326,"wires":[["a6199acc.2be448","5c0f1960.a1d8e8"]]},{"id":"97d3c4c4.cb6118","type":"switch","z":"67c7041b.7dfd5c","name":"set topic start_stop","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"start_stop","vt":"str"}],"checkall":"true","outputs":1,"x":485.93650817871094,"y":1137.730145931244,"wires":[["b0fe6265.13c95"]]},{"id":"e588c9d.e4c6838","type":"trigger","z":"67c7041b.7dfd5c","op1":"","op2":"1","op1type":"nul","op2type":"num","duration":"15","extend":false,"units":"s","reset":"99","name":"WIND UP TMR","x":1502.3336753845215,"y":989.7143166065216,"wires":[["9e23b309.10eb7"]]},{"id":"bec2df69.3e2dc","type":"trigger","z":"67c7041b.7dfd5c","op1":"1","op2":"0","op1type":"num","op2type":"num","duration":"2","extend":true,"units":"s","reset":"99","name":"blwer on","x":912.2856712341309,"y":968.4997072219849,"wires":[["a5b88e3e.0dab1","a4caf0b9.8240a"]]},{"id":"89aca949.a1e398","type":"function","z":"67c7041b.7dfd5c","name":"reset true","func":"global.set ('reset',99);\nreturn;","outputs":1,"noerr":0,"x":1294.9480438232422,"y":1211.1744122505188,"wires":[[]]},{"id":"a5b88e3e.0dab1","type":"rbe","z":"67c7041b.7dfd5c","name":"","func":"rbe","gap":"","start":"","inout":"out","x":1085.8571739196777,"y":970.7142901420593,"wires":[["109c3e4d.6c1de2"]]},{"id":"9e23b309.10eb7","type":"function","z":"67c7041b.7dfd5c","name":"global set blwr","func":"global.set('blwr',2);\nreturn ;","outputs":1,"noerr":0,"x":1656.0952529907227,"y":922.142993927002,"wires":[[]]},{"id":"109c3e4d.6c1de2","type":"switch","z":"67c7041b.7dfd5c","name":"1 up 0 dwn","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"num"},{"t":"eq","v":"0","vt":"num"}],"checkall":"true","outputs":2,"x":1262.6191482543945,"y":964.9999961853027,"wires":[["e588c9d.e4c6838"],["b93e8f4d.e45e2"]]},{"id":"276ea54c.2ade3a","type":"trigger","z":"67c7041b.7dfd5c","op1":"","op2":"1","op1type":"nul","op2type":"num","duration":"30","extend":false,"units":"s","reset":"99","name":"WIND DWN TMR","x":1508.3453979492188,"y":1107.1188735961914,"wires":[["4f87caff.b90694"]]},{"id":"f1a452ac.34de2","type":"change","z":"67c7041b.7dfd5c","name":"reset 99","rules":[{"t":"set","p":"payload","pt":"msg","to":"99","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":1043.650619506836,"y":1120.49196767807,"wires":[["276ea54c.2ade3a","89aca949.a1e398","e588c9d.e4c6838"]]},{"id":"ee408e26.35785","type":"switch","z":"67c7041b.7dfd5c","name":"reset","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"reset","vt":"str"}],"checkall":"true","outputs":1,"x":756.5077972412109,"y":1124.8729491233826,"wires":[["f1a452ac.34de2"]]},{"id":"b93e8f4d.e45e2","type":"function","z":"67c7041b.7dfd5c","name":"global set blwr","func":"global.set('blwr',3);\nreturn;","outputs":1,"noerr":0,"x":1545.7618103027344,"y":1049.285509109497,"wires":[[]]},{"id":"4f87caff.b90694","type":"function","z":"67c7041b.7dfd5c","name":"global set blwr","func":"global.set('blwr',0);\nreturn;","outputs":1,"noerr":0,"x":1659.6190719604492,"y":1178.714262008667,"wires":[[]]},{"id":"4e31c0b6.4d03","type":"switch","z":"67c7041b.7dfd5c","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"0","vt":"num"},{"t":"eq","v":"1","vt":"num"},{"t":"eq","v":"2","vt":"num"},{"t":"eq","v":"3","vt":"num"},{"t":"eq","v":"4","vt":"num"}],"checkall":"true","outputs":5,"x":656.7143669128418,"y":991.3810214996338,"wires":[[],["bec2df69.3e2dc"],["bec2df69.3e2dc"],["276ea54c.2ade3a","2b8c6067.9e611"],["2990386d.a533f8"]]},{"id":"a6199acc.2be448","type":"function","z":"67c7041b.7dfd5c","name":"global check blwr","func":"var newmsg = msg.payload; var newmsg2 = global.get('blwr');\nif (newmsg2 ===0 && newmsg === 1) {global.set('blwr', 1);}\nif (newmsg2 ===0 && newmsg === 0) {global.set('blwr', 0);}\nif (newmsg2 ==1 && newmsg === 0) {global.set('blwr', 3);}\nif (newmsg2 ==2 && newmsg === 0) {global.set('blwr', 3);}\nif (newmsg2 ==3 && newmsg === 1) {global.set('blwr', 1);}\nif (newmsg2 ==3 && newmsg === 0) {global.set('blwr', 0);}\nif (global.get('reset')== 99 )  {global.set('blwr', 0);}\nmsg.payload = global.get('blwr');\nmsg.topic = 'blwr';\nreturn;","outputs":1,"noerr":0,"x":1007.888916015625,"y":1240.218505859375,"wires":[[]]},{"id":"26304674.5fb7ba","type":"function","z":"67c7041b.7dfd5c","name":"global get man_fill","func":"if (global.get('man_control')===0) {global.set('man_fill', 'MAN FILL OFF');}\nif (global.get('man_control')==1) {global.set('man_fill', 'MAN FILL ON');}\nif (global.get('alarmonly_check')===0 && global.get('alarm') > 0) {global.set('man_fill', 'LOCKED OUT');}\nmsg.payload = global.get('man_fill');\nmsg.topic = 'man_fill';\nreturn msg;","outputs":1,"noerr":0,"x":650.8570938110352,"y":587.6189842224121,"wires":[["2990386d.a533f8"]]},{"id":"9c1253cd.63985","type":"function","z":"67c7041b.7dfd5c","name":"global set valve_state","func":"if (global.get('ballvalve')===0) {global.set('valve_state', 'WATER OFF');}\nelse if (global.get('ballvalve')===1) {global.set('valve_state', 'WATER ADDING');}\nelse if (global.get('alarm')>0) {global.set('valve_state', 'LOCKED OUT');}\nmsg.payload = global.get('valve_state');\nmsg.topic = 'valve_state';\nreturn msg;","outputs":1,"noerr":0,"x":1007.8215103149414,"y":849.9642038345337,"wires":[["2990386d.a533f8"]]},{"id":"5e42a5c7.c9de6c","type":"trigger","z":"67c7041b.7dfd5c","op1":"1","op2":"0","op1type":"num","op2type":"num","duration":"3","extend":true,"units":"s","reset":"99","name":"valve off delay","x":904.630729675293,"y":770.7976570129395,"wires":[["9c1253cd.63985"]]},{"id":"a7b1a2b7.45f4b","type":"switch","z":"67c7041b.7dfd5c","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"num"},{"t":"eq","v":"0","vt":"num"}],"checkall":"true","outputs":2,"x":719.6308288574219,"y":782.4285593032837,"wires":[["5e42a5c7.c9de6c"],["9c1253cd.63985"]]},{"id":"4339386c.b04df8","type":"function","z":"67c7041b.7dfd5c","name":"global set system_state","func":"if (global.get('blwr')===0) {global.set('system_state', 'ALARM IDLE');}\nif (global.get('blwr')===1) {global.set('system_state', 'SETTING ALARM');}\nif (global.get('blwr')===2) {global.set('system_state', 'OPERATION SAFE');}\nif (global.get('blwr')===3) {global.set('system_state', 'ALARM IN-ACTIVE');}\nif (global.get('blwr')===4) {global.set('system_state', 'TRIGGERED');}\nmsg.payload = global.get('system_state');\nmsg.topic = 'system_state';\nreturn msg;","outputs":1,"noerr":0,"x":862.3333053588867,"y":452.66667652130127,"wires":[["2990386d.a533f8"]]},{"id":"de058574.9f5168","type":"inject","z":"67c7041b.7dfd5c","name":"","topic":"actPres","payload":"7.5","payloadType":"num","repeat":"","crontab":"","once":false,"x":144.45247268676758,"y":1368.571072101593,"wires":[["d326009b.7ba03"]]},{"id":"ab52aa61.59d1a8","type":"inject","z":"67c7041b.7dfd5c","name":"","topic":"actPres","payload":"0","payloadType":"num","repeat":"","crontab":"","once":true,"x":144.49992752075195,"y":1203.0003957748413,"wires":[["d326009b.7ba03"]]},{"id":"74c13fa4.9ce93","type":"inject","z":"67c7041b.7dfd5c","name":"","topic":"actPres","payload":"5.9","payloadType":"num","repeat":"","crontab":"","once":false,"x":144.78581619262695,"y":1243.6669163703918,"wires":[["d326009b.7ba03"]]},{"id":"fa18535c.44dde","type":"inject","z":"67c7041b.7dfd5c","name":"","topic":"actPres","payload":"10","payloadType":"num","repeat":"","crontab":"","once":false,"x":162.40485763549805,"y":1413.1904835700989,"wires":[["d326009b.7ba03"]]},{"id":"a63f43c6.fab45","type":"inject","z":"67c7041b.7dfd5c","name":"","topic":"actFilt","payload":"0","payloadType":"num","repeat":"","crontab":"","once":false,"x":143.23822784423828,"y":856.5239853858948,"wires":[["26c9e301.830a7c"]]},{"id":"27cbf2fd.4a0cce","type":"inject","z":"67c7041b.7dfd5c","name":"","topic":"actFilt","payload":"0.25","payloadType":"num","repeat":"","crontab":"","once":false,"x":149.90487670898438,"y":896.1909852027893,"wires":[["26c9e301.830a7c"]]},{"id":"2a013747.430bc8","type":"inject","z":"67c7041b.7dfd5c","name":"","topic":"actFilt","payload":"0.85","payloadType":"num","repeat":"","crontab":"","once":false,"x":157.90487670898438,"y":935.1908249855042,"wires":[["26c9e301.830a7c"]]},{"id":"d326009b.7ba03","type":"function","z":"67c7041b.7dfd5c","name":"global set actPres","func":"global.set('actPres',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":393.88097381591797,"y":1324.8807158470154,"wires":[[]]},{"id":"26c9e301.830a7c","type":"function","z":"67c7041b.7dfd5c","name":"global set actFilt","func":"global.set('actFilt',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":378.50011444091797,"y":912.7380175590515,"wires":[[]]},{"id":"b73532d8.1f397","type":"function","z":"67c7041b.7dfd5c","name":"determine demand for dyn water","func":"var setPress = global.get('setPres');\nvar actPress = global.get('actPres');\nvar diff = (setPress-actPress);\nif (diff >= 0.25 ) {dynFill = global.set ('dynFill', 1 );\n    return msg;\n}\nif (diff < 0.05 ) {dynFill = global.set ('dynFill', 0 );\n\n    return msg;\n}\n","outputs":1,"noerr":0,"x":598.8960571289062,"y":660.7379951477051,"wires":[["2990386d.a533f8"]]},{"id":"788f6c58.2dbbe4","type":"inject","z":"67c7041b.7dfd5c","name":"","topic":"actPres","payload":"7.0","payloadType":"num","repeat":"","crontab":"","once":false,"x":138.02390670776367,"y":1307.856891155243,"wires":[["d326009b.7ba03"]]},{"id":"dc583fb6.30a55","type":"comment","z":"67c7041b.7dfd5c","name":"blwr 0 1 2 3 ","info":"0 - idle\n1 - wind up\n2 - full speed\n3 - wind down","x":276.6666679382324,"y":446.66669750213623,"wires":[]},{"id":"8fde2f5b.a33b6","type":"function","z":"67c7041b.7dfd5c","name":"global set alarm ","func":"if (global.get('permPhi')===1 ||\n    global.get('permPlo')===1 ||\n    global.get('permDirt')===1 ||\n    global.get('timedout_alarm')===1)\n    {global.set('alarm', 1);\nmsg.payload = global.get('alarm');\nmsg.topic = 'alarm';\nreturn msg;\n}\nelse\nreturn ;","outputs":1,"noerr":0,"x":1447.666618347168,"y":365.66645526885986,"wires":[[]]},{"id":"b2db8bfe.7d9158","type":"inject","z":"67c7041b.7dfd5c","name":"blwr 4","topic":"blwr","payload":"4","payloadType":"num","repeat":"","crontab":"","once":false,"x":102.3333740234375,"y":605.0000123977661,"wires":[["d44dc59a.0ca868"]]},{"id":"416622ca.049c8c","type":"function","z":"67c7041b.7dfd5c","name":"alarm lock out","func":"if (global.get ('alarm') > 0) {\nglobal.set ('blwr',4);\nglobal.set ('ballvalve', 0);\nglobal.set ('man_control', 0);\nglobal.set ('start_stop', 0);\nglobal.set ('valve_state', 'LOCKED OUT');\nglobal.set ('man_fill', 'LOCKED OUT');\nglobal.set ('dynFill', 0);\nglobal.set ('conveyor', 0);\nreturn;\n}\nelse return;","outputs":1,"noerr":0,"x":1266.9999389648438,"y":415.3332567214966,"wires":[[]]},{"id":"a4caf0b9.8240a","type":"switch","z":"67c7041b.7dfd5c","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"num"},{"t":"eq","v":"0","vt":"num"}],"checkall":"true","outputs":2,"x":1074.7621154785156,"y":1015.4762449264526,"wires":[["a73a669b.c22e68"],[]]},{"id":"a73a669b.c22e68","type":"change","z":"67c7041b.7dfd5c","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"99","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":1230.6190643310547,"y":1015.1905727386475,"wires":[["276ea54c.2ade3a"]]},{"id":"2b8c6067.9e611","type":"function","z":"67c7041b.7dfd5c","name":"global set blwr","func":"global.set('blwr',3);\nglobal.set('start_stop',0);\nreturn msg;","outputs":1,"noerr":0,"x":844.5833129882812,"y":1066.0477333068848,"wires":[["2990386d.a533f8"]]},{"id":"b0fe6265.13c95","type":"change","z":"67c7041b.7dfd5c","name":"","rules":[{"t":"change","p":"payload","pt":"msg","from":"true","fromt":"bool","to":"1","tot":"num"},{"t":"change","p":"payload","pt":"msg","from":"false","fromt":"bool","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":669.8412933349609,"y":1157.4919867515564,"wires":[["587831d1.bbc41","1cec372e.fee229","a6199acc.2be448"]]},{"id":"1cec372e.fee229","type":"function","z":"67c7041b.7dfd5c","name":"start stop reset windup","func":"if (msg.payload === 0) {msg.payload = 99;\nreturn msg;\n}\nelse\nreturn;","outputs":1,"noerr":0,"x":993.2698211669922,"y":1162.063500881195,"wires":[["e588c9d.e4c6838","261e20bc.7ed9b"]]},{"id":"b7fb6c53.07d61","type":"function","z":"67c7041b.7dfd5c","name":"autotune reset windup","func":"if (msg.payload === 0) {msg.payload = 99;\nreturn msg;\n}\nelse\nreturn;","outputs":1,"noerr":0,"x":991.6030731201172,"y":1202.253930568695,"wires":[["e588c9d.e4c6838"]]},{"id":"b4da62b9.70695","type":"switch","z":"67c7041b.7dfd5c","name":"set topic begin","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"begin","vt":"str"}],"checkall":"true","outputs":1,"x":494.26979064941406,"y":1201.253930568695,"wires":[["b7fb6c53.07d61"]]},{"id":"bf3c3d7f.33aba","type":"function","z":"67c7041b.7dfd5c","name":"set warnPhi alarm","func":"if (global.get('tune')===0 && global.get('blwr')===2 && \n    global.get('actPres')>= global.get('oldPhi')) \n    {global.set('warnPhi',1);}\nelse {global.set('warnPhi',0);}\nreturn;\n","outputs":1,"noerr":0,"x":1226.833179473877,"y":454.61904430389404,"wires":[[]]},{"id":"2210b7d6.9b8af8","type":"function","z":"67c7041b.7dfd5c","name":"global set alarm","func":"global.set('alarm',msg.payload);\nreturn;","outputs":1,"noerr":0,"x":375.3333501815796,"y":117.61904907226562,"wires":[[]]},{"id":"a52c5ef3.81f7b","type":"switch","z":"67c7041b.7dfd5c","name":"switch","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"num"},{"t":"eq","v":"0","vt":"num"}],"checkall":"true","outputs":2,"x":584.8571891784668,"y":372.16453647613525,"wires":[["d24b5494.ad19d8"],["a8d6e1b7.c2d27","b5363ac0.609b18","ab64bc52.906c9","4339386c.b04df8","d3561b14.fa3e18","bbb4ed5f.bf8f7","4d97323b.887dcc"]]},{"id":"d24b5494.ad19d8","type":"trigger","z":"67c7041b.7dfd5c","op1":"","op2":"0","op1type":"nul","op2type":"str","duration":"10","extend":false,"units":"min","reset":"99","name":"","x":776.8332901000977,"y":208.61905193328857,"wires":[["a88186f0.87a758"]]},{"id":"a88186f0.87a758","type":"function","z":"67c7041b.7dfd5c","name":"global reset test_mode","func":"global.set('test_mode',0);\nreturn;","outputs":1,"noerr":0,"x":967.4761161804199,"y":208.76190853118896,"wires":[[]]},{"id":"a8d6e1b7.c2d27","type":"change","z":"67c7041b.7dfd5c","name":"reset on 0","rules":[{"t":"set","p":"payload","pt":"msg","to":"99","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":619.4761810302734,"y":202.90476894378662,"wires":[["d24b5494.ad19d8"]]},{"id":"4476cec9.af7cc","type":"function","z":"67c7041b.7dfd5c","name":"global set system_state","func":"if (global.get('test_mode')===1) {global.set('system_state', 'TEST MODE');}\nif (global.get('demo_mode')===1) {global.set('system_state', 'DEMO MODE');}\nmsg.payload = global.get('system_state');\nmsg.topic = 'system_state';\nreturn msg;","outputs":1,"noerr":0,"x":629.047607421875,"y":622.9047966003418,"wires":[["2990386d.a533f8"]]},{"id":"a5ad04b2.1cf208","type":"function","z":"67c7041b.7dfd5c","name":"global get test, demo, or calibration mode","func":"if (global.get ('test_mode') ===1 || \nglobal.get ('demo_mode')===1 ||\nglobal.get ('press_calibration')===1) {\nmsg.payload = 1;\nreturn msg;\n} else\nmsg.payload = 0;\nreturn msg;\n","outputs":1,"noerr":0,"x":493.3333435058594,"y":533.3690611124039,"wires":[["a52c5ef3.81f7b"]]},{"id":"2990386d.a533f8","type":"vis in","z":"67c7041b.7dfd5c","language":"en","x":1199.833381652832,"y":747.619065284729,"wires":[[]]},{"id":"32506d0a.2ee982","type":"vis in","z":"67c7041b.7dfd5c","language":"en","x":218.0555305480957,"y":1106.063500881195,"wires":[["ee408e26.35785","97d3c4c4.cb6118","b4da62b9.70695"]]},{"id":"741623aa.1db5fc","type":"function","z":"67c7041b.7dfd5c","name":"phase lock out","func":"if (global.get ('phase')=== 0)  {\nglobal.set ('blwr',4);\nglobal.set ('ballvalve', 0);\nglobal.set ('man_control', 0);\nglobal.set ('start_stop', 0);\nglobal.set ('valve_state', 'LOCKED OUT');\nglobal.set ('man_fill', 'LOCKED OUT');\nglobal.set ('dynFill', 0);\nglobal.set ('conveyor', 0);\nreturn;\n}\nelse return;","outputs":1,"noerr":0,"x":1461.5001373291016,"y":401.99985122680664,"wires":[[]]},{"id":"d3561b14.fa3e18","type":"function","z":"67c7041b.7dfd5c","name":"get phase alarm","func":"if (global.get ('phase') === 1)\n{\nmsg.payload = 1;\nreturn msg;\n} \nelse\nmsg.payload = 0;\nreturn msg;","outputs":1,"noerr":0,"x":840.5000457763672,"y":297.9999861717224,"wires":[["8159ebb5.2205f8"]]},{"id":"8159ebb5.2205f8","type":"switch","z":"67c7041b.7dfd5c","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"num"},{"t":"eq","v":"0","vt":"num"}],"checkall":"true","outputs":2,"x":1002.5,"y":300.9999752044678,"wires":[["8e814fba.12cc6"],["2ae80f08.c3362"]]},{"id":"2ae80f08.c3362","type":"change","z":"67c7041b.7dfd5c","name":"","rules":[{"t":"set","p":"reset","pt":"msg","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":1167.5000953674316,"y":319.9999895095825,"wires":[["8e814fba.12cc6"]]},{"id":"8e814fba.12cc6","type":"trigger","z":"67c7041b.7dfd5c","op1":"1","op2":"0","op1type":"num","op2type":"str","duration":"0","extend":false,"units":"ms","reset":"reset","name":"","x":1188.0000534057617,"y":279.99999809265137,"wires":[["b6ebeb58.1314c8"]]},{"id":"b6ebeb58.1314c8","type":"function","z":"67c7041b.7dfd5c","name":"SET CALL VARIABLES","func":"var alarm = global.set ('alarm', 0);\nvar blwr = global.set ('blwr', 0);\nvar permPlo = global.set ('permPlo', 0);\nvar permPhi = global.set ('permPhi', 0);\nvar permDirt = global.set ('permDirt', 0);\nvar begin = global.set ('begin', 0);\nvar step1 = global.set ('step1', 0);\nvar step2 = global.set ('step2', 0);\nvar step3 = global.set ('step3', 0);\nvar step4 = global.set ('step4', 0);\nvar step5 = global.set ('step5', 0);\nvar step6 = global.set ('step6', 0);\nvar step7 = global.set ('step7', 0);\nvar timedout = global.set ('timedout', 0);\nvar timedout_alarm = global.set ('timedout_alarm', 0);\nvar gate = global.set ('gate', 0);\nvar table = global.set ('table', 0);\nvar filterlife = global.set ('filterlife', 0);\nvar ballvalve = global.set ('ballvalve', 0);\nvar reset = global.set ('reset', 0);\nvar test_mode = global.set ('test_mode', 0);\nvar dynFill = global.set ('dynFill', 0);\nvar tune = global.set ('tune', 0);\nvar demo_mode = global.set ('demo_mode', 0);\nreturn msg;\n","outputs":"1","noerr":0,"x":1383.4999961853027,"y":302.99997425079346,"wires":[[]]},{"id":"cd972cc1.00132","type":"comment","z":"67c7041b.7dfd5c","name":"Conveyor logic","info":"","x":805.1668090820312,"y":1635.499851822853,"wires":[]},{"id":"d571e16e.ff11a","type":"inject","z":"67c7041b.7dfd5c","name":"ONCE A SEC PULSE","topic":"","payload":"ddd","payloadType":"str","repeat":"1","crontab":"","once":true,"x":168.58348083496094,"y":1736.166722893715,"wires":[["b98a5e56.32c86"]]},{"id":"381f125a.668e8e","type":"function","z":"67c7041b.7dfd5c","name":"global get conveyor","func":"msg.payload = global.get('conveyor');\nmsg.topic = 'conveyor';\nreturn msg;","outputs":1,"noerr":0,"x":622.3334655761719,"y":2077.916726708412,"wires":[["14faa8ad.154ff7"]]},{"id":"b0bac620.e7f1f8","type":"function","z":"67c7041b.7dfd5c","name":"global get conveyor_status","func":"if (global.get('conveyor_control')===0) {global.set('conveyor_status', 'CONV OFF');}\nif (global.get('conveyor_control')==1) {global.set('conveyor_status', 'CONV ON');}\nif (global.get('conveyor_control')==2 && global.get('conveyor')===1) {global.set('conveyor_status', 'CONV AUTO ON');}\nif (global.get('conveyor_control')==2 && global.get('conveyor')===0) {global.set('conveyor_status', 'CONV AUTO OFF');}\nif (global.get('alarm') > 0) {global.set('conveyor_status', 'LOCKED OUT');}\nmsg.payload = global.get('conveyor_status');\nmsg.topic = 'conveyor_status';\nreturn msg;","outputs":1,"noerr":0,"x":601.8097229003906,"y":2001.1071563959122,"wires":[["14faa8ad.154ff7"]]},{"id":"14faa8ad.154ff7","type":"vis in","z":"67c7041b.7dfd5c","language":"en","x":916.6430358886719,"y":2096.393045067787,"wires":[[]]},{"id":"1ad0706f.03619","type":"function","z":"67c7041b.7dfd5c","name":"global get conveyor_check","func":"msg.payload = global.get('conveyor_check');\nmsg.topic = 'conveyor_check';\nreturn msg;","outputs":1,"noerr":0,"x":607.3334655761719,"y":2128.916726708412,"wires":[["14faa8ad.154ff7"]]},{"id":"add7ad57.9ae5b","type":"function","z":"67c7041b.7dfd5c","name":"global get conveyor_control","func":"msg.payload = global.get('conveyor_control');\nmsg.topic = 'conveyor_control';\nreturn msg;","outputs":1,"noerr":0,"x":626.3334655761719,"y":2036.9167267084122,"wires":[["14faa8ad.154ff7"]]},{"id":"b98a5e56.32c86","type":"function","z":"67c7041b.7dfd5c","name":"global get conveyor_check","func":"if (global.get ('conveyor_check') ===1) {\nmsg.payload = 1;\nreturn msg;\n} else\nmsg.payload = 0;\nreturn msg;\n","outputs":1,"noerr":0,"x":215.58348083496094,"y":1869.166722893715,"wires":[["9df08f24.f0692"]]},{"id":"9df08f24.f0692","type":"switch","z":"67c7041b.7dfd5c","name":"switch","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"num"},{"t":"eq","v":"0","vt":"num"}],"checkall":"true","outputs":2,"x":335.8572998046875,"y":1998.4621368646622,"wires":[["b0bac620.e7f1f8","1ad0706f.03619","381f125a.668e8e","add7ad57.9ae5b","af72acb1.13dc6"],["1ad0706f.03619"]]},{"id":"a6420085.6023","type":"function","z":"67c7041b.7dfd5c","name":"global get blwr","func":"if (global.get ('blwr') == 2)  \n {\nmsg.payload = 1;\nreturn msg;\n} else\nmsg.payload = 0;\nreturn msg;","outputs":1,"noerr":0,"x":578.000129699707,"y":1767.055685222149,"wires":[["6bd3104b.41a4f"]]},{"id":"6bd3104b.41a4f","type":"switch","z":"67c7041b.7dfd5c","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"num"},{"t":"eq","v":"0","vt":"num"}],"checkall":"true","outputs":2,"x":727.0001602172852,"y":1724.1667677164078,"wires":[["59219afd.3e6924"],["7f1a7b0a.d0b7d4"]]},{"id":"6b977071.a939","type":"trigger","z":"67c7041b.7dfd5c","op1":"","op2":"1","op1type":"nul","op2type":"str","duration":"1","extend":false,"units":"min","reset":"reset","name":"","x":1086.7501831054688,"y":1673.5002065896988,"wires":[["1c5617ec.d09938"]]},{"id":"7f1a7b0a.d0b7d4","type":"change","z":"67c7041b.7dfd5c","name":"","rules":[{"t":"set","p":"reset","pt":"msg","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":899.58349609375,"y":1741.1667829751968,"wires":[["6b977071.a939","1c5617ec.d09938","c1913e54.53e16"]]},{"id":"1c5617ec.d09938","type":"trigger","z":"67c7041b.7dfd5c","op1":"1","op2":"0","op1type":"num","op2type":"num","duration":"8","extend":false,"units":"min","reset":"reset","name":"8 min on","x":1226.58349609375,"y":1734.1667829751968,"wires":[["39e97e20.2f60c2"]]},{"id":"53188cf.6d9ef74","type":"change","z":"67c7041b.7dfd5c","name":"","rules":[{"t":"set","p":"reset","pt":"msg","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":1062.58349609375,"y":1768.1667829751968,"wires":[["1c5617ec.d09938"]]},{"id":"c1913e54.53e16","type":"trigger","z":"67c7041b.7dfd5c","op1":"0","op2":"1","op1type":"num","op2type":"num","duration":"8","extend":false,"units":"min","reset":"reset","name":"8 min off","x":1227.58349609375,"y":1807.1667829751968,"wires":[["506f11ed.e52e3"]]},{"id":"5be20bc3.9a01b4","type":"change","z":"67c7041b.7dfd5c","name":"","rules":[{"t":"set","p":"reset","pt":"msg","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":1034.58349609375,"y":1828.1667829751968,"wires":[["c1913e54.53e16"]]},{"id":"8be7da27.be3508","type":"trigger","z":"67c7041b.7dfd5c","op1":"1","op2":"0","op1type":"num","op2type":"str","duration":"30","extend":false,"units":"min","reset":"reset","name":"30 min on","x":1388.9724006652832,"y":1892.3055530786514,"wires":[["e625edde.aa48a"]]},{"id":"b99efef0.7fce","type":"change","z":"67c7041b.7dfd5c","name":"","rules":[{"t":"set","p":"reset","pt":"msg","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":1247.3890991210938,"y":1845.05568754673,"wires":[["8be7da27.be3508"]]},{"id":"9a0c52de.2985b","type":"function","z":"67c7041b.7dfd5c","name":"global set conveyor","func":"global.set('conveyor',msg.payload);\nreturn;","outputs":1,"noerr":0,"x":1496.5835227966309,"y":2011.2500063180923,"wires":[[]]},{"id":"6ab4d517.b080bc","type":"inject","z":"67c7041b.7dfd5c","name":"ONCE A SEC PULSE","topic":"","payload":"ddd","payloadType":"str","repeat":"1","crontab":"","once":true,"x":261.6667658487959,"y":2304.9999162554745,"wires":[["9fd28ad6.51cd18","4835c4ae.de1e3c"]]},{"id":"d04d0402.b02b48","type":"comment","z":"67c7041b.7dfd5c","name":"password check ","info":"","x":490.8334426879883,"y":2216.666664302349,"wires":[]},{"id":"c7462439.bc4498","type":"delay","z":"67c7041b.7dfd5c","name":"","pauseType":"delay","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":759.5001093546553,"y":2300.6666643023495,"wires":[["d8bf0137.c0503"]]},{"id":"d8bf0137.c0503","type":"function","z":"67c7041b.7dfd5c","name":"fspassword reset","func":"global.set('fspasstrue', 0);\nglobal.set('fspassword', 0);\nreturn;\n","outputs":1,"noerr":0,"x":993.0001093546553,"y":2281.6666643023495,"wires":[[]]},{"id":"9fd28ad6.51cd18","type":"function","z":"67c7041b.7dfd5c","name":"fspasstrue check","func":"if (global.get('fspasstrue')== 1) {\n    return msg;\n}\nreturn ;","outputs":1,"noerr":0,"x":557.0001093546553,"y":2300.6666643023495,"wires":[["c7462439.bc4498"]]},{"id":"af72acb1.13dc6","type":"function","z":"67c7041b.7dfd5c","name":"global get conveyor_control","func":"msg.payload = global.get('conveyor_control');\nmsg.topic = 'conveyor_control';\nreturn msg;","outputs":1,"noerr":0,"x":522.0001220703125,"y":1922.3332868814468,"wires":[["8498e10d.b7b3d"]]},{"id":"8498e10d.b7b3d","type":"switch","z":"67c7041b.7dfd5c","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"2","vt":"num"},{"t":"eq","v":"1","vt":"num"},{"t":"eq","v":"0","vt":"num"}],"checkall":"true","outputs":3,"x":489.0001220703125,"y":1862.3332868814468,"wires":[["a6420085.6023","3aa9c93.3db0d36"],["9a0c52de.2985b"],["9a0c52de.2985b"]]},{"id":"59219afd.3e6924","type":"trigger","z":"67c7041b.7dfd5c","op1":"1","op2":"","op1type":"num","op2type":"nul","duration":"3","extend":true,"units":"s","reset":"99","name":"blwer on","x":880.0001220703125,"y":1707.3332868814468,"wires":[["6b977071.a939","b99efef0.7fce"]]},{"id":"e625edde.aa48a","type":"rbe","z":"67c7041b.7dfd5c","name":"","func":"rbe","gap":"","start":"","inout":"out","x":1554.5001220703125,"y":1771.3332868814468,"wires":[["9a0c52de.2985b"]]},{"id":"39e97e20.2f60c2","type":"switch","z":"67c7041b.7dfd5c","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"num"},{"t":"eq","v":"0","vt":"num"}],"checkall":"true","outputs":2,"x":1364.5001220703125,"y":1734.3332868814468,"wires":[["e625edde.aa48a","5be20bc3.9a01b4"],["c1913e54.53e16"]]},{"id":"506f11ed.e52e3","type":"switch","z":"67c7041b.7dfd5c","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"num"},{"t":"eq","v":"0","vt":"num"}],"checkall":"true","outputs":2,"x":1363.0001220703125,"y":1795.3332868814468,"wires":[["1c5617ec.d09938"],["e625edde.aa48a","53188cf.6d9ef74"]]},{"id":"9452434e.e3a58","type":"trigger","z":"67c7041b.7dfd5c","op1":"","op2":"1","op1type":"nul","op2type":"str","duration":"3","extend":true,"units":"s","reset":"reset","name":"","x":1001.4723243713379,"y":1889.1386696100235,"wires":[["2b937639.0c067a"]]},{"id":"2b937639.0c067a","type":"function","z":"67c7041b.7dfd5c","name":"global get blwr","func":"if (global.get ('blwr') === 0 || global.get('blwr') == 3)  \n {\nmsg.payload = 1;\nreturn msg;\n}\nreturn;","outputs":1,"noerr":0,"x":1180.2780532836914,"y":1890.8611904382706,"wires":[["8be7da27.be3508"]]},{"id":"3aa9c93.3db0d36","type":"function","z":"67c7041b.7dfd5c","name":"global get blwr","func":"if (global.get ('blwr') == 2)  \n {\nmsg.payload = 1;\nreturn msg;\n} else\nreturn;","outputs":1,"noerr":0,"x":773.8889923095703,"y":1858.3331133127213,"wires":[["9452434e.e3a58"]]},{"id":"433f4336.61994c","type":"function","z":"67c7041b.7dfd5c","name":"fspassword check","func":"var check = global.get('setfspassword');\nif (global.get('fspassword') == check) {\n    global.set('fspasstrue', 1);\n    return;\n}\nelse if (global.get('fspassword')!= check) {\n    global.set('fspasstrue', 0);\n    return;\n}\nreturn ;","outputs":1,"noerr":0,"x":893.3332862854004,"y":2351.666096866131,"wires":[[]]},{"id":"1f3dd04a.aac7d","type":"rbe","z":"67c7041b.7dfd5c","name":"","func":"rbe","gap":"","start":"","inout":"out","x":710.0000686645508,"y":2349.999674975872,"wires":[["433f4336.61994c"]]},{"id":"4835c4ae.de1e3c","type":"function","z":"67c7041b.7dfd5c","name":"global get fspassword","func":"msg.payload = global.get('fspassword');\nmsg.topic = 'fspassword';\nreturn msg;","outputs":1,"noerr":0,"x":545.0000495910645,"y":2346.666585147381,"wires":[["1f3dd04a.aac7d"]]},{"id":"39cd2e9e.848242","type":"comment","z":"67c7041b.7dfd5c","name":"test, demo, or calibration mode alarm isolation","info":"","x":568.5001068115234,"y":431.6666693687439,"wires":[]},{"id":"39bcb455.df8fec","type":"comment","z":"67c7041b.7dfd5c","name":"alarm logic","info":"","x":937.5000953674316,"y":246.66666316986084,"wires":[]},{"id":"486e7054.2afb3","type":"function","z":"67c7041b.7dfd5c","name":"global set hiductpress alarm","func":"if (global.get('tune')===0 && global.get('blwr')===2 && \n   global.get('ductPress')>= 4) {\n   global.set('hiductpress', 1);\n   return;}\nelse if (global.get('ductPress')< 4) {\n   global.set('hiductpress', 0);\n   return;}\nmsg.payload = global.get('hiductpress');\nmsg.topic = 'hiductpress';\nreturn msg;","outputs":1,"noerr":0,"x":1187.0001602172852,"y":354.6666421890259,"wires":[["2990386d.a533f8"]]},{"id":"bbb4ed5f.bf8f7","type":"function","z":"67c7041b.7dfd5c","name":"ducted check","func":"if (global.get ('ducted_check') ===1) { \nmsg.payload = 1;\nreturn msg;} \nelse\nmsg.payload = 0;\nreturn msg;\n","outputs":1,"noerr":0,"x":825.0001220703125,"y":343.66667079925537,"wires":[["22e59aa5.e93116"]]},{"id":"22e59aa5.e93116","type":"switch","z":"67c7041b.7dfd5c","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"num"},{"t":"eq","v":"0","vt":"num"}],"checkall":"true","outputs":2,"x":977.0000648498535,"y":349.66668224334717,"wires":[["486e7054.2afb3"],[]]},{"id":"a4035d80.578cc","type":"function","z":"67c7041b.7dfd5c","name":"global set hiductpress","func":"global.set('hiductpress',msg.payload);\nreturn;","outputs":1,"noerr":0,"x":1751.9999885559082,"y":224.6666021347046,"wires":[[]]},{"id":"841c820a.359cf","type":"inject","z":"67c7041b.7dfd5c","name":"hiductpress 1","topic":"hiductpress","payload":"1","payloadType":"num","repeat":"","crontab":"","once":false,"x":1537.6666450500488,"y":187.04754734039307,"wires":[["a4035d80.578cc"]]},{"id":"17602db9.facfb2","type":"inject","z":"67c7041b.7dfd5c","name":"hiductpress 0","topic":"hiductpress","payload":"0","payloadType":"num","repeat":"","crontab":"","once":false,"x":1538.9999656677246,"y":236.66659927368164,"wires":[["a4035d80.578cc"]]},{"id":"261e20bc.7ed9b","type":"debug","z":"67c7041b.7dfd5c","name":"","active":false,"console":"false","complete":"false","x":1311.7310028076172,"y":1308.9204502105713,"wires":[]},{"id":"5c0f1960.a1d8e8","type":"debug","z":"67c7041b.7dfd5c","name":"","active":false,"console":"false","complete":"false","x":1309.7281341552734,"y":1364.9147129058838,"wires":[]},{"id":"6b4f8e12.dfd55","type":"function","z":"67c7041b.7dfd5c","name":"set warnDirt alarm","func":"if (global.get('tune')===0 && global.get('blwr')===2 && \n    global.get('filter_pressure')>= global.get('oldFilt')) \n    {global.set('warnDirt',1);}\nelse {global.set('warnDirt',0);}\nreturn;\n","outputs":1,"noerr":0,"x":1233.8236236572266,"y":547.0620183944702,"wires":[[]]},{"id":"4d8fb487.15c18c","type":"function","z":"67c7041b.7dfd5c","name":"set warnPlo alarm","func":"if (global.get('tune')===0 && global.get('blwr')===2 && \n    global.get('actPres')<= global.get('oldPlo')) \n    {global.set('warnPlo',1);}\nelse {global.set('warnPlo',0);}\nreturn;\n","outputs":1,"noerr":0,"x":1230.7880554199219,"y":500.49053859710693,"wires":[[]]},{"id":"73f79f24.e5782","type":"function","z":"67c7041b.7dfd5c","name":"set warn_timedout","func":"if (global.get('tune')===1 && global.get('timedout')===1) \n    {global.set('warn_timedout',1);}\nelse {global.set('warn_timedout',0);}\nreturn;\n","outputs":1,"noerr":0,"x":1235.7880325317383,"y":599.4903788566589,"wires":[[]]},{"id":"4d97323b.887dcc","type":"function","z":"67c7041b.7dfd5c","name":"alarm only check","func":"if (global.get ('alarmonly_check') ===1) { \nmsg.payload = 1;\nreturn msg;} \nelse\nmsg.payload = 0;\nreturn msg;\n","outputs":1,"noerr":0,"x":846.4237518310547,"y":411.0358896255493,"wires":[["186fc884.e3d887"]]},{"id":"186fc884.e3d887","type":"switch","z":"67c7041b.7dfd5c","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"0","vt":"num"},{"t":"eq","v":"1","vt":"num"}],"checkall":"true","outputs":2,"x":1008.4243469238281,"y":412.03596210479736,"wires":[["741623aa.1db5fc","416622ca.049c8c","e184400.37071c","8fde2f5b.a33b6"],["bf3c3d7f.33aba","4d8fb487.15c18c","73f79f24.e5782","6b4f8e12.dfd55"]]},{"id":"e184400.37071c","type":"function","z":"67c7041b.7dfd5c","name":"set global alarms","func":"if (global.get('tune')===0 && global.get('blwr')===2 && \n    global.get('actPres')>= global.get('oldPhi')) {\n    global.set('permPhi',1);\n    msg.payload = global.get('permPhi');\nmsg.topic = 'permPhi';\nreturn msg;}\nelse\nif (global.get('tune')===0 && global.get('blwr')===2 && \n    global.get('actPres')<= global.get('oldPlo')) {\n    global.set('permPlo',1);\n    msg.payload = global.get('permPlo');\nmsg.topic = 'permPlo';\nreturn msg;}\nelse\nif (global.get('tune')===0 && global.get('blwr')===2 && \n    global.get('filter_pressure')>= global.get('oldFilt')) {\n    global.set('permDirt',1);\n    msg.payload = global.get('permDirt');\nmsg.topic = 'permDirt';\nreturn msg;}\nelse\nif (global.get('tune')===1 && global.get('timedout')===1) {\n    global.set('timedout_alarm',1);\n    msg.payload = global.get('timedout_alarm');\nmsg.topic = 'timedout_alarm';\nreturn msg;}\n\nreturn;","outputs":1,"noerr":0,"x":1599.6060485839844,"y":329.9451160430908,"wires":[[]]},{"id":"494d37e1.0e57e8","type":"function","z":"67c7041b.7dfd5c","name":"set permPhi alarm","func":"global.set('permPhi',msg.payload);\nreturn;","outputs":1,"noerr":0,"x":373.15152740478516,"y":189.672345161438,"wires":[[]]},{"id":"e68b20ce.353f8","type":"function","z":"67c7041b.7dfd5c","name":"set permPlo alarm","func":"global.set('permPlo',msg.payload);\nreturn;","outputs":1,"noerr":0,"x":376.10623931884766,"y":259.54384899139404,"wires":[[]]},{"id":"c2ca344a.e27b28","type":"function","z":"67c7041b.7dfd5c","name":"set permDirt alarm","func":"global.set('permDirt',msg.payload);\nreturn;","outputs":1,"noerr":0,"x":377.1062469482422,"y":305.54382514953613,"wires":[[]]},{"id":"d7dc1dff.f7697","type":"function","z":"67c7041b.7dfd5c","name":"set timedout_alarm","func":"global.set('timedout_alarm',msg.payload);\nreturn;","outputs":1,"noerr":0,"x":376.10645294189453,"y":362.54372692108154,"wires":[[]]},{"id":"e09df689.198c18","type":"inject","z":"67c7041b.7dfd5c","name":"ALRM 0","topic":"","payload":"0","payloadType":"num","repeat":"","crontab":"","once":false,"x":170.42424774169922,"y":176.67235469818115,"wires":[["494d37e1.0e57e8"]]},{"id":"f5db5db4.440dc","type":"inject","z":"67c7041b.7dfd5c","name":"ALRM 1","topic":"","payload":"1","payloadType":"num","repeat":"","crontab":"","once":false,"x":173.75762176513672,"y":209.00571060180664,"wires":[["494d37e1.0e57e8"]]},{"id":"7f045edf.9fd19","type":"inject","z":"67c7041b.7dfd5c","name":"ALRM 0","topic":"","payload":"0","payloadType":"num","repeat":"","crontab":"","once":false,"x":170.42425537109375,"y":245.67236232757568,"wires":[["e68b20ce.353f8"]]},{"id":"a9d361c2.4c201","type":"inject","z":"67c7041b.7dfd5c","name":"ALRM 1","topic":"","payload":"1","payloadType":"num","repeat":"","crontab":"","once":false,"x":174.75762939453125,"y":277.00573348999023,"wires":[["e68b20ce.353f8"]]},{"id":"40c2f429.52ff4c","type":"inject","z":"67c7041b.7dfd5c","name":"ALRM 0","topic":"","payload":"0","payloadType":"num","repeat":"","crontab":"","once":false,"x":163.42424774169922,"y":310.6666946411133,"wires":[["c2ca344a.e27b28"]]},{"id":"91265bff.3aa4a8","type":"inject","z":"67c7041b.7dfd5c","name":"ALRM 1","topic":"","payload":"1","payloadType":"num","repeat":"","crontab":"","once":false,"x":163.75762557983398,"y":342.0000352859497,"wires":[["c2ca344a.e27b28"]]},{"id":"1e856e19.e6d232","type":"inject","z":"67c7041b.7dfd5c","name":"ALRM 0","topic":"","payload":"0","payloadType":"num","repeat":"","crontab":"","once":false,"x":161.4100456237793,"y":373.6723461151123,"wires":[["d7dc1dff.f7697"]]},{"id":"b3456833.4ef748","type":"inject","z":"67c7041b.7dfd5c","name":"ALRM 1","topic":"","payload":"1","payloadType":"num","repeat":"","crontab":"","once":false,"x":162.7434196472168,"y":401.0057020187378,"wires":[["d7dc1dff.f7697"]]},{"id":"55578b71.cc0fe4","type":"function","z":"67c7041b.7dfd5c","name":"global get afterfilter_check","func":"if (global.get ('afterfilter_check') ===1) {\nmsg.payload = 1;\nreturn msg;\n} else\nmsg.payload = 0;\nreturn msg;\n","outputs":1,"noerr":0,"x":640.3333282470703,"y":1507.9999767541885,"wires":[["62496091.18e03"]]},{"id":"38357951.3d60d6","type":"switch","z":"67c7041b.7dfd5c","name":"switch","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"num"},{"t":"eq","v":"0","vt":"num"}],"checkall":"true","outputs":2,"x":960.0515632629395,"y":1508.9619718790054,"wires":[["f26c3d6.2ec36c"],["dd95dc72.408cd"]]},{"id":"f26c3d6.2ec36c","type":"function","z":"67c7041b.7dfd5c","name":"global set setDirt","func":"var setDirt = global.set('setDirt', 3);\nreturn;","outputs":1,"noerr":0,"x":1171.7676467895508,"y":1490.8585869073868,"wires":[[]]},{"id":"3710eb41.ce8744","type":"comment","z":"67c7041b.7dfd5c","name":"Adjust for afterfilter","info":"","x":1076.521385192871,"y":1441.5261055231094,"wires":[]},{"id":"dd95dc72.408cd","type":"function","z":"67c7041b.7dfd5c","name":"global set setDirt","func":"var setDirt = global.set('setDirt', 0.75);\nreturn;","outputs":1,"noerr":0,"x":1166.0563888549805,"y":1534.5858479738235,"wires":[[]]},{"id":"78f26963.c50868","type":"inject","z":"67c7041b.7dfd5c","name":"ONCE A SEC PULSE","topic":"","payload":"ddd","payloadType":"str","repeat":"1","crontab":"","once":true,"x":360.33331298828125,"y":1519.666626572609,"wires":[["55578b71.cc0fe4"]]},{"id":"62496091.18e03","type":"rbe","z":"67c7041b.7dfd5c","name":"","func":"rbe","gap":"","start":"","inout":"out","x":841.166690826416,"y":1531.3332296609879,"wires":[["38357951.3d60d6"]]},{"id":"1e904c0e.116134","type":"function","z":"7e2731d1.dcc1a","name":"Input 2: X2","func":"msg.payload = msg.payload[0];\nreturn msg;","outputs":1,"noerr":0,"x":517,"y":270.3809461593628,"wires":[["3cd90b51.86aea4"]]},{"id":"cdc78c7a.e42de","type":"function","z":"7e2731d1.dcc1a","name":"Input 1: X1","func":"msg.payload = msg.payload[0];\nreturn msg;\n\n","outputs":1,"noerr":0,"x":527.7262992858887,"y":188.97619915008545,"wires":[["5d0d2126.072fe","15c418ee.461c37"]]},{"id":"532422c4.bda1bc","type":"comment","z":"7e2731d1.dcc1a","name":"*** Read Modbus Settings ","info":"Global Network Settings\nIP: 169.254.119.60\nMask: 255.255.255.0\nGlobal IP: 169.254.255.255\n\nControl Network Settings\nIP: 169.254.119.10\nMask: 255.255.255.0\nGlobal IP: 169.254.119.1\n\nNode Red Modbus TCP Settings\nIP: 169.254.119.10\nPort: 502\nUnit: 1\n\n\n**Make sure Control Network Settings IP and Node Red Modbus IP address match***\n**Must have Static IP address for Modbus TCP/IP to work properly***\n\n\n\n","x":648.5238952636719,"y":137,"wires":[]},{"id":"aa95d23f.87789","type":"comment","z":"7e2731d1.dcc1a","name":"Inputs Read Only","info":"","x":265.85721588134766,"y":161.6666669845581,"wires":[]},{"id":"c58108e2.fd8688","type":"function","z":"7e2731d1.dcc1a","name":"float","func":"global.set ('flt', msg.payload);\n//if (global.get ('step2')===1) {global.set('flt', 0);}\nreturn msg;","outputs":1,"noerr":0,"x":994.7580146789551,"y":195.93651485443115,"wires":[[]]},{"id":"b37b7f32.106cd","type":"function","z":"7e2731d1.dcc1a","name":"phase","func":"if (global.get ('phase_check')===0) {global.set('phase', 1);\nreturn msg;}\nelse global.set ('phase', msg.payload); \nreturn msg;","outputs":1,"noerr":0,"x":976.603141784668,"y":276.0793170928955,"wires":[[]]},{"id":"5d0d2126.072fe","type":"change","z":"7e2731d1.dcc1a","name":"","rules":[{"t":"change","p":"payload","pt":"msg","from":"true","fromt":"bool","to":"1","tot":"num"},{"t":"change","p":"payload","pt":"msg","from":"false","fromt":"bool","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":767.460376739502,"y":193.17461395263672,"wires":[["c58108e2.fd8688"]]},{"id":"3cd90b51.86aea4","type":"change","z":"7e2731d1.dcc1a","name":"","rules":[{"t":"change","p":"payload","pt":"msg","from":"true","fromt":"bool","to":"1","tot":"num"},{"t":"change","p":"payload","pt":"msg","from":"false","fromt":"bool","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":763.9364814758301,"y":270.6508102416992,"wires":[["b37b7f32.106cd"]]},{"id":"95707ac.68ed188","type":"comment","z":"7e2731d1.dcc1a","name":"demo mode modification","info":"comment out line 2 for normal operation","x":1037.4999542236328,"y":236.70237636566162,"wires":[]},{"id":"312e173.48028e8","type":"modbus-read","z":"7e2731d1.dcc1a","name":"Float Switch INPUT 1","showStatusActivities":false,"unitid":"","dataType":"Input","adr":"1","quantity":"1","rate":"3","rateUnit":"s","server":"86b9619.dbcd1a","x":249.73182678222656,"y":207.2507438659668,"wires":[["cdc78c7a.e42de"],[]]},{"id":"6db6ff11.879e5","type":"modbus-read","z":"7e2731d1.dcc1a","name":"PHASE RELAY INPUT 2","showStatusActivities":false,"unitid":"","dataType":"Input","adr":"0","quantity":"1","rate":"3","rateUnit":"s","server":"86b9619.dbcd1a","x":252.93346623011985,"y":279.0602716718401,"wires":[["1e904c0e.116134"],[]]},{"id":"15c418ee.461c37","type":"debug","z":"7e2731d1.dcc1a","name":"","active":false,"console":"false","complete":"false","x":937.8810119628906,"y":138.41741943359375,"wires":[]},{"id":"ed5aa78d.971828","type":"comment","z":"7e2731d1.dcc1a","name":"Output Read/Write ","info":"","x":1183.8476066589355,"y":870.6901750564575,"wires":[]},{"id":"5d1e3b2f.c9c794","type":"function","z":"7e2731d1.dcc1a","name":"global get blwr","func":"if (global.get ('blwr') <= 2 && \nglobal.get ('blwr') >0) {\nmsg.payload = 1;\nreturn msg;\n} else\nmsg.payload = 0;\nreturn msg;","outputs":1,"noerr":0,"x":571.1653251647949,"y":1212.055338042123,"wires":[["2ad13734.60a198"]]},{"id":"e15de89c.e55b88","type":"inject","z":"7e2731d1.dcc1a","name":"Inject once at start","topic":"","payload":"","payloadType":"num","repeat":"","crontab":"","once":true,"x":255.96287155151367,"y":952.6505528858729,"wires":[["7c941bb5.8fa094"]]},{"id":"2ad13734.60a198","type":"switch","z":"7e2731d1.dcc1a","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"num"},{"t":"eq","v":"0","vt":"num"}],"checkall":"true","outputs":2,"x":757.9271659851074,"y":1212.5790807179042,"wires":[["2d7532c8.add42e"],["2d7532c8.add42e","3b204426.92501c"]]},{"id":"2d7532c8.add42e","type":"rbe","z":"7e2731d1.dcc1a","name":"","func":"rbe","gap":"","start":"","inout":"out","x":993.7365989685059,"y":1268.483853340149,"wires":[["3b204426.92501c"]]},{"id":"6d7963d3.54ee3c","type":"function","z":"7e2731d1.dcc1a","name":"global get blwr","func":"if (global.get ('blwr') === 2 ) {\nmsg.payload = 1;\nreturn msg;\n} else\nmsg.payload = 0;\nreturn msg;","outputs":1,"noerr":0,"x":755.7367362976074,"y":1073.0552770069667,"wires":[["3c6a1434.bea49c"]]},{"id":"3c6a1434.bea49c","type":"switch","z":"7e2731d1.dcc1a","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"num"},{"t":"eq","v":"0","vt":"num"}],"checkall":"true","outputs":2,"x":950.3081474304199,"y":1098.9126378468104,"wires":[["d48ffc03.bc2f8"],["d48ffc03.bc2f8","20abf81b.fa8998"]]},{"id":"d48ffc03.bc2f8","type":"rbe","z":"7e2731d1.dcc1a","name":"","func":"rbe","gap":"","start":"","inout":"out","x":1025.02250289917,"y":1167.4839879444667,"wires":[["20abf81b.fa8998"]]},{"id":"a274f7ed.e9e048","type":"function","z":"7e2731d1.dcc1a","name":"global get ballvalve","func":"if (global.get ('ballvalve') == 1 ) {\nmsg.payload = 1;\nreturn msg;\n} else\nmsg.payload = 0;\nreturn msg;","outputs":1,"noerr":0,"x":773.1653251647949,"y":1023.0553380421229,"wires":[["a031f9de.973608"]]},{"id":"a031f9de.973608","type":"switch","z":"7e2731d1.dcc1a","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"num"},{"t":"eq","v":"0","vt":"num"}],"checkall":"true","outputs":2,"x":948.7841377258301,"y":1029.960153715951,"wires":[["bd1f82bd.52903"],["f0f3d5df.4ba708"]]},{"id":"f1832226.2dd9c","type":"trigger","z":"7e2731d1.dcc1a","op1":"","op2":"ddd","op1type":"nul","op2type":"str","duration":"1","extend":false,"units":"s","reset":"99","name":"","x":351.1653251647949,"y":1134.3767491749354,"wires":[["5b2cb61a.4ad1e8","5d1e3b2f.c9c794","d309b387.6d882","90f96de9.1545d"]]},{"id":"7c941bb5.8fa094","type":"delay","z":"7e2731d1.dcc1a","name":"","pauseType":"delay","timeout":"10","timeoutUnits":"seconds","rate":"1","nbRateUnits":"","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":333.9867362976074,"y":1075.1624547413417,"wires":[["f1832226.2dd9c"]]},{"id":"5b2cb61a.4ad1e8","type":"delay","z":"7e2731d1.dcc1a","name":"","pauseType":"delay","timeout":"500","timeoutUnits":"milliseconds","rate":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":337.2367362976074,"y":1232.662515776498,"wires":[["f1832226.2dd9c"]]},{"id":"bd1f82bd.52903","type":"trigger","z":"7e2731d1.dcc1a","op1":"1","op2":"0","op1type":"num","op2type":"num","duration":"3","extend":true,"units":"s","reset":"99","name":"valve off delay","x":940.069751739502,"y":978.340874671936,"wires":[["f0f3d5df.4ba708"]]},{"id":"f0f3d5df.4ba708","type":"modbus-write","z":"7e2731d1.dcc1a","name":"Water Valve: Y3","showStatusActivities":false,"unitid":"","dataType":"HoldingRegister","adr":"2","quantity":"1","server":"86b9619.dbcd1a","x":1269.8477363586426,"y":952.9758836201258,"wires":[["6720e754.617ba8"],["6720e754.617ba8"]]},{"id":"20abf81b.fa8998","type":"modbus-write","z":"7e2731d1.dcc1a","name":"Aux Relay: Y2","showStatusActivities":false,"unitid":"","dataType":"HoldingRegister","adr":"1","quantity":"1","server":"86b9619.dbcd1a","x":1210.466812133789,"y":1060.2140684127808,"wires":[[],[]]},{"id":"3b204426.92501c","type":"modbus-write","z":"7e2731d1.dcc1a","name":"Motor  Y1 ","showStatusActivities":false,"unitid":"","dataType":"HoldingRegister","adr":"0","quantity":"1","server":"86b9619.dbcd1a","x":1217.65726852417,"y":1213.118814604623,"wires":[[],[]]},{"id":"d309b387.6d882","type":"function","z":"7e2731d1.dcc1a","name":"global get test or  demo mode","func":"if (global.get ('test_mode') ===1) { \nmsg.payload = 1;\nreturn msg;} \nelse\nif (global.get ('demo_mode')===1) {\nmsg.payload = 1;\nreturn msg;}\nelse\nmsg.payload = 0;\nreturn msg;\n","outputs":1,"noerr":0,"x":577.3240165710449,"y":1112.6426183155604,"wires":[["fef888d2.671718"]]},{"id":"fef888d2.671718","type":"switch","z":"7e2731d1.dcc1a","name":"switch","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"num"},{"t":"eq","v":"0","vt":"num"}],"checkall":"true","outputs":2,"x":495.4192924499512,"y":1034.1880895069667,"wires":[[],["a274f7ed.e9e048","6d7963d3.54ee3c"]]},{"id":"26e0360b.6879ca","type":"inject","z":"7e2731d1.dcc1a","name":"","topic":"","payload":"0","payloadType":"num","repeat":"","crontab":"","once":false,"x":993.1810626983643,"y":933.0234746932983,"wires":[["f0f3d5df.4ba708"]]},{"id":"70aef4a2.e30a3c","type":"inject","z":"7e2731d1.dcc1a","name":"","topic":"","payload":"1","payloadType":"num","repeat":"","crontab":"","once":false,"x":1013.0856857299805,"y":853.3091449737549,"wires":[["20abf81b.fa8998"]]},{"id":"8ded2f74.a9bb6","type":"inject","z":"7e2731d1.dcc1a","name":"","topic":"","payload":"0","payloadType":"num","repeat":"","crontab":"","once":false,"x":1049.133388519287,"y":813.1663398742676,"wires":[["20abf81b.fa8998"]]},{"id":"4a831f52.ee612","type":"inject","z":"7e2731d1.dcc1a","name":"","topic":"","payload":"1","payloadType":"num","repeat":"","crontab":"","once":false,"x":989.1810455322266,"y":898.3570261001587,"wires":[["f0f3d5df.4ba708"]]},{"id":"b83b44d.1dd8db8","type":"debug","z":"7e2731d1.dcc1a","name":"Replace with Conveyor Output","active":true,"console":"false","complete":"payload","x":1431.8240013122559,"y":1386.2743196487427,"wires":[]},{"id":"90f96de9.1545d","type":"function","z":"7e2731d1.dcc1a","name":"global get conveyor_check","func":"if (global.get ('conveyor_check') ===1) {\nmsg.payload = 1;\nreturn msg;\n} else\nmsg.payload = 0;\nreturn msg;\n","outputs":1,"noerr":0,"x":613.3240013122559,"y":1291.2743196487427,"wires":[["44d0227f.dc596c"]]},{"id":"44d0227f.dc596c","type":"switch","z":"7e2731d1.dcc1a","name":"switch","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"num"},{"t":"eq","v":"0","vt":"num"}],"checkall":"true","outputs":2,"x":687.8478050231934,"y":1363.8197298049927,"wires":[["e264bd7e.59d51"],[]]},{"id":"69acd372.d764fc","type":"switch","z":"7e2731d1.dcc1a","name":"switch","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"num"},{"t":"eq","v":"0","vt":"num"}],"checkall":"true","outputs":2,"x":1029.8478050231934,"y":1425.8197298049927,"wires":[["92485ae3.6f2fc8"],["92485ae3.6f2fc8"]]},{"id":"92485ae3.6f2fc8","type":"rbe","z":"7e2731d1.dcc1a","name":"","func":"rbe","gap":"","start":"","inout":"out","x":1194.3240013122559,"y":1353.2743196487427,"wires":[["b83b44d.1dd8db8","908fab86.6ae128"]]},{"id":"e264bd7e.59d51","type":"function","z":"7e2731d1.dcc1a","name":"global get conveyor","func":"if (global.get ('conveyor') == 1 ) {\nmsg.payload = 1;\nreturn msg;\n} else\nmsg.payload = 0;\nreturn msg;","outputs":1,"noerr":0,"x":863.3240013122559,"y":1373.2743196487427,"wires":[["69acd372.d764fc"]]},{"id":"908fab86.6ae128","type":"modbus-write","z":"7e2731d1.dcc1a","name":"Conveyor","showStatusActivities":false,"unitid":"","dataType":"HoldingRegister","adr":"4","quantity":"1","server":"86b9619.dbcd1a","x":1391.3240013122559,"y":1323.2743196487427,"wires":[[],[]]},{"id":"564718ba.874278","type":"function","z":"7e2731d1.dcc1a","name":"custom function","func":"// declare place holder variables\nvar originalval1 = msg.payload;\nvar varps1 = \"\";\n\n\n// convert string of originalval to float with 1 decimal place\n// run originalval thru a simple minus operation to form the 'temp' number\nvarps1 = parseFloat(originalval1).toFixed(2);\n\n// output the originalval after deduction \nmsg.payload = varps1;\n\n\nreturn msg;","outputs":1,"noerr":0,"x":1258.86177444458,"y":396.6371159553528,"wires":[["e391d4d2.e1c518"]]},{"id":"2464094b.0aa1c6","type":"function","z":"7e2731d1.dcc1a","name":"custom function","func":"// declare place holder variables\nvar originalval2 = msg.payload;\nvar varps2 = \"\";\n\n\n// convert string of originalval to float with 1 decimal place\n// run originalval thru a simple minus operation to form the 'temp' number\nvarps2 = parseFloat(originalval2).toFixed(2);\n\n// output the originalval after deduction \nmsg.payload = varps2;\n\n\nreturn msg;","outputs":1,"noerr":0,"x":1269.2428665161133,"y":489.86327362060547,"wires":[["800ab412.024ba8"]]},{"id":"75a1252f.81b96c","type":"comment","z":"7e2731d1.dcc1a","name":"Analog Read Only","info":"","x":289.433349609375,"y":394.67285919189453,"wires":[]},{"id":"e391d4d2.e1c518","type":"function","z":"7e2731d1.dcc1a","name":"actFilt","func":"global.set ('actFilt', msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":1417.4651527404785,"y":406.1331515312195,"wires":[["41104ec4.9e8b1"]]},{"id":"800ab412.024ba8","type":"function","z":"7e2731d1.dcc1a","name":"tempPres","func":"global.set ('tempPres', msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":1436.1316604614258,"y":490.8474588394165,"wires":[["c1e09e31.a9001"]]},{"id":"94b1c802.b59ff8","type":"exec","z":"7e2731d1.dcc1a","command":"sudo i2cget -y 1 0x69 0x18 w","addpay":true,"append":"","useSpawn":"","timer":"","name":"Analog 1","x":566.0524024963379,"y":422.5664701461792,"wires":[["e62205e1.e4fb68","d4057411.c59f48"],[],[]]},{"id":"c5e30557.0f1478","type":"exec","z":"7e2731d1.dcc1a","command":"sudo i2cget -y 1 0x69 0x16 w","addpay":true,"append":"","useSpawn":"","timer":"","name":"Analog 2","x":552.3856964111328,"y":502.06647777557373,"wires":[["591b0a11.effaf4","75da7980.51caf8"],[],[]]},{"id":"5412bac2.aab4d4","type":"inject","z":"7e2731d1.dcc1a","name":"Start ","topic":"","payload":"","payloadType":"num","repeat":"1","crontab":"","once":true,"x":204.71903228759766,"y":525.0664567947388,"wires":[["45e3c56b.45008c","94b1c802.b59ff8","cabd4694.e58498"]]},{"id":"cabd4694.e58498","type":"trigger","z":"7e2731d1.dcc1a","op1":"","op2":"0","op1type":"nul","op2type":"str","duration":".5","extend":false,"units":"s","reset":"","name":"","x":368.71907806396484,"y":557.1140661239624,"wires":[["c5e30557.0f1478"]]},{"id":"d44c6eaf.3a578","type":"range","z":"7e2731d1.dcc1a","minin":"0x000","maxin":"0x0520","minout":"0","maxout":"15.00","action":"scale","round":false,"name":"IMPINGER PRESS","x":907.0047149658203,"y":409.87606716156006,"wires":[["45a20985.0cabd8","b4cb93ad.76c4f","a57eafef.9f794"]]},{"id":"9531f927.9ee0e8","type":"range","z":"7e2731d1.dcc1a","minin":"0x000","maxin":"0x0520","minout":"0.00","maxout":"15.00","action":"scale","round":false,"name":"FAN PRESS","x":936.6833152770996,"y":498.0545139312744,"wires":[["6589d850.720048","6617bd30.51fad4","d5f693ff.6f15a"]]},{"id":"e62205e1.e4fb68","type":"change","z":"7e2731d1.dcc1a","name":"newMsgPS1","rules":[{"t":"set","p":"topic","pt":"msg","to":"newMsgPS1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":736.1356735229492,"y":454.5434522628784,"wires":[["d44c6eaf.3a578"]]},{"id":"591b0a11.effaf4","type":"change","z":"7e2731d1.dcc1a","name":"newMsgPS2","rules":[{"t":"set","p":"topic","pt":"msg","to":"newMsgPS2","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":787.2189102172852,"y":535.9838972091675,"wires":[["9531f927.9ee0e8"]]},{"id":"45e3c56b.45008c","type":"function","z":"7e2731d1.dcc1a","name":"ducted check","func":"if (global.get ('ducted_check') ===1) { \nmsg.payload = 1;\nreturn msg;} \nelse\nmsg.payload = 0;\nreturn msg;\n","outputs":1,"noerr":0,"x":272.12379455566406,"y":696.5425786972046,"wires":[["b744195c.3106c8"]]},{"id":"b744195c.3106c8","type":"switch","z":"7e2731d1.dcc1a","name":"switch","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"0","vt":"num"},{"t":"eq","v":"1","vt":"num"}],"checkall":"true","outputs":2,"x":464.80237579345703,"y":695.5307493209839,"wires":[[],["f989b904.42af78"]]},{"id":"f989b904.42af78","type":"trigger","z":"7e2731d1.dcc1a","op1":"","op2":"0","op1type":"nul","op2type":"str","duration":"1.5","extend":false,"units":"s","reset":"","name":"","x":513.9689292907715,"y":770.1140623092651,"wires":[["2b303bd1.0a3674"]]},{"id":"2b303bd1.0a3674","type":"exec","z":"7e2731d1.dcc1a","command":"sudo i2cget -y 1 0x69 0x14 w","addpay":true,"append":"","useSpawn":"","timer":"","name":"Analog 3","x":699.3856315612793,"y":765.1139287948608,"wires":[["7ba0d66b.490c18"],[],[]]},{"id":"7ba0d66b.490c18","type":"change","z":"7e2731d1.dcc1a","name":"newMsgPS3","rules":[{"t":"set","p":"topic","pt":"msg","to":"newMsgPS3","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":859.3856811523438,"y":791.3639659881592,"wires":[["a3cb456d.093e08"]]},{"id":"a3cb456d.093e08","type":"range","z":"7e2731d1.dcc1a","minin":"0x000","maxin":"0x0520","minout":"0.00","maxout":"15.00","action":"scale","round":false,"name":"DUCT PRESS","x":995.5167007446289,"y":743.4345808029175,"wires":[["cd99b48b.4866a8","9fb3ca12.085c98","50b181c0.0bdfd","f178ce68.4f0e"]]},{"id":"51665d5d.c95354","type":"function","z":"7e2731d1.dcc1a","name":"custom function","func":"// declare place holder variables\nvar originalval3 = msg.payload;\nvar varps3 = \"\";\n\n\n// convert string of originalval to float with 1 decimal place\n// run originalval thru a simple minus operation to form the 'temp' number\nvarps3 = parseFloat(originalval3).toFixed(2);\n\n// output the originalval after deduction \nmsg.payload = varps3;\n\n\nreturn msg;","outputs":1,"noerr":0,"x":1278.0762939453125,"y":731.9099588394165,"wires":[["432c5ed5.f2d49"]]},{"id":"432c5ed5.f2d49","type":"function","z":"7e2731d1.dcc1a","name":"ductPres","func":"global.set ('ductPres', msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":1438.0601196289062,"y":720.9895105361938,"wires":[["9812924d.ed2b9"]]},{"id":"f8491bee.872a38","type":"comment","z":"7e2731d1.dcc1a","name":"Enable 3rd Pressure if Ducted Unit","info":"","x":385.2190399169922,"y":646.7807626724243,"wires":[]},{"id":"efb0d6d.6c04f28","type":"comment","z":"7e2731d1.dcc1a","name":"If ducted, scrubber is difference of actPres and ductPres","info":"","x":803.8603363037109,"y":663.2012147903442,"wires":[]},{"id":"cd99b48b.4866a8","type":"debug","z":"7e2731d1.dcc1a","name":"","active":false,"console":"false","complete":"false","x":892.1269226074219,"y":596.610595703125,"wires":[]},{"id":"9812924d.ed2b9","type":"debug","z":"7e2731d1.dcc1a","name":"","active":false,"console":"false","complete":"false","x":1590.5814056396484,"y":681.6049041748047,"wires":[]},{"id":"d4057411.c59f48","type":"debug","z":"7e2731d1.dcc1a","name":"","active":false,"console":"false","complete":"false","x":860.1667175292969,"y":319.41741943359375,"wires":[]},{"id":"75da7980.51caf8","type":"debug","z":"7e2731d1.dcc1a","name":"","active":false,"console":"false","complete":"false","x":907.1667175292969,"y":461.41741943359375,"wires":[]},{"id":"41104ec4.9e8b1","type":"debug","z":"7e2731d1.dcc1a","name":"#1 Purple","active":false,"console":"false","complete":"payload","x":1568.3939056396484,"y":391.06512451171875,"wires":[]},{"id":"c1e09e31.a9001","type":"debug","z":"7e2731d1.dcc1a","name":"#2 Green","active":false,"console":"false","complete":"payload","x":1611.391098022461,"y":472.0594482421875,"wires":[]},{"id":"45a20985.0cabd8","type":"debug","z":"7e2731d1.dcc1a","name":"","active":false,"console":"false","complete":"false","x":1078.5,"y":348,"wires":[]},{"id":"6589d850.720048","type":"debug","z":"7e2731d1.dcc1a","name":"","active":false,"console":"false","complete":"false","x":1143.4998931884766,"y":574.249997138977,"wires":[]},{"id":"260d8216.f9e43e","type":"inject","z":"7e2731d1.dcc1a","name":"","topic":"","payload":"xxx","payloadType":"str","repeat":"","crontab":"","once":false,"x":174.71429061889648,"y":831.2857151031494,"wires":[["5b5994eb.32f93c"]]},{"id":"5b5994eb.32f93c","type":"function","z":"7e2731d1.dcc1a","name":"","func":"msg.payload = global.get('rsrtest');\nreturn msg;","outputs":1,"noerr":0,"x":288.2142791748047,"y":883.7857112884521,"wires":[["2dee37eb.119a98"]]},{"id":"2dee37eb.119a98","type":"switch","z":"7e2731d1.dcc1a","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"num"},{"t":"eq","v":"0","vt":"num"}],"checkall":"true","outputs":2,"x":434.46428871154785,"y":888.7857074737549,"wires":[["ed5c37ee.d93c08"],[]]},{"id":"ed5c37ee.d93c08","type":"trigger","z":"7e2731d1.dcc1a","op1":"0","op2":"1","op1type":"num","op2type":"num","duration":"1","extend":false,"units":"s","reset":"","name":"","x":582.5357055664062,"y":889.2857103347778,"wires":[[]]},{"id":"6720e754.617ba8","type":"debug","z":"7e2731d1.dcc1a","name":"","active":false,"console":"false","complete":"false","x":1522.1427612304688,"y":974.142876625061,"wires":[]},{"id":"ee8aff25.f12cd","type":"comment","z":"7e2731d1.dcc1a","name":"test cycle","info":"","x":331.51133728027344,"y":837.9289321899414,"wires":[]},{"id":"b4cb93ad.76c4f","type":"function","z":"7e2731d1.dcc1a","name":"afterfilter/impinger calibration","func":"var x1 = msg.payload;\nvar y1 = \"\";\nif (global.get('filt_slope')>0){\nvar y1 = (global.get('filt_slope')* x1) - (global.get('filt_offset'));}\nelse var y1 = x1;\nmsg.payload = y1;\nreturn msg;\n","outputs":1,"noerr":0,"x":1150.5293884277344,"y":440.0359878540039,"wires":[["bebb2fc3.cfe5a","564718ba.874278"]]},{"id":"bebb2fc3.cfe5a","type":"debug","z":"7e2731d1.dcc1a","name":"","active":false,"console":"false","complete":"false","x":1419.9568557739258,"y":444.88465642929077,"wires":[]},{"id":"6617bd30.51fad4","type":"function","z":"7e2731d1.dcc1a","name":"scrubber calibration","func":"var x2 = msg.payload;\nvar y2 = \"\";\nif (global.get('scrub_slope')>0){\nvar y2 = (global.get('scrub_slope')* x2) -(global.get('scrub_offset'));}\nelse var y2 = x2;\nmsg.payload = y2;\nreturn msg;\n","outputs":1,"noerr":0,"x":1176.8282012939453,"y":540.3782548904419,"wires":[["2464094b.0aa1c6","cfad8472.52f418"]]},{"id":"9fb3ca12.085c98","type":"function","z":"7e2731d1.dcc1a","name":"duct calibration","func":"var x3 = msg.payload;\nvar y3 = \"\";\nif (global.get('duct_slope')>0){\nvar y3 = (global.get('duct_slope')* x3) -(global.get('duct_offset'));}\nelse var y3 = x3;\nmsg.payload = y3;\nreturn msg;\n","outputs":1,"noerr":0,"x":1199.3283081054688,"y":776.855546951294,"wires":[["51665d5d.c95354","3301e00f.4d0cb"]]},{"id":"3301e00f.4d0cb","type":"debug","z":"7e2731d1.dcc1a","name":"","active":false,"console":"false","complete":"false","x":1388.7033424377441,"y":795.1013240814209,"wires":[]},{"id":"cfad8472.52f418","type":"debug","z":"7e2731d1.dcc1a","name":"","active":false,"console":"false","complete":"false","x":1408.6961708068848,"y":573.865514755249,"wires":[]},{"id":"a57eafef.9f794","type":"function","z":"7e2731d1.dcc1a","name":"rawFilt","func":"global.set ('rawFilt', msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":1089.7142906188965,"y":387,"wires":[[]]},{"id":"d5f693ff.6f15a","type":"function","z":"7e2731d1.dcc1a","name":"rawScrub","func":"global.set ('rawScrub', msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":1101.7142906188965,"y":476,"wires":[[]]},{"id":"50b181c0.0bdfd","type":"function","z":"7e2731d1.dcc1a","name":"rawDuct","func":"global.set ('rawDuct', msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":1194.714427947998,"y":698.999927520752,"wires":[[]]},{"id":"f178ce68.4f0e","type":"debug","z":"7e2731d1.dcc1a","name":"","active":false,"console":"false","complete":"false","x":1192.8677864074707,"y":662.7868947982788,"wires":[]},{"id":"eff6760c.b49df8","type":"vis in","z":"533c797.688ee88","language":"en","x":259,"y":220,"wires":[["7774fa9b.c54a84"]]},{"id":"f2cdd216.9ab71","type":"exec","z":"533c797.688ee88","command":"sudo i2cset -y 1 0x6B 0x0e 1047 w","addpay":false,"append":"","useSpawn":"","timer":"","name":"","x":556,"y":157.5,"wires":[[],[],[]]},{"id":"95e02e28.79a6a","type":"inject","z":"533c797.688ee88","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":true,"x":270,"y":152,"wires":[["f2cdd216.9ab71"]]},{"id":"7774fa9b.c54a84","type":"exec","z":"533c797.688ee88","command":"sudo i2cset -y 1 0x6B 0x10 10","addpay":false,"append":"","useSpawn":"","timer":"","name":"","x":553,"y":218,"wires":[[],[],[]]},{"id":"70350cc0.297964","type":"exec","z":"50ab757c.8c567c","command":"sudo reboot #","addpay":false,"append":"","useSpawn":"","name":"System Reboot","x":762,"y":350,"wires":[[],[],[]]},{"id":"58c50d41.242fb4","type":"switch","z":"50ab757c.8c567c","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"reboot","vt":"str"}],"checkall":"true","outputs":1,"x":564,"y":340.5,"wires":[["70350cc0.297964"]]},{"id":"f673ea5d.5c22c8","type":"exec","z":"50ab757c.8c567c","command":"sudo ifconfig","addpay":true,"append":"","useSpawn":false,"timer":"","name":"ifconfig","x":545,"y":121.5,"wires":[["43232c66.3246f4"],[],[]]},{"id":"8b5731b.89ec1d","type":"inject","z":"50ab757c.8c567c","name":"get ip - eth0","topic":"ip","payload":"eth0","payloadType":"str","repeat":"3","crontab":"","once":true,"x":337,"y":88,"wires":[["f673ea5d.5c22c8"]]},{"id":"43232c66.3246f4","type":"function","z":"50ab757c.8c567c","name":"Extract network config","func":"// Initialize variables\nvar input, tokens, inet, bcast, mask;\nvar outString = \"CASI \\n\";\n\n// Parse the entire string by spaces, and put each item into an array called tokens\n\ninput = msg.payload;\ntokens = input.split(\":\", 10);\n\n// Get the 7th token (example: \"addr:192.168.0.120\")\n// and get the substring from character 6 to the end\ninet = tokens[7].split(\" \", 1);\noutString += \"\\n\" + \"IP Address: \" + inet[0];\n\n// Get the 8th token (example: \"Bcast:192.168.0.255\")\n// and get the substring from character 7 to the end\nbcast = tokens[8].split(\" \", 1);\noutString += \"\\n\" + \"Bcast: \" + bcast[0];\n\n// Get the 9th token (example: \"Mask:255.255.255.0\")\n// and get the substring from character 6 to the end\nmask = tokens[9].split(\" \", 1);\noutString += \"\\n\" + \"Mask: \" + mask[0];\n\n// Don't send a message if the IF is the known default. Change to default ip.\nif (inet==\"192.168.0.120\") { \n//outString = \"\"; // set output to null if ip is the same so no message is sent\nreturn null;\n}else{\n// return the final output\nreturn {payload: outString};\n}\n","outputs":1,"noerr":0,"x":822.2500076293945,"y":143.75000095367432,"wires":[["93aa9d53.e386c"]]},{"id":"93aa9d53.e386c","type":"delay","z":"50ab757c.8c567c","name":"Delay","pauseType":"delay","timeout":"1","timeoutUnits":"seconds","rate":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":428,"y":260.5,"wires":[["a8edef55.1baa"]]},{"id":"a8edef55.1baa","type":"change","z":"50ab757c.8c567c","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"network","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":602,"y":260.5,"wires":[["ca1da920.d0a9c8"]]},{"id":"4cae9073.0b1e7","type":"switch","z":"50ab757c.8c567c","name":"","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"ip","vt":"str"}],"checkall":"true","outputs":1,"x":371,"y":163.5,"wires":[["f673ea5d.5c22c8"]]},{"id":"4d0347f1.ce62c8","type":"inject","z":"50ab757c.8c567c","name":"","topic":"vis.control.data","payload":"{\"val\": \"main/a_home\", \"ack\":true}","payloadType":"json","repeat":"","crontab":"","once":false,"x":209.66667556762695,"y":428.49999618530273,"wires":[["ca1da920.d0a9c8"]]},{"id":"9c5f7dc3.9f02e","type":"debug","z":"50ab757c.8c567c","name":"","active":true,"console":"false","complete":"false","x":643.5,"y":498.75,"wires":[]},{"id":"1aa2f55f.69470b","type":"switch","z":"50ab757c.8c567c","name":"","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"nav","vt":"str"}],"checkall":"true","outputs":1,"x":454,"y":476.5,"wires":[["9c5f7dc3.9f02e"]]},{"id":"bd98da78.61ac38","type":"inject","z":"50ab757c.8c567c","name":"reboot!","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"x":392.6666564941406,"y":602.5,"wires":[["91481a18.357ab8"]]},{"id":"91481a18.357ab8","type":"exec","z":"50ab757c.8c567c","command":"sudo reboot","addpay":false,"append":"","useSpawn":"","timer":"","name":"reboot Pi","x":628.4523811340332,"y":691.8988380432129,"wires":[[],[],[]]},{"id":"cd4d75f9.861fd8","type":"switch","z":"50ab757c.8c567c","name":"reboot","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"reboot","vt":"str"}],"checkall":"true","outputs":1,"x":541.714298248291,"y":548.9286060333252,"wires":[["91481a18.357ab8"]]},{"id":"ca1da920.d0a9c8","type":"vis in","z":"50ab757c.8c567c","language":"en","x":395.8333536783848,"y":356,"wires":[["4cae9073.0b1e7","58c50d41.242fb4","1aa2f55f.69470b","cd4d75f9.861fd8"]]},{"id":"98c1a54e.85d558","type":"inject","z":"50ab757c.8c567c","name":"","topic":"","payload":"","payloadType":"str","repeat":"","crontab":"","once":false,"x":512,"y":202,"wires":[["70350cc0.297964"]]},{"id":"d538724f.b657e","type":"vis in","z":"5abca664.098e18","language":"en","x":223,"y":103.25000095367432,"wires":[["5f37dc74.e707d4"]]},{"id":"5f37dc74.e707d4","type":"switch","z":"5abca664.098e18","name":"","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"press_calibration","vt":"str"}],"checkall":"true","outputs":1,"x":361.77783966064453,"y":105.25000095367432,"wires":[["88a5b3ff.62de4"]]},{"id":"88a5b3ff.62de4","type":"change","z":"5abca664.098e18","name":"begin / cancel","rules":[{"t":"change","p":"payload","pt":"msg","from":"true","fromt":"bool","to":"1","tot":"num"},{"t":"change","p":"payload","pt":"msg","from":"false","fromt":"bool","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":543.9206619262695,"y":107.07144260406494,"wires":[["ccde74d7.db06d8","69e8179.01476e8"]]},{"id":"ccde74d7.db06d8","type":"function","z":"5abca664.098e18","name":"global set pcstep1","func":"if (msg.payload ===0) {global.set('pcstep1', 0 );\n    global.set('pcstep2',0);\n    global.set('pcstep3',0);\n    global.set('pcstep4',0);\n    global.set('pcstep5',0);\n    global.set('pcstep6',0);\n    global.set('blwr', 0);\n    global.set('press_calibration',0);\n}\nif (msg.payload ===1) {global.set('pcstep1', 1);\nglobal.set('press_calibration', 1);\nglobal.set('pcstep7',0);\n}\nreturn;","outputs":1,"noerr":0,"x":781.7777786254883,"y":109.50000095367432,"wires":[[]]},{"id":"62c5fec5.6bb2c","type":"comment","z":"5abca664.098e18","name":"Pressure Inputs Calibration","info":"","x":744.0000228881836,"y":23,"wires":[]},{"id":"e25b2d64.741b","type":"inject","z":"5abca664.098e18","name":"ONCE A SEC PULSE","topic":"","payload":"ddd","payloadType":"str","repeat":"1","crontab":"","once":true,"x":250.00000762939453,"y":259.2500009536743,"wires":[["fc4ceb05.9b2378"]]},{"id":"fc4ceb05.9b2378","type":"function","z":"5abca664.098e18","name":"global get press_calibration","func":"if (global.get ('press_calibration') ===1) {\nmsg.payload = 1;\nreturn msg;\n} else\nmsg.payload = 0;\nreturn msg;\n","outputs":1,"noerr":0,"x":297.00000762939453,"y":392.2500009536743,"wires":[["6e71022.a76cdfc"]]},{"id":"6e71022.a76cdfc","type":"switch","z":"5abca664.098e18","name":"switch","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"num"},{"t":"eq","v":"0","vt":"num"}],"checkall":"true","outputs":2,"x":417.2738265991211,"y":521.5454149246216,"wires":[["75ecd8e0.14b028","d36bb4b7.410158","8babdbd8.58e2c8","8fe8287a.648488","6984941.0c3726c","9c602252.4c48","2458f57.223fc0a","9086361.9dd4ac8","f24b4300.89b9","9b8c02d8.0b222","f23f2864.5505b8","615dfe5d.42cb4","e495899.d0d6d78"],[]]},{"id":"75ecd8e0.14b028","type":"function","z":"5abca664.098e18","name":"step 1","func":"if (global.get ('pcstep1')===1 && global.get('flt')===0) \n{global.set ('blwr', 0); \nglobal.set ('ballvalve',0);\nglobal.set('scrub_offset',0);\nglobal.set('filt_offset',0);\nglobal.set('duct_offset',0);\nglobal.set ('realfiltpress',0);\nglobal.set ('realscrubpress',0);\nglobal.set ('realductpress',0);\nglobal.set ('filt_slope',1);\nglobal.set ('scrub_slope',1);\nglobal.set ('duct_slope',1);\nglobal.set ('pcstep1',2);\nreturn msg;}","outputs":1,"noerr":0,"x":722.0000076293945,"y":273.2500009536743,"wires":[["5d2f8428.1a179c"]]},{"id":"5d2f8428.1a179c","type":"delay","z":"5abca664.098e18","name":"","pauseType":"delay","timeout":"2","timeoutUnits":"seconds","rate":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":884.3809193202428,"y":264.4404788698471,"wires":[["db83fa11.99b698"]]},{"id":"db83fa11.99b698","type":"function","z":"5abca664.098e18","name":"global set pcstep2","func":"if(global.get('pcstep1')===2){\n    global.set('pcstep2', 1 );\nreturn;}","outputs":1,"noerr":0,"x":1086.666633605957,"y":266.44046115875244,"wires":[[]]},{"id":"8babdbd8.58e2c8","type":"function","z":"5abca664.098e18","name":"step 2","func":"if (global.get ('pcstep2')===1 &&\n global.get('blwr')===0 ) {\nglobal.set('scrub_offset',global.get('rawScrub'));\nglobal.set('filt_offset',global.get('rawFilt'));\nglobal.set('duct_offset',global.get('rawDuct'));\nglobal.set ('pcstep2',2);\nreturn msg;}\n","outputs":1,"noerr":0,"x":720.0951614379883,"y":384.4404697418213,"wires":[["ab8e5bfe.ec5a08"]]},{"id":"ab8e5bfe.ec5a08","type":"delay","z":"5abca664.098e18","name":"","pauseType":"delay","timeout":"2","timeoutUnits":"seconds","rate":"1","nbRateUnits":"","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":942.0951843261719,"y":383.44049739837646,"wires":[["a6f0bd38.4df48"]]},{"id":"a6f0bd38.4df48","type":"function","z":"5abca664.098e18","name":"global set pcstep3","func":"if(global.get('pcstep2')===2){\n    global.set('pcstep3', 1 );\nreturn;}","outputs":1,"noerr":0,"x":1146.0952224731445,"y":382.5833444595337,"wires":[[]]},{"id":"d36bb4b7.410158","type":"function","z":"5abca664.098e18","name":"step 1","func":"if (global.get('pcstep1')==1 && global.get('blwr')===0 && global.get ('flt')==1)\n{global.set ('ballvalve',1);\n    return;}\nif (global.get('pcstep1')==1 && global.get ('flt')===0) \n{global.set ('ballvalve',0);\n    return;}\nmsg.payload=global.get('ballvalve');\nreturn msg;\n\n","outputs":1,"noerr":0,"x":727.3809280395508,"y":325.1071786880493,"wires":[[]]},{"id":"8fe8287a.648488","type":"function","z":"5abca664.098e18","name":"step 3","func":"if (global.get('blwr')===2 && global.get ('pcstep3')===1 ) {\nglobal.set ('pcstep3',2);\nreturn msg;\n}\n","outputs":1,"noerr":0,"x":723.317310333252,"y":444.3134813308716,"wires":[["c69e0e32.cc11b"]]},{"id":"c69e0e32.cc11b","type":"delay","z":"5abca664.098e18","name":"","pauseType":"delay","timeout":"2","timeoutUnits":"seconds","rate":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":915.8093757629395,"y":446.9802703857422,"wires":[["2f967866.8805d8"]]},{"id":"2f967866.8805d8","type":"function","z":"5abca664.098e18","name":"global set pcstep4","func":"if(global.get('pcstep3')===2){\nglobal.set('pcstep4', 1 );\nreturn;}","outputs":1,"noerr":0,"x":1123.1785888671875,"y":448.22235584259033,"wires":[[]]},{"id":"6984941.0c3726c","type":"function","z":"5abca664.098e18","name":"step 3","func":"if (global.get('pcstep3')===1 ) {\nglobal.set ('blwr',1);\n}\nreturn;","outputs":1,"noerr":0,"x":723.1904144287109,"y":495.55170249938965,"wires":[[]]},{"id":"9c602252.4c48","type":"function","z":"5abca664.098e18","name":"step 5","func":"var diff2 = Math.abs(global.get('tempPres') - global.get('realscrubpress'));\nif (global.get ('pcstep5')==1 && global.get('tempPres')>2 && (diff2 <= 0.1)) {\nglobal.set ('pcstep5', 2 );\nreturn msg;\n} ","outputs":1,"noerr":0,"x":704.0039749145508,"y":711.0475950241089,"wires":[["96897c9d.0f901"]]},{"id":"61fcfa5a.53fc44","type":"delay","z":"5abca664.098e18","name":"","pauseType":"delay","timeout":"2","timeoutUnits":"seconds","rate":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":878.7776947021484,"y":570.916748046875,"wires":[["1e2b8ab5.4f3785"]]},{"id":"1e2b8ab5.4f3785","type":"function","z":"5abca664.098e18","name":"global set pcstep5","func":"if(global.get('pcstep4')===2){\n    global.set('pcstep5', 1 );\nreturn;}","outputs":1,"noerr":0,"x":1116.6826782226562,"y":570.0754909515381,"wires":[[]]},{"id":"9086361.9dd4ac8","type":"function","z":"5abca664.098e18","name":"step 4","func":"var diff1 = Math.abs(global.get('actFilt') - global.get('realfiltpress'));\nif (global.get ('pcstep4')==1 && global.get('actFilt')>2 && (diff1 <= 0.1)) {\nglobal.set ('pcstep4', 2 );\nreturn msg;\n} ","outputs":1,"noerr":0,"x":694.1904067993164,"y":577.3097467422485,"wires":[["61fcfa5a.53fc44"]]},{"id":"96897c9d.0f901","type":"delay","z":"5abca664.098e18","name":"","pauseType":"delay","timeout":"2","timeoutUnits":"seconds","rate":"1","nbRateUnits":"","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":846.1904792785645,"y":709.488205909729,"wires":[["a5fd67ae.f08a18"]]},{"id":"a5fd67ae.f08a18","type":"function","z":"5abca664.098e18","name":"global set pcstep6","func":"if(global.get('pcstep5')===2){\n    global.set('pcstep6', 1 );\nreturn;}","outputs":1,"noerr":0,"x":1108.4763259887695,"y":710.7739877700806,"wires":[[]]},{"id":"9b8c02d8.0b222","type":"function","z":"5abca664.098e18","name":"step 7","func":"if (global.get('blwr') === 3 && global.get('pcstep7')=== 1) {\nglobal.set ('pcstep7',2);\nreturn msg;\n} ","outputs":1,"noerr":0,"x":688.190315246582,"y":925.6310434341431,"wires":[["5e1065ac.79ffac"]]},{"id":"5e1065ac.79ffac","type":"delay","z":"5abca664.098e18","name":"","pauseType":"delay","timeout":"30","timeoutUnits":"seconds","rate":"1","nbRateUnits":"","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":936.1904983520508,"y":914.6308603286743,"wires":[["d080be45.52e3e"]]},{"id":"8c2a8d76.1d2a6","type":"vis in","z":"5abca664.098e18","language":"en","x":252.97222137451172,"y":1425.69446849823,"wires":[["e943a0fa.44b55"]]},{"id":"e943a0fa.44b55","type":"switch","z":"5abca664.098e18","name":"factreset","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"factreset","vt":"str"}],"checkall":"true","outputs":1,"x":422.59520721435547,"y":1465.3213758468628,"wires":[["ce0a63ee.80f9","933fceed.4a8a2","99d39447.6752b8","99c28738.8b1288","fdfcc66c.1b2028","860239c9.5015b8"]]},{"id":"933fceed.4a8a2","type":"function","z":"5abca664.098e18","name":"write scrub_offset on factreset","func":"global.set ('scrub_offset', 0 );\nmsg.payload = global.get('scrub_offset');\nreturn msg;\n","outputs":1,"noerr":0,"x":764.1111755371094,"y":1359.22230052948,"wires":[["d19c8bd8.2bb0d8"]]},{"id":"ce0a63ee.80f9","type":"function","z":"5abca664.098e18","name":"write filt_offset on factreset","func":"global.set ('filt_offset', 0 );\nmsg.payload = global.get('filt_offset');\nreturn msg;\n","outputs":1,"noerr":0,"x":775.6111373901367,"y":1404.58340549469,"wires":[["d11fb065.1c9fd"]]},{"id":"d19c8bd8.2bb0d8","type":"change","z":"5abca664.098e18","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/scrub_offset","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1025.547508239746,"y":1350.4722471237183,"wires":[["84403119.0c52c"]]},{"id":"d11fb065.1c9fd","type":"change","z":"5abca664.098e18","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/filt_offset","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1023.6904754638672,"y":1428.7421340942383,"wires":[["c9e0149a.792668"]]},{"id":"42249352.22437c","type":"function","z":"5abca664.098e18","name":"qualifier to write scrub_offset to database","func":"if (global.get ('pcstep2')===1) {\nmsg.payload = global.get ('scrub_offset');\nreturn msg;\n}\n","outputs":1,"noerr":0,"x":731.2977676391602,"y":1319.9048566818237,"wires":[["d19c8bd8.2bb0d8"]]},{"id":"2e26fb7b.766da4","type":"function","z":"5abca664.098e18","name":"qualifier to write filt_offset to database","func":"if (global.get ('pcstep2')===1) {\nmsg.payload = global.get ('filt_offset');\nreturn msg;\n}\n","outputs":1,"noerr":0,"x":751.6787033081055,"y":1446.9167227745056,"wires":[["d11fb065.1c9fd"]]},{"id":"4ac606c3.d6ec98","type":"inject","z":"5abca664.098e18","name":"ONCE A SEC PULSE","topic":"","payload":"ddd","payloadType":"str","repeat":"1","crontab":"","once":true,"x":256.99999237060547,"y":1518.5278253555298,"wires":[["2acc93e8.d2d4bc"]]},{"id":"2acc93e8.d2d4bc","type":"function","z":"5abca664.098e18","name":"global get press_calibration","func":"if (global.get ('press_calibration') ===1) {\nmsg.payload = 1;\nreturn msg;\n} else\nmsg.payload = 0;\nreturn msg;\n","outputs":1,"noerr":0,"x":322.3333511352539,"y":1629.5833024978638,"wires":[["2e3b4668.bdef5a"]]},{"id":"2e3b4668.bdef5a","type":"switch","z":"5abca664.098e18","name":"switch","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"num"},{"t":"eq","v":"0","vt":"num"}],"checkall":"true","outputs":2,"x":424.8293914794922,"y":1573.3232975006104,"wires":[["2e26fb7b.766da4","42249352.22437c","ced99770.48d758","8e25d407.94afc8","93a0f288.cafff","aba1691b.88e4a8"],[]]},{"id":"ced99770.48d758","type":"function","z":"5abca664.098e18","name":"qualifier to write duct_offset to database","func":"if (global.get ('pcstep2')===1) {\nmsg.payload = global.get ('duct_offset');\nreturn msg;\n}\n","outputs":1,"noerr":0,"x":744.0832901000977,"y":1524.7778224945068,"wires":[["6bdbb6be.e22168"]]},{"id":"99d39447.6752b8","type":"function","z":"5abca664.098e18","name":"write duct_offset on factreset","func":"global.set ('duct_offset', 0 );\nmsg.payload = global.get('duct_offset');\nreturn msg;\n","outputs":1,"noerr":0,"x":781.5910263061523,"y":1485.8456077575684,"wires":[["6bdbb6be.e22168"]]},{"id":"6bdbb6be.e22168","type":"change","z":"5abca664.098e18","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/duct_offset","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1027.0831298828125,"y":1497.1507625579834,"wires":[["1befe023.85ee1"]]},{"id":"84403119.0c52c","type":"DataIn","z":"5abca664.098e18","collection":"3a50f7a3.c695d8","name":"","update":false,"path":"/scrub_offset","x":1223.5278854370117,"y":1345.6112394332886,"wires":[]},{"id":"c9e0149a.792668","type":"DataIn","z":"5abca664.098e18","collection":"3a50f7a3.c695d8","name":"","update":false,"path":"/filt_offset","x":1211.4444770812988,"y":1428.2499532699585,"wires":[]},{"id":"1befe023.85ee1","type":"DataIn","z":"5abca664.098e18","collection":"3a50f7a3.c695d8","name":"","update":false,"path":"/duct_offset","x":1230.0555400848389,"y":1497.277826309204,"wires":[]},{"id":"e965552e.d28cc8","type":"inject","z":"5abca664.098e18","name":"","topic":"","payload":"0","payloadType":"num","repeat":"","crontab":"","once":false,"x":1019.2222366333008,"y":1236.5833387374878,"wires":[["84403119.0c52c","c9e0149a.792668","1befe023.85ee1"]]},{"id":"2fea2144.d25a5e","type":"inject","z":"5abca664.098e18","name":"","topic":"","payload":"startup","payloadType":"str","repeat":"","crontab":"","once":true,"x":258.5277557373047,"y":1904.0832967758179,"wires":[["ab5141d4.7868","21526735.d8eb68","706553f8.0c8acc","3c702387.6f34dc","eb67b39b.9e36d","3f40f11e.5fbbfe"]]},{"id":"f6119962.c10078","type":"comment","z":"5abca664.098e18","name":"Read variables from DB on startup","info":"","x":638.1110916137695,"y":1850.5832557678223,"wires":[]},{"id":"ab5141d4.7868","type":"change","z":"5abca664.098e18","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/scrub_offset","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":599.3135118484497,"y":1947.0116653442383,"wires":[["95451ea5.d3f92"]]},{"id":"21526735.d8eb68","type":"change","z":"5abca664.098e18","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/filt_offset","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":594.5634460449219,"y":1894.5830583572388,"wires":[["b033ed04.8147e"]]},{"id":"706553f8.0c8acc","type":"change","z":"5abca664.098e18","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/duct_offset","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":606.5634613037109,"y":2006.0832414627075,"wires":[["23a14823.5c8468"]]},{"id":"95451ea5.d3f92","type":"DataOut","z":"5abca664.098e18","collection":"3a50f7a3.c695d8","name":"","path":"/scrub_offset","error":false,"x":787.7064514160156,"y":1950.7259321212769,"wires":[["d87d6526.a74518"]]},{"id":"b033ed04.8147e","type":"DataOut","z":"5abca664.098e18","collection":"3a50f7a3.c695d8","name":"","path":"/filt_offset","error":false,"x":788.5634689331055,"y":1899.3332300186157,"wires":[["6aa661a6.30a7e"]]},{"id":"23a14823.5c8468","type":"DataOut","z":"5abca664.098e18","collection":"3a50f7a3.c695d8","name":"","path":"/duct_offset","error":false,"x":802.5634269714355,"y":2007.8330640792847,"wires":[["ebc23b49.d495e8"]]},{"id":"d87d6526.a74518","type":"function","z":"5abca664.098e18","name":"global set scrub_offset","func":"var scrub_offset = global.set('scrub_offset', msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":1054.0277404785156,"y":1943.3331327438354,"wires":[[]]},{"id":"6aa661a6.30a7e","type":"function","z":"5abca664.098e18","name":"global set filt_offset","func":"var filt_offset = global.set('filt_offset', msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":1039.5634689331055,"y":1889.3332300186157,"wires":[["3d3c2a0c.4fc246"]]},{"id":"ebc23b49.d495e8","type":"function","z":"5abca664.098e18","name":"global set duct_offset","func":"var duct_offset = global.set('duct_offset', msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":1052.8134460449219,"y":2000.3330640792847,"wires":[[]]},{"id":"314c5c5e.837d94","type":"inject","z":"5abca664.098e18","name":"ONCE A SEC PULSE","topic":"","payload":"ddd","payloadType":"str","repeat":"1","crontab":"","once":true,"x":363.8055000305176,"y":2340.8890194892883,"wires":[["70038c56.ba7914","2551e3e2.410c3c","b16a19ec.2a9138","ab7736f7.428518","357ecfb6.0cb0d","a5bc0e34.2ee11","6742d50a.1b4dac","725d0f01.f4285","7409c6a5.898618"]]},{"id":"70038c56.ba7914","type":"function","z":"5abca664.098e18","name":"get scrub_offset","func":"msg.payload = global.get('scrub_offset');\nmsg.topic = 'scrub_offset';\nreturn msg;","outputs":1,"noerr":0,"x":762.1706695556641,"y":2317.6982469558716,"wires":[["87b80008.90a72","9553b1b5.0ca8b"]]},{"id":"2551e3e2.410c3c","type":"function","z":"5abca664.098e18","name":"global get filt_offset","func":"msg.payload = global.get('filt_offset');\nmsg.topic = 'filt_offset';\nreturn msg;","outputs":1,"noerr":0,"x":756.5634307861328,"y":2277.4008417129517,"wires":[["87b80008.90a72","bc7a5366.befc"]]},{"id":"b16a19ec.2a9138","type":"function","z":"5abca664.098e18","name":"global get duct_offset","func":"msg.payload = global.get('duct_offset');\nmsg.topic = 'duct_offset';\nreturn msg;","outputs":1,"noerr":0,"x":762.9563064575195,"y":2362.805666923523,"wires":[["87b80008.90a72","37c1c8c7.f8d428"]]},{"id":"87b80008.90a72","type":"vis in","z":"5abca664.098e18","language":"en","x":987.9086036682129,"y":2349.936661720276,"wires":[[]]},{"id":"8a305879.d96388","type":"vis in","z":"5abca664.098e18","language":"en","x":359.77777099609375,"y":1113.249981880188,"wires":[["800b5ad8.add478","f9607cb8.1b15e","d9efffbb.fe842"]]},{"id":"800b5ad8.add478","type":"switch","z":"5abca664.098e18","name":"set topic realscrubpress","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"realscrubpress","vt":"str"}],"checkall":"true","outputs":1,"x":655.5555648803711,"y":1102.3609943389893,"wires":[["1ec869ac.a633c6"]]},{"id":"1ec869ac.a633c6","type":"function","z":"5abca664.098e18","name":"global set realscrubpress","func":"global.set('realscrubpress',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":916.381591796875,"y":1099.320897102356,"wires":[[]]},{"id":"f9607cb8.1b15e","type":"switch","z":"5abca664.098e18","name":"set topic realfiltpress","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"realfiltpress","vt":"str"}],"checkall":"true","outputs":1,"x":652.1388854980469,"y":1062.9723253250122,"wires":[["36960d36.36e812"]]},{"id":"36960d36.36e812","type":"function","z":"5abca664.098e18","name":"global set realfiltpress","func":"global.set('realfiltpress',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":909.214900970459,"y":1061.182107925415,"wires":[[]]},{"id":"d9efffbb.fe842","type":"switch","z":"5abca664.098e18","name":"set topic realductpress","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"realductpress","vt":"str"}],"checkall":"true","outputs":1,"x":660.4722061157227,"y":1142.8333849906921,"wires":[["2bff631c.79e63c"]]},{"id":"2bff631c.79e63c","type":"function","z":"5abca664.098e18","name":"global set realductpress","func":"global.set('realductpress',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":918.7981986999512,"y":1139.7931685447693,"wires":[[]]},{"id":"ab7736f7.428518","type":"function","z":"5abca664.098e18","name":"get realscrubpress","func":"msg.payload = global.get('realscrubpress');\nmsg.topic = 'realscrubpress';\nreturn msg;","outputs":1,"noerr":0,"x":763.3888778686523,"y":2439.638716697693,"wires":[["87b80008.90a72","4cd9bf40.42bfa"]]},{"id":"357ecfb6.0cb0d","type":"function","z":"5abca664.098e18","name":"global get realfiltpress","func":"msg.payload = global.get('realfiltpress');\nmsg.topic = 'realfiltpress';\nreturn msg;","outputs":1,"noerr":0,"x":755.2816925048828,"y":2401.8413076400757,"wires":[["87b80008.90a72","3ae013cf.abdacc"]]},{"id":"a5bc0e34.2ee11","type":"function","z":"5abca664.098e18","name":"global get realductpress","func":"msg.payload = global.get('realductpress');\nmsg.topic = 'realductpress';\nreturn msg;","outputs":1,"noerr":0,"x":746.6745681762695,"y":2474.7461366653442,"wires":[["87b80008.90a72","4ef02d41.4709f4"]]},{"id":"f24b4300.89b9","type":"function","z":"5abca664.098e18","name":"step 7","func":"if (global.get('pcstep7')===1 ) {\n    global.set ('blwr', 3);\nreturn;}\n","outputs":1,"noerr":0,"x":685.9047317504883,"y":885.0596323013306,"wires":[[]]},{"id":"2458f57.223fc0a","type":"function","z":"5abca664.098e18","name":"step 6","func":"var diff3 = Math.abs(global.get('ductPres') - global.get('realductpress'));\nif (global.get ('pcstep6')==1 && global.get('ductPres')>1 && (diff3 <= 0.1)) {\nglobal.set ('pcstep6', 2);\nreturn msg;\n} else \nif (global.get('pcstep6')==1 && global.get('ducted_check')===0){\n    global.set ('pcstep6', 2);\nreturn msg;} \n","outputs":1,"noerr":0,"x":711.0000076293945,"y":798.7500352859497,"wires":[["66da4b52.55a1c4"]]},{"id":"66da4b52.55a1c4","type":"delay","z":"5abca664.098e18","name":"","pauseType":"delay","timeout":"2","timeoutUnits":"seconds","rate":"1","nbRateUnits":"","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":914.0000076293945,"y":803.2500009536743,"wires":[["1c8bd667.d8130a"]]},{"id":"1c8bd667.d8130a","type":"function","z":"5abca664.098e18","name":"global set pcstep7","func":"if(global.get('pcstep6')===2){\n    global.set('pcstep7', 1 );\nreturn;}","outputs":1,"noerr":0,"x":1176.2858543395996,"y":804.5357828140259,"wires":[[]]},{"id":"d080be45.52e3e","type":"function","z":"5abca664.098e18","name":"reset press_calibration","func":"if(global.get('pcstep7')===2){\n    global.set('pcstep1',0);\n    global.set('pcstep2',0);\n    global.set('pcstep3',0);\n    global.set('pcstep4',0);\n    global.set('pcstep5',0);\n    global.set('pcstep6',0);\n    global.set('press_calibration', 0 );\nreturn;}","outputs":1,"noerr":0,"x":1151.0000076293945,"y":915.2500009536743,"wires":[[]]},{"id":"615dfe5d.42cb4","type":"function","z":"5abca664.098e18","name":"calculate scrub_slope","func":"if (global.get('pcstep5')===1 && global.get('rawScrub')>0.1) {\nvar scrub_temp = global.get('realscrubpress') / (global.get('rawScrub') - global.get('scrub_offset'));\nglobal.set('scrub_slope',scrub_temp);\nmsg.payload = global.get('scrub_slope');\nreturn msg;\n}\nreturn;","outputs":1,"noerr":0,"x":768.1505889892578,"y":753.6647872924805,"wires":[[]]},{"id":"8e25d407.94afc8","type":"function","z":"5abca664.098e18","name":"qualifier to write filt_slope to database","func":"if (global.get ('pcstep4')===2) {\nmsg.payload = global.get ('filt_slope');\nreturn msg;\n}\n","outputs":1,"noerr":0,"x":734.2904739379883,"y":1569.5070810317993,"wires":[["f01fd452.be4cc8"]]},{"id":"99c28738.8b1288","type":"function","z":"5abca664.098e18","name":"write filt_slope on factreset","func":"global.set ('filt_slope', 1 );\nmsg.payload = global.get('filt_slope');\nreturn msg;\n","outputs":1,"noerr":0,"x":767.1038818359375,"y":1608.8245248794556,"wires":[["f01fd452.be4cc8"]]},{"id":"f01fd452.be4cc8","type":"change","z":"5abca664.098e18","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/filt_slope","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1034.7902069091797,"y":1587.5744543075562,"wires":[["3d6974b5.76480c"]]},{"id":"3d6974b5.76480c","type":"DataIn","z":"5abca664.098e18","collection":"3a50f7a3.c695d8","name":"","update":false,"path":"/filt_slope","x":1220.2707176208496,"y":1588.9635038375854,"wires":[]},{"id":"93a0f288.cafff","type":"function","z":"5abca664.098e18","name":"qualifier to write scrub_slope to database","func":"if (global.get ('pcstep5')===2) {\nmsg.payload = global.get ('scrub_slope');\nreturn msg;\n}\n","outputs":1,"noerr":0,"x":749.2904739379883,"y":1647.0070810317993,"wires":[["f6397908.1780f8"]]},{"id":"fdfcc66c.1b2028","type":"function","z":"5abca664.098e18","name":"write scrub_slope on factreset","func":"global.set ('scrub_slope', 1 );\nmsg.payload = global.get('scrub_slope');\nreturn msg;\n","outputs":1,"noerr":0,"x":782.1038818359375,"y":1686.3245248794556,"wires":[["f6397908.1780f8"]]},{"id":"f6397908.1780f8","type":"change","z":"5abca664.098e18","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/scrub_slope","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1039.7902069091797,"y":1665.0744543075562,"wires":[["b6f10685.1ddf48"]]},{"id":"b6f10685.1ddf48","type":"DataIn","z":"5abca664.098e18","collection":"3a50f7a3.c695d8","name":"","update":false,"path":"/scrub_slope","x":1235.2707176208496,"y":1666.4635038375854,"wires":[]},{"id":"f23f2864.5505b8","type":"function","z":"5abca664.098e18","name":"calculate filt_slope","func":"if (global.get('pcstep4')===1 && global.get('rawFilt')>0.1) {\nvar filt_temp = global.get('realfiltpress') / (global.get('rawFilt') - global.get('filt_offset'));\nglobal.set('filt_slope',filt_temp);\nmsg.payload = global.get('filt_slope');\nreturn msg;\n}\nreturn;","outputs":1,"noerr":0,"x":733.2903594970703,"y":638.348014831543,"wires":[["2a7488d9.085658"]]},{"id":"e495899.d0d6d78","type":"function","z":"5abca664.098e18","name":"calculate duct_slope","func":"if (global.get('pcstep6')===1 && global.get('rawDuct')>0.1) {\nvar duct_temp = global.get('realductpress') / (global.get('rawDuct') - global.get('duct_offset'));\nglobal.set('duct_slope',duct_temp);\nmsg.payload = global.get('duct_slope');\nreturn msg;\n}\nreturn;","outputs":1,"noerr":0,"x":746.7677764892578,"y":840.098014831543,"wires":[[]]},{"id":"aba1691b.88e4a8","type":"function","z":"5abca664.098e18","name":"qualifier to write duct_slope to database","func":"if (global.get ('pcstep6')===2) {\nmsg.payload = global.get ('duct_slope');\nreturn msg;\n}\n","outputs":1,"noerr":0,"x":749.5177879333496,"y":1727.6887311935425,"wires":[["8425eea6.a7d46"]]},{"id":"860239c9.5015b8","type":"function","z":"5abca664.098e18","name":"write duct_slope on factreset","func":"global.set ('duct_slope', 1 );\nmsg.payload = global.get('duct_slope');\nreturn msg;\n","outputs":1,"noerr":0,"x":772.3311958312988,"y":1767.0061750411987,"wires":[["8425eea6.a7d46"]]},{"id":"8425eea6.a7d46","type":"change","z":"5abca664.098e18","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/duct_slope","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1040.017520904541,"y":1745.7561044692993,"wires":[["caec48b.c0f3fb8"]]},{"id":"caec48b.c0f3fb8","type":"DataIn","z":"5abca664.098e18","collection":"3a50f7a3.c695d8","name":"","update":false,"path":"/duct_slope","x":1235.498031616211,"y":1747.1451539993286,"wires":[]},{"id":"c4b82d0.7d225d","type":"inject","z":"5abca664.098e18","name":"","topic":"","payload":"1","payloadType":"num","repeat":"","crontab":"","once":false,"x":1041.392765045166,"y":1819.5745496749878,"wires":[["3d6974b5.76480c","b6f10685.1ddf48","caec48b.c0f3fb8"]]},{"id":"3c702387.6f34dc","type":"change","z":"5abca664.098e18","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/scrub_slope","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":596.7904815673828,"y":2112.575309753418,"wires":[["54262ff6.b7224"]]},{"id":"eb67b39b.9e36d","type":"change","z":"5abca664.098e18","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/filt_slope","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":602.0404205322266,"y":2056.3967809677124,"wires":[["b66910c3.2889d"]]},{"id":"3f40f11e.5fbbfe","type":"change","z":"5abca664.098e18","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/duct_slope","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":605.290397644043,"y":2152.8967571258545,"wires":[["f735bb23.ed51f8"]]},{"id":"54262ff6.b7224","type":"DataOut","z":"5abca664.098e18","collection":"3a50f7a3.c695d8","name":"","path":"/scrub_slope","error":false,"x":790.1833648681641,"y":2107.539354324341,"wires":[["640d763a.4a6f78"]]},{"id":"b66910c3.2889d","type":"DataOut","z":"5abca664.098e18","collection":"3a50f7a3.c695d8","name":"","path":"/filt_slope","error":false,"x":789.790412902832,"y":2056.1470918655396,"wires":[["966c7a30.94eaf8"]]},{"id":"f735bb23.ed51f8","type":"DataOut","z":"5abca664.098e18","collection":"3a50f7a3.c695d8","name":"","path":"/duct_slope","error":false,"x":793.7904510498047,"y":2158.3966131210327,"wires":[["7c3a5379.f9de3c"]]},{"id":"640d763a.4a6f78","type":"function","z":"5abca664.098e18","name":"global set scrub_slope","func":"var scrub_slope = global.set('scrub_slope', msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":1044.0047149658203,"y":2107.646777153015,"wires":[[]]},{"id":"966c7a30.94eaf8","type":"function","z":"5abca664.098e18","name":"global set filt_slope","func":"var filt_slope = global.set('filt_slope', msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":1049.5404891967773,"y":2056.1470918655396,"wires":[["3f8fee27.a998e2"]]},{"id":"7c3a5379.f9de3c","type":"function","z":"5abca664.098e18","name":"global set duct_slope","func":"var duct_slope = global.set('duct_slope', msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":1042.7904510498047,"y":2153.3966131210327,"wires":[[]]},{"id":"6742d50a.1b4dac","type":"function","z":"5abca664.098e18","name":"get scrub_slope","func":"msg.payload = global.get('scrub_slope');\nmsg.topic = 'scrub_slope';\nreturn msg;","outputs":1,"noerr":0,"x":755.5404815673828,"y":2556.6664123535156,"wires":[["87b80008.90a72","100ef4df.26ac9b"]]},{"id":"725d0f01.f4285","type":"function","z":"5abca664.098e18","name":"global get filt_slope","func":"msg.payload = global.get('filt_slope');\nmsg.topic = 'filt_slope';\nreturn msg;","outputs":1,"noerr":0,"x":752.433235168457,"y":2510.119225502014,"wires":[["87b80008.90a72","85af0b38.95a9c8"]]},{"id":"7409c6a5.898618","type":"function","z":"5abca664.098e18","name":"global get duct_slope","func":"msg.payload = global.get('duct_slope');\nmsg.topic = 'duct_slope';\nreturn msg;","outputs":1,"noerr":0,"x":758.8261108398438,"y":2599.2738304138184,"wires":[["87b80008.90a72","e09b97f1.ede6e8"]]},{"id":"7ea0e0f5.33bc9","type":"comment","z":"5abca664.098e18","name":"Measured Pressures from VIS during calibration","info":"","x":646.1654853820801,"y":999.6349363327026,"wires":[]},{"id":"910beb00.96a778","type":"comment","z":"5abca664.098e18","name":"Reset calibration variables on factreset","info":"","x":349.1235656738281,"y":1375.3203125,"wires":[]},{"id":"daf69276.1eca1","type":"comment","z":"5abca664.098e18","name":"Store calibration variables in database","info":"","x":849.1129379272461,"y":1277.8062181472778,"wires":[]},{"id":"b15ff7e.7c7d408","type":"comment","z":"5abca664.098e18","name":"send variables to VIS","info":"","x":669.1129016876221,"y":2234.0632276535034,"wires":[]},{"id":"3d3c2a0c.4fc246","type":"debug","z":"5abca664.098e18","name":"","active":false,"console":"false","complete":"false","x":1299.5781059265137,"y":1921.1724996566772,"wires":[]},{"id":"3f8fee27.a998e2","type":"debug","z":"5abca664.098e18","name":"","active":false,"console":"false","complete":"false","x":1263.331657409668,"y":2076.1761713027954,"wires":[]},{"id":"9f7ca6d6.d41748","type":"inject","z":"5abca664.098e18","name":"ONCE A SEC PULSE","topic":"","payload":"ddd","payloadType":"str","repeat":"1","crontab":"","once":true,"x":1204.4040603637695,"y":2362.9162607192993,"wires":[["b1297964.2c2978","f6848b87.f427e8","5b7fbfe.3710f4","935be51b.c98b68","8e949c02.c9b29","916278ca.99e528","6d5eab57.1a67b4","91cb0b48.f63b88"]]},{"id":"b1297964.2c2978","type":"function","z":"5abca664.098e18","name":"global get pcstep1","func":"msg.payload = global.get('pcstep1');\nmsg.topic = 'pcstep1';\nreturn msg;","outputs":1,"noerr":0,"x":1464.6619148254395,"y":2293.1781220436096,"wires":[["e59164d7.5efa38"]]},{"id":"e59164d7.5efa38","type":"vis in","z":"5abca664.098e18","language":"en","x":1649.7571830749512,"y":2363.213677406311,"wires":[[]]},{"id":"f6848b87.f427e8","type":"function","z":"5abca664.098e18","name":"global get pcstep2","func":"msg.payload = global.get('pcstep2');\nmsg.topic = 'pcstep2';\nreturn msg;","outputs":1,"noerr":0,"x":1459.972297668457,"y":2353.5979013442993,"wires":[["e59164d7.5efa38"]]},{"id":"5b7fbfe.3710f4","type":"function","z":"5abca664.098e18","name":"global get pcstep3","func":"msg.payload = global.get('pcstep3');\nmsg.topic = 'pcstep3';\nreturn msg;","outputs":1,"noerr":0,"x":1454.972297668457,"y":2403.5979013442993,"wires":[["e59164d7.5efa38"]]},{"id":"935be51b.c98b68","type":"function","z":"5abca664.098e18","name":"global get pcstep4","func":"msg.payload = global.get('pcstep4');\nmsg.topic = 'pcstep4';\nreturn msg;","outputs":1,"noerr":0,"x":1443.722297668457,"y":2456.0979013442993,"wires":[["e59164d7.5efa38"]]},{"id":"8e949c02.c9b29","type":"function","z":"5abca664.098e18","name":"global get pcstep5","func":"msg.payload = global.get('pcstep5');\nmsg.topic = 'pcstep5';\nreturn msg;","outputs":1,"noerr":0,"x":1456.222297668457,"y":2523.5979013442993,"wires":[["e59164d7.5efa38"]]},{"id":"916278ca.99e528","type":"function","z":"5abca664.098e18","name":"global get pcstep6","func":"msg.payload = global.get('pcstep6');\nmsg.topic = 'pcstep6';\nreturn msg;","outputs":1,"noerr":0,"x":1458.722297668457,"y":2574.8479013442993,"wires":[["e59164d7.5efa38"]]},{"id":"6d5eab57.1a67b4","type":"function","z":"5abca664.098e18","name":"global get pcstep7","func":"msg.payload = global.get('pcstep7');\nmsg.topic = 'pcstep7';\nreturn msg;","outputs":1,"noerr":0,"x":1454.972297668457,"y":2632.3479013442993,"wires":[["e59164d7.5efa38"]]},{"id":"91cb0b48.f63b88","type":"function","z":"5abca664.098e18","name":"global get press_calibration","func":"msg.payload = global.get('press_calibration');\nmsg.topic = 'press_calibration';\nreturn msg;","outputs":1,"noerr":0,"x":1479.745002746582,"y":2675.9843759536743,"wires":[["e59164d7.5efa38"]]},{"id":"85af0b38.95a9c8","type":"debug","z":"5abca664.098e18","name":"","active":false,"console":"false","complete":"false","x":1005.0714263916016,"y":2538.714286804199,"wires":[]},{"id":"4ef02d41.4709f4","type":"debug","z":"5abca664.098e18","name":"","active":false,"console":"false","complete":"false","x":1016.0714263916016,"y":2500.714286804199,"wires":[]},{"id":"3ae013cf.abdacc","type":"debug","z":"5abca664.098e18","name":"","active":false,"console":"false","complete":"false","x":1000.0714263916016,"y":2425.714286804199,"wires":[]},{"id":"4cd9bf40.42bfa","type":"debug","z":"5abca664.098e18","name":"","active":false,"console":"false","complete":"false","x":1006.0714263916016,"y":2458.714286804199,"wires":[]},{"id":"bc7a5366.befc","type":"debug","z":"5abca664.098e18","name":"","active":false,"console":"false","complete":"false","x":1023.0714263916016,"y":2239.714286804199,"wires":[]},{"id":"9553b1b5.0ca8b","type":"debug","z":"5abca664.098e18","name":"","active":false,"console":"false","complete":"false","x":1020.0714263916016,"y":2272.714286804199,"wires":[]},{"id":"37c1c8c7.f8d428","type":"debug","z":"5abca664.098e18","name":"","active":false,"console":"false","complete":"false","x":1014.0714263916016,"y":2313.714286804199,"wires":[]},{"id":"100ef4df.26ac9b","type":"debug","z":"5abca664.098e18","name":"","active":false,"console":"false","complete":"false","x":999.0714263916016,"y":2577.714286804199,"wires":[]},{"id":"e09b97f1.ede6e8","type":"debug","z":"5abca664.098e18","name":"","active":false,"console":"false","complete":"false","x":1004.0714263916016,"y":2617.714286804199,"wires":[]},{"id":"2a7488d9.085658","type":"debug","z":"5abca664.098e18","name":"","active":false,"console":"false","complete":"false","x":977.0714263916016,"y":640.7142868041992,"wires":[]},{"id":"69e8179.01476e8","type":"debug","z":"5abca664.098e18","name":"","active":false,"console":"false","complete":"false","x":735.5,"y":152,"wires":[]},{"id":"30fabed8.b29e02","type":"function","z":"ab94ed2a.3949c","name":"global get blwr","func":"if (global.get ('blwr') <= 2 && \nglobal.get ('blwr') >0) {\nmsg.payload = 1;\nreturn msg;\n} else\nmsg.payload = 0;\nreturn msg;","outputs":1,"noerr":0,"x":340,"y":860.6666454076767,"wires":[["94c68f1d.8e749"]]},{"id":"c691908b.628f8","type":"function","z":"ab94ed2a.3949c","name":"global get ballvalve","func":"if (global.get ('ballvalve') == 1 ) {\nmsg.payload = 1;\nreturn msg;\n} else\nmsg.payload = 0;\nreturn msg;","outputs":1,"noerr":0,"x":331.71424865722656,"y":1186.1904357671738,"wires":[["a00a740c.a381c8"]]},{"id":"e3c83465.6d4198","type":"inject","z":"ab94ed2a.3949c","name":"1 SEC PULSE","topic":"","payload":"ddd","payloadType":"str","repeat":"1","crontab":"","once":true,"x":195.4444465637207,"y":962.3333114385605,"wires":[["8591ba1f.319f78"]]},{"id":"94c68f1d.8e749","type":"switch","z":"ab94ed2a.3949c","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"num"},{"t":"eq","v":"0","vt":"num"}],"checkall":"true","outputs":2,"x":499,"y":859.6666454076767,"wires":[["bcae3a92.f21fa8","36e58661.fdd07a","ddeae55a.3e0d88","3aea911f.e7815e"],["e1269b42.49cd88","653aa589.5663ec"]]},{"id":"87a81c8f.a06f4","type":"change","z":"ab94ed2a.3949c","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/BC","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1281,"y":879.6666454076767,"wires":[["d5aec902.7b5f48"]]},{"id":"1fa2c590.f1c19a","type":"change","z":"ab94ed2a.3949c","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/BVperm","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1231.8573303222656,"y":1270.8214896917343,"wires":[["700f53d9.2c3adc"]]},{"id":"53a63186.a3403","type":"function","z":"ab94ed2a.3949c","name":"Reset runtime variables","func":"var brtemp = global.set ('brtemp', 0);\nvar brperm = global.set ('brperm', 0);\nvar blwrcount = global.set ('blwrcount', 0);\nvar bvtemp = global.set ('bvtemp', 0);\nvar bvperm = global.set ('bvperm', 0);\nvar bvcount = global.set ('bvcount', 0);\nvar cvtemp = global.set ('cvtemp', 0);\nvar cvperm = global.set ('cvperm', 0);\nvar cvcount = global.set ('cvcount', 0);\nvar Phicount = global.set ('Phicount', 0);\nvar Plocount = global.set ('Plocount', 0);\nvar Dirtcount = global.set ('Dirtcount', 0);\nvar Timedoutcount = global.set ('Timedoutcount', 0);\nvar hdpcount = global.set ('hdpcount', 0);\nreturn msg; \n","outputs":"1","noerr":0,"x":473.2262592315674,"y":1821.5710872411728,"wires":[["c8623cf9.fd38e","faec107d.879a9","98aae737.823608","439a2944.eca858","5ec5d6ee.05de28","963dddf3.3d90e","3b5a1e04.21c3f2","bd41dbf3.b87ab8","19f7c06b.78728","7b96cbd.513ba34","b7a76925.7c87f8"]]},{"id":"935492bb.d1279","type":"switch","z":"ab94ed2a.3949c","name":"reset runtimes on factreset","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"factreset","vt":"str"}],"checkall":"true","outputs":1,"x":390.19049072265625,"y":1902.1427005529404,"wires":[["53a63186.a3403"]]},{"id":"4aa12032.c9f64","type":"function","z":"ab94ed2a.3949c","name":"global set blwrcount","func":"var temp = global.get('blwrcount') - (-1);\nvar blwrcount = global.set('blwrcount', temp);\nmsg.payload = global.get('blwrcount');\nreturn msg;","outputs":1,"noerr":0,"x":1058.2856826782227,"y":878.6665996313095,"wires":[["87a81c8f.a06f4"]]},{"id":"37f9e506.da35ca","type":"function","z":"ab94ed2a.3949c","name":"global set brtemp","func":"var brtemp = global.set('brtemp',0);\nreturn msg;","outputs":1,"noerr":0,"x":946,"y":1007.6666454076767,"wires":[["bdea0962.83cdc8"]]},{"id":"2ffc5c7f.5b78f4","type":"change","z":"ab94ed2a.3949c","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/BRperm","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":583.2858715057373,"y":166.52386510372162,"wires":[["a9102036.e197a"]]},{"id":"16ca0938.defcb7","type":"change","z":"ab94ed2a.3949c","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/BVperm","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":579.8572826385498,"y":226.3809665441513,"wires":[["39666831.a26b28"]]},{"id":"6b732908.8c0038","type":"change","z":"ab94ed2a.3949c","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"bvpermhrs","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1082.3216075897217,"y":262.8810123205185,"wires":[["2327aa94.145eb6"]]},{"id":"89de6e46.16752","type":"function","z":"ab94ed2a.3949c","name":"global set brperm","func":"var temp = global.get('brperm') -( -global.get('brtemp')); \nvar brperm = global.set('brperm',temp);\nmsg.payload = global.get('brperm');\nreturn msg;","outputs":1,"noerr":0,"x":953,"y":950.6666454076767,"wires":[["4ceb21e0.fd76"]]},{"id":"4ceb21e0.fd76","type":"change","z":"ab94ed2a.3949c","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/BRperm","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1239,"y":953.6666454076767,"wires":[["ee904333.0b3d9"]]},{"id":"f9cc06fb.f5bfd8","type":"change","z":"ab94ed2a.3949c","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/BC","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":586.5716381072998,"y":293.952423453331,"wires":[["c4b6167a.5a3e28"]]},{"id":"7762f7a1.3671b8","type":"change","z":"ab94ed2a.3949c","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"blwrcount","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":948.357343673706,"y":297.55958592891693,"wires":[["2327aa94.145eb6"]]},{"id":"6d376e22.0ef9a","type":"change","z":"ab94ed2a.3949c","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/BVC","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":585.5715351104736,"y":333.9523490667343,"wires":[["90fb59fa.35ad68"]]},{"id":"ed774bf9.ac9008","type":"change","z":"ab94ed2a.3949c","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"bvcount","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":945.0358905792236,"y":335.3095268011093,"wires":[["2327aa94.145eb6"]]},{"id":"a73e655a.0f4e48","type":"function","z":"ab94ed2a.3949c","name":"global set bvcount","func":"var temp = global.get('bvcount') - (-1);\nvar bvcount = global.set('bvcount', temp);\nmsg.payload = global.get('bvcount');\nreturn msg;","outputs":1,"noerr":0,"x":1065.9642639160156,"y":1187.190445303917,"wires":[["bea17601.927c88"]]},{"id":"bea17601.927c88","type":"change","z":"ab94ed2a.3949c","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/BVC","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1297.7142715454102,"y":1205.190445303917,"wires":[["68e41f9f.e8ea1"]]},{"id":"cbc981a.a09d48","type":"inject","z":"ab94ed2a.3949c","name":"","topic":"","payload":"1","payloadType":"num","repeat":"","crontab":"","once":false,"x":278.1904926300049,"y":1786.142681479454,"wires":[["53a63186.a3403"]]},{"id":"c8623cf9.fd38e","type":"function","z":"ab94ed2a.3949c","name":"global get blwrcount","func":"msg.payload = global.get('blwrcount');\nmsg.topic = 'blwrcount';\nreturn msg;","outputs":1,"noerr":0,"x":768.1904926300049,"y":1781.142681479454,"wires":[["dbe1b29e.8f754"]]},{"id":"faec107d.879a9","type":"function","z":"ab94ed2a.3949c","name":"global get brperm","func":"msg.payload = global.get('brperm');\nmsg.topic = 'brperm';\nreturn msg;","outputs":1,"noerr":0,"x":757.6190776824951,"y":1824.2855733633041,"wires":[["dbc1ee85.30796"]]},{"id":"98aae737.823608","type":"function","z":"ab94ed2a.3949c","name":"global get bvcount","func":"msg.payload = global.get('bvcount');\nmsg.topic = 'bvcount';\nreturn msg;","outputs":1,"noerr":0,"x":750.1905193328857,"y":1865.571268439293,"wires":[["80dc7102.2c652"]]},{"id":"439a2944.eca858","type":"function","z":"ab94ed2a.3949c","name":"global get bvperm","func":"msg.payload = global.get('bvperm');\nmsg.topic = 'bvperm';\nreturn msg;","outputs":1,"noerr":0,"x":753.1905422210693,"y":1903.2854503393173,"wires":[["16088321.68869d"]]},{"id":"dbe1b29e.8f754","type":"change","z":"ab94ed2a.3949c","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/BC","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1050.190507888794,"y":1775.1426852941513,"wires":[["18dad2fc.7cec7d"]]},{"id":"dbc1ee85.30796","type":"change","z":"ab94ed2a.3949c","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/BRperm","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1032.190507888794,"y":1818.1426852941513,"wires":[["3130a64f.09ce2a"]]},{"id":"80dc7102.2c652","type":"change","z":"ab94ed2a.3949c","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/BVC","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1026.1905117034912,"y":1862.2855552434921,"wires":[["f802fc3c.9597a"]]},{"id":"16088321.68869d","type":"change","z":"ab94ed2a.3949c","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/BVperm","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1020.9050121307373,"y":1903.9524062871933,"wires":[["4e2374fd.295bec"]]},{"id":"622b4de3.4d8f24","type":"inject","z":"ab94ed2a.3949c","name":"BLOWER 1","topic":"blwr","payload":"1","payloadType":"num","repeat":"","crontab":"","once":false,"x":188,"y":733.6666454076767,"wires":[["fc1198df.582058"]]},{"id":"fc1198df.582058","type":"function","z":"ab94ed2a.3949c","name":"global set blwr","func":"global.set('blwr',msg.payload);\nreturn;","outputs":1,"noerr":0,"x":523.7619476318359,"y":748.8690351247787,"wires":[[]]},{"id":"8265f24.439781","type":"inject","z":"ab94ed2a.3949c","name":"BLOWER 0","topic":"blwr","payload":"0","payloadType":"num","repeat":"","crontab":"","once":true,"x":188.8333282470703,"y":697.9999431371689,"wires":[["fc1198df.582058"]]},{"id":"c185c87b.904e58","type":"inject","z":"ab94ed2a.3949c","name":"BLOWER 2","topic":"blwr","payload":"2","payloadType":"num","repeat":"","crontab":"","once":false,"x":187,"y":770.6666454076767,"wires":[["fc1198df.582058"]]},{"id":"38dbfb0a.6eff34","type":"inject","z":"ab94ed2a.3949c","name":"BLOWER 3","topic":"blwr","payload":"3","payloadType":"num","repeat":"","crontab":"","once":false,"x":187,"y":806.6666454076767,"wires":[["fc1198df.582058"]]},{"id":"bcae3a92.f21fa8","type":"trigger","z":"ab94ed2a.3949c","op1":"1","op2":"0","op1type":"num","op2type":"str","duration":"0","extend":false,"units":"ms","reset":"reset","name":"","x":805.5,"y":844.6666454076767,"wires":[["4aa12032.c9f64"]]},{"id":"e1269b42.49cd88","type":"trigger","z":"ab94ed2a.3949c","op1":"0","op2":"0","op1type":"num","op2type":"str","duration":"0","extend":false,"units":"ms","reset":"reset","name":"","x":700,"y":921.6666454076767,"wires":[["89de6e46.16752","37f9e506.da35ca"]]},{"id":"36e58661.fdd07a","type":"counter","z":"ab94ed2a.3949c","inc":1,"name":"","x":702.5,"y":803.6666454076767,"wires":[["e180118b.81c9a"]]},{"id":"bdea0962.83cdc8","type":"change","z":"ab94ed2a.3949c","name":"","rules":[{"t":"set","p":"reset","pt":"msg","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":890.3571014404297,"y":750.8094009160995,"wires":[["36e58661.fdd07a"]]},{"id":"ddeae55a.3e0d88","type":"change","z":"ab94ed2a.3949c","name":"","rules":[{"t":"set","p":"reset","pt":"msg","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":616,"y":974.6666454076767,"wires":[["e1269b42.49cd88"]]},{"id":"653aa589.5663ec","type":"change","z":"ab94ed2a.3949c","name":"","rules":[{"t":"set","p":"reset","pt":"msg","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":779,"y":882.6666454076767,"wires":[["bcae3a92.f21fa8"]]},{"id":"8157aa0b.621688","type":"counter","z":"ab94ed2a.3949c","inc":1,"name":"","x":718.7142562866211,"y":1129.440445303917,"wires":[["40721fd2.fcab1"]]},{"id":"fe50a648.edd1a8","type":"change","z":"ab94ed2a.3949c","name":"","rules":[{"t":"set","p":"reset","pt":"msg","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":903.7142562866211,"y":1069.440445303917,"wires":[["8157aa0b.621688"]]},{"id":"a30b19bd.4dd458","type":"trigger","z":"ab94ed2a.3949c","op1":"1","op2":"0","op1type":"num","op2type":"str","duration":"0","extend":false,"units":"ms","reset":"reset","name":"","x":821.7142562866211,"y":1170.440445303917,"wires":[["a73e655a.0f4e48"]]},{"id":"59e31f93.4558c","type":"change","z":"ab94ed2a.3949c","name":"","rules":[{"t":"set","p":"reset","pt":"msg","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":795.2142562866211,"y":1208.440445303917,"wires":[["a30b19bd.4dd458"]]},{"id":"6539fc60.652554","type":"trigger","z":"ab94ed2a.3949c","op1":"0","op2":"0","op1type":"num","op2type":"str","duration":"0","extend":false,"units":"ms","reset":"reset","name":"","x":716.2142562866211,"y":1247.440445303917,"wires":[["9d3aaa08.8c6ed8","4f5319f2.08d6c8"]]},{"id":"34ee430.61df0be","type":"change","z":"ab94ed2a.3949c","name":"","rules":[{"t":"set","p":"reset","pt":"msg","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":632.2142562866211,"y":1300.440445303917,"wires":[["6539fc60.652554"]]},{"id":"a00a740c.a381c8","type":"switch","z":"ab94ed2a.3949c","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"num"},{"t":"eq","v":"0","vt":"num"}],"checkall":"true","outputs":2,"x":515.2142562866211,"y":1185.440445303917,"wires":[["a30b19bd.4dd458","8157aa0b.621688","34ee430.61df0be","ebf2c13c.c561f"],["6539fc60.652554","59e31f93.4558c"]]},{"id":"9d3aaa08.8c6ed8","type":"function","z":"ab94ed2a.3949c","name":"global set bvperm","func":"var temp = global.get('bvperm') -( -global.get('bvtemp')); \nvar bvperm = global.set('bvperm',temp);\nmsg.payload = global.get('bvperm');\nreturn msg;","outputs":1,"noerr":0,"x":969.2142562866211,"y":1276.440445303917,"wires":[["1fa2c590.f1c19a"]]},{"id":"4f5319f2.08d6c8","type":"function","z":"ab94ed2a.3949c","name":"global set bvtemp","func":"var bvtemp = global.set('bvtemp',0);\nreturn msg;","outputs":1,"noerr":0,"x":962.2142562866211,"y":1333.440445303917,"wires":[["fe50a648.edd1a8"]]},{"id":"e4f8f266.94bcf","type":"inject","z":"ab94ed2a.3949c","name":"Ball valve 1","topic":"ballvalve","payload":"1","payloadType":"num","repeat":"","crontab":"","once":false,"x":207.35713958740234,"y":1345.7975066900253,"wires":[["797bf3cf.5dcc7c"]]},{"id":"797bf3cf.5dcc7c","type":"function","z":"ab94ed2a.3949c","name":"global set ballvalve","func":"global.set('ballvalve',msg.payload);\nreturn;","outputs":1,"noerr":0,"x":418.47618865966797,"y":1325.6428397893906,"wires":[[]]},{"id":"e8ed107.88e2af","type":"inject","z":"ab94ed2a.3949c","name":"Ball valve 0","topic":"ballvalve","payload":"0","payloadType":"num","repeat":"","crontab":"","once":true,"x":196.04757690429688,"y":1276.0237601995468,"wires":[["797bf3cf.5dcc7c"]]},{"id":"18dad2fc.7cec7d","type":"DataIn","z":"ab94ed2a.3949c","collection":"c16c24c5.336ba8","name":"","update":false,"path":"/BC","x":1236.6904582977295,"y":1772.2856439352036,"wires":[]},{"id":"3130a64f.09ce2a","type":"DataIn","z":"ab94ed2a.3949c","collection":"c16c24c5.336ba8","name":"","update":false,"path":"/BRperm","x":1237.690408706665,"y":1814.5713390111923,"wires":[]},{"id":"f802fc3c.9597a","type":"DataIn","z":"ab94ed2a.3949c","collection":"c16c24c5.336ba8","name":"","update":false,"path":"/BVC","x":1221.9761028289795,"y":1865.7142127752304,"wires":[]},{"id":"4e2374fd.295bec","type":"DataIn","z":"ab94ed2a.3949c","collection":"c16c24c5.336ba8","name":"","update":false,"path":"/BVperm","x":1222.9761219024658,"y":1909.999979376793,"wires":[]},{"id":"d5aec902.7b5f48","type":"DataIn","z":"ab94ed2a.3949c","collection":"c16c24c5.336ba8","name":"","update":false,"path":"/BC","x":1458.4285888671875,"y":882.5238155126572,"wires":[]},{"id":"ee904333.0b3d9","type":"DataIn","z":"ab94ed2a.3949c","collection":"c16c24c5.336ba8","name":"","update":false,"path":"/BRperm","x":1423.7142791748047,"y":951.9523648023605,"wires":[]},{"id":"68e41f9f.e8ea1","type":"DataIn","z":"ab94ed2a.3949c","collection":"c16c24c5.336ba8","name":"","update":false,"path":"/BVC","x":1477.2858581542969,"y":1204.0475934743881,"wires":[]},{"id":"700f53d9.2c3adc","type":"DataIn","z":"ab94ed2a.3949c","collection":"c16c24c5.336ba8","name":"","update":false,"path":"/BVperm","x":1429.7143077850342,"y":1274.0476840734482,"wires":[]},{"id":"c4b6167a.5a3e28","type":"DataOut","z":"ab94ed2a.3949c","collection":"c16c24c5.336ba8","name":"","path":"/BC","error":false,"x":769.714521408081,"y":291.6667331457138,"wires":[["7762f7a1.3671b8"]]},{"id":"39666831.a26b28","type":"DataOut","z":"ab94ed2a.3949c","collection":"c16c24c5.336ba8","name":"","path":"/BVperm","error":false,"x":771.8572521209717,"y":225.809601187706,"wires":[["57ceea8e.05f7a4","cc0d72a4.2ab96"]]},{"id":"90fb59fa.35ad68","type":"DataOut","z":"ab94ed2a.3949c","collection":"c16c24c5.336ba8","name":"","path":"/BVC","error":false,"x":767.8573017120361,"y":332.9524253606796,"wires":[["ed774bf9.ac9008"]]},{"id":"3670184c.2806e8","type":"change","z":"ab94ed2a.3949c","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/BRperm","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":625.8095169067383,"y":2384.285778403282,"wires":[["8f9e714a.5445f"]]},{"id":"1f8b66f9.44a1f9","type":"change","z":"ab94ed2a.3949c","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/BVperm","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":627.3809127807617,"y":2474.1428760290146,"wires":[["229ddeb.3157122"]]},{"id":"754acaf2.d714f4","type":"change","z":"ab94ed2a.3949c","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/BC","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":626.0952606201172,"y":2339.7143424749374,"wires":[["b9b2ed4c.61c6c"]]},{"id":"4af18653.a29a88","type":"change","z":"ab94ed2a.3949c","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/BVC","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":626.0951614379883,"y":2426.714274764061,"wires":[["437fc4a6.9f61ac"]]},{"id":"b9b2ed4c.61c6c","type":"DataOut","z":"ab94ed2a.3949c","collection":"c16c24c5.336ba8","name":"","path":"/BC","error":false,"x":808.2381744384766,"y":2338.428635954857,"wires":[["7d11c26e.d498ec"]]},{"id":"8f9e714a.5445f","type":"DataOut","z":"ab94ed2a.3949c","collection":"c16c24c5.336ba8","name":"","path":"/BRperm","error":false,"x":815.3809432983398,"y":2379.857201933861,"wires":[["cfbca378.79a28"]]},{"id":"229ddeb.3157122","type":"DataOut","z":"ab94ed2a.3949c","collection":"c16c24c5.336ba8","name":"","path":"/BVperm","error":false,"x":815.3808555603027,"y":2465.5715173482895,"wires":[["7011e7c7.8017f8"]]},{"id":"437fc4a6.9f61ac","type":"DataOut","z":"ab94ed2a.3949c","collection":"c16c24c5.336ba8","name":"","path":"/BVC","error":false,"x":805.3809394836426,"y":2422.7143455147743,"wires":[["b3dce212.37a9e"]]},{"id":"f5522975.584f28","type":"inject","z":"ab94ed2a.3949c","name":"","topic":"","payload":"startup","payloadType":"str","repeat":"","crontab":"","once":true,"x":280.3095169067383,"y":2329.285778403282,"wires":[["754acaf2.d714f4","3670184c.2806e8","4af18653.a29a88","1f8b66f9.44a1f9","fb94e1db.da26a","9e8d7ba4.3bb328"]]},{"id":"7d11c26e.d498ec","type":"function","z":"ab94ed2a.3949c","name":"global set blwrcount","func":"var blwrcount = global.set('blwrcount', msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":1017.8095169067383,"y":2336.285778403282,"wires":[[]]},{"id":"cfbca378.79a28","type":"function","z":"ab94ed2a.3949c","name":"global set brperm","func":"var brperm = global.set('brperm',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":1004.8095169067383,"y":2372.285778403282,"wires":[[]]},{"id":"7011e7c7.8017f8","type":"function","z":"ab94ed2a.3949c","name":"global set bvperm","func":"var bvperm = global.set('bvperm',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":1008.8095169067383,"y":2466.285778403282,"wires":[[]]},{"id":"b3dce212.37a9e","type":"function","z":"ab94ed2a.3949c","name":"global set bvcount","func":"var bvcount = global.set('bvcount', msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":1008.8095169067383,"y":2420.285778403282,"wires":[[]]},{"id":"4a6dc6bd.cf4218","type":"inject","z":"ab94ed2a.3949c","name":"1 SEC PULSE","topic":"","payload":"ddd","payloadType":"str","repeat":"1","crontab":"","once":true,"x":234.33338737487793,"y":264.3334583044052,"wires":[["f9cc06fb.f5bfd8","2ffc5c7f.5b78f4","6d376e22.0ef9a","16ca0938.defcb7","6ee7dbd8.52adf4"]]},{"id":"ef1a369b.088908","type":"comment","z":"ab94ed2a.3949c","name":"Send runtimes and counts to vis","info":"","x":747.8333320617676,"y":59,"wires":[]},{"id":"17eb90eb.1ff81f","type":"comment","z":"ab94ed2a.3949c","name":"Blower runtime and start counts","info":"","x":832.6904296875,"y":700.4761699438095,"wires":[]},{"id":"3558fc1a.ab3624","type":"comment","z":"ab94ed2a.3949c","name":"Ball Valve runtime and start counts","info":"","x":638.3333358764648,"y":1055.3333333730698,"wires":[]},{"id":"2d46562b.49e8ca","type":"comment","z":"ab94ed2a.3949c","name":"Factory reset runtimes and counts to 0","info":"","x":652.8332843780518,"y":1730.333355307579,"wires":[]},{"id":"dc6209c9.e747d8","type":"comment","z":"ab94ed2a.3949c","name":"Read runtimes and counts from DB on startup","info":"","x":648.6428527832031,"y":2278.285763144493,"wires":[]},{"id":"c594599e.460188","type":"comment","z":"ab94ed2a.3949c","name":"Alarm counts","info":"","x":645.8571281433105,"y":2851.666773200035,"wires":[]},{"id":"40cc784a.d5bca8","type":"inject","z":"ab94ed2a.3949c","name":"1 SEC PULSE","topic":"","payload":"ddd","payloadType":"str","repeat":"1","crontab":"","once":true,"x":232.99999618530273,"y":3008.0952056646347,"wires":[["d06f6664.af64b8","b911ff69.53d4a","7483242f.c93d0c","48a8dc58.3f48c4","2c45cf8a.279b9"]]},{"id":"d06f6664.af64b8","type":"function","z":"ab94ed2a.3949c","name":"get Phi alarm","func":"if (global.get ('permPhi') ==1 || global.get('warnPhi')==1)\n{\nmsg.payload = 1;\nreturn msg;\n} \nelse\nmsg.payload = 0;\nreturn msg;","outputs":1,"noerr":0,"x":484.41258239746094,"y":2912.0000022649765,"wires":[["38f72b7a.04ce94"]]},{"id":"38f72b7a.04ce94","type":"switch","z":"ab94ed2a.3949c","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"num"},{"t":"eq","v":"0","vt":"num"}],"checkall":"true","outputs":2,"x":643.4125823974609,"y":2908.0000022649765,"wires":[["626dbe0e.63ea6"],["d3dd7ad7.974558"]]},{"id":"626dbe0e.63ea6","type":"trigger","z":"ab94ed2a.3949c","op1":"1","op2":"0","op1type":"num","op2type":"str","duration":"0","extend":false,"units":"ms","reset":"reset","name":"","x":837.9125823974609,"y":2900.0000022649765,"wires":[["136da13c.d0b0ef"]]},{"id":"d3dd7ad7.974558","type":"change","z":"ab94ed2a.3949c","name":"","rules":[{"t":"set","p":"reset","pt":"msg","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":829.4125823974609,"y":2949.0000022649765,"wires":[["626dbe0e.63ea6"]]},{"id":"136da13c.d0b0ef","type":"function","z":"ab94ed2a.3949c","name":"global set Phicount","func":"var temp = global.get('Phicount') - (-1);\nvar Phicount = global.set('Phicount', temp);\nmsg.payload = global.get('Phicount');\nreturn msg;","outputs":1,"noerr":0,"x":1053.412582397461,"y":2908.0000022649765,"wires":[["880b971a.d6e0e8"]]},{"id":"880b971a.d6e0e8","type":"change","z":"ab94ed2a.3949c","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/PHC","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1278.412582397461,"y":2941.0000022649765,"wires":[["a3424b2.af18db8"]]},{"id":"a3424b2.af18db8","type":"DataIn","z":"ab94ed2a.3949c","collection":"c16c24c5.336ba8","name":"","update":false,"path":"/PHC","x":1447.8411712646484,"y":2940.8571799993515,"wires":[]},{"id":"b911ff69.53d4a","type":"function","z":"ab94ed2a.3949c","name":"get Plo alarm","func":"if (global.get ('permPlo') ==1 || global.get('warnPlo')==1)\n{\nmsg.payload = 1;\nreturn msg;\n} \nelse\nmsg.payload = 0;\nreturn msg;","outputs":1,"noerr":0,"x":464.28576278686523,"y":3002.380980849266,"wires":[["f3a71298.7502"]]},{"id":"f3a71298.7502","type":"switch","z":"ab94ed2a.3949c","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"num"},{"t":"eq","v":"0","vt":"num"}],"checkall":"true","outputs":2,"x":643.2857551574707,"y":2998.3809436559677,"wires":[["d66d8b49.8851f8"],["74b63929.402f38"]]},{"id":"d66d8b49.8851f8","type":"trigger","z":"ab94ed2a.3949c","op1":"1","op2":"0","op1type":"num","op2type":"str","duration":"0","extend":false,"units":"ms","reset":"reset","name":"","x":837.7857551574707,"y":2990.3809436559677,"wires":[["cdf61266.e5197"]]},{"id":"74b63929.402f38","type":"change","z":"ab94ed2a.3949c","name":"","rules":[{"t":"set","p":"reset","pt":"msg","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":829.2857551574707,"y":3039.3809436559677,"wires":[["d66d8b49.8851f8"]]},{"id":"cdf61266.e5197","type":"function","z":"ab94ed2a.3949c","name":"global set Plocount","func":"var temp = global.get('Plocount') - (-1);\nvar Plocount = global.set('Plocount', temp);\nmsg.payload = global.get('Plocount');\nreturn msg;","outputs":1,"noerr":0,"x":1053.2857551574707,"y":2998.3809436559677,"wires":[["5d070df9.d00c04"]]},{"id":"5d070df9.d00c04","type":"change","z":"ab94ed2a.3949c","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/PLC","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1278.2857551574707,"y":3031.3809436559677,"wires":[["ce2ba986.239a18"]]},{"id":"ce2ba986.239a18","type":"DataIn","z":"ab94ed2a.3949c","collection":"c16c24c5.336ba8","name":"","update":false,"path":"/PLC","x":1447.7143440246582,"y":3031.2381213903427,"wires":[]},{"id":"7483242f.c93d0c","type":"function","z":"ab94ed2a.3949c","name":"get permDirt alarm","func":"if (global.get('permDirt') ==1 || global.get('warnDirt')==1)\n{\nmsg.payload = 1;\nreturn msg;\n} \nelse\nmsg.payload = 0;\nreturn msg;","outputs":1,"noerr":0,"x":471.71426010131836,"y":3087.52381169796,"wires":[["7707a257.96283c"]]},{"id":"7707a257.96283c","type":"switch","z":"ab94ed2a.3949c","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"num"},{"t":"eq","v":"0","vt":"num"}],"checkall":"true","outputs":2,"x":642.1428718566895,"y":3084.952417731285,"wires":[["6447713e.e4f4e"],["4185c7cf.7468d8"]]},{"id":"6447713e.e4f4e","type":"trigger","z":"ab94ed2a.3949c","op1":"1","op2":"0","op1type":"num","op2type":"str","duration":"0","extend":false,"units":"ms","reset":"reset","name":"","x":840.9286003112793,"y":3079.80959546566,"wires":[["c2f6ce39.0b829"]]},{"id":"4185c7cf.7468d8","type":"change","z":"ab94ed2a.3949c","name":"","rules":[{"t":"set","p":"reset","pt":"msg","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":832.4286003112793,"y":3128.80959546566,"wires":[["6447713e.e4f4e"]]},{"id":"c2f6ce39.0b829","type":"function","z":"ab94ed2a.3949c","name":"global set Dirtcount","func":"var temp = global.get('Dirtcount') - (-1);\nvar Dirtcount = global.set('Dirtcount', temp);\nmsg.payload = global.get('Dirtcount');\nreturn msg;","outputs":1,"noerr":0,"x":1056.4286003112793,"y":3087.80959546566,"wires":[["2c1a9bb1.b19c84"]]},{"id":"2c1a9bb1.b19c84","type":"change","z":"ab94ed2a.3949c","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/DC","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1281.4286003112793,"y":3120.80959546566,"wires":[["8a9a3e48.3aed8"]]},{"id":"8a9a3e48.3aed8","type":"DataIn","z":"ab94ed2a.3949c","collection":"c16c24c5.336ba8","name":"","update":false,"path":"/DC","x":1450.8571891784668,"y":3120.666773200035,"wires":[]},{"id":"48a8dc58.3f48c4","type":"function","z":"ab94ed2a.3949c","name":"get timedout alarm","func":"if (global.get ('timedout_alarm') ==1 || global.get('warn_timedout')==1)\n{\nmsg.payload = 1;\nreturn msg;\n} \nelse\nmsg.payload = 0;\nreturn msg;","outputs":1,"noerr":0,"x":463.142879486084,"y":3177.5239251852036,"wires":[["6d230f9a.cab3"]]},{"id":"6d230f9a.cab3","type":"switch","z":"ab94ed2a.3949c","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"num"},{"t":"eq","v":"0","vt":"num"}],"checkall":"true","outputs":2,"x":639.2857398986816,"y":3179.2382119894028,"wires":[["de1d76cd.343868"],["3932796d.cb31b6"]]},{"id":"de1d76cd.343868","type":"trigger","z":"ab94ed2a.3949c","op1":"1","op2":"0","op1type":"num","op2type":"str","duration":"0","extend":false,"units":"ms","reset":"reset","name":"","x":833.7857398986816,"y":3171.2382119894028,"wires":[["36a043.fbfbcfbe"]]},{"id":"3932796d.cb31b6","type":"change","z":"ab94ed2a.3949c","name":"","rules":[{"t":"set","p":"reset","pt":"msg","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":825.2857398986816,"y":3220.2382119894028,"wires":[["de1d76cd.343868"]]},{"id":"36a043.fbfbcfbe","type":"function","z":"ab94ed2a.3949c","name":"global set Timedoutcount","func":"var temp = global.get('Timedoutcount') - (-1);\nvar Timedoutcount = global.set('Timedoutcount', temp);\nmsg.payload = global.get('Timedoutcount');\nreturn msg;","outputs":1,"noerr":0,"x":1059.2857704162598,"y":3174.952426314354,"wires":[["5bf3f8cf.f29d88"]]},{"id":"5bf3f8cf.f29d88","type":"change","z":"ab94ed2a.3949c","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/TOC","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1288.5715446472168,"y":3219.3810666799545,"wires":[["29924064.d01db"]]},{"id":"29924064.d01db","type":"DataIn","z":"ab94ed2a.3949c","collection":"c16c24c5.336ba8","name":"","update":false,"path":"/TOC","x":1453.714225769043,"y":3217.8097776174545,"wires":[]},{"id":"9e8d7ba4.3bb328","type":"change","z":"ab94ed2a.3949c","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/PLC","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":625.1428527832031,"y":2556.571407675743,"wires":[["dfa15372.948ae"]]},{"id":"828fb7e9.a14f58","type":"change","z":"ab94ed2a.3949c","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/TOC","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":628.7142486572266,"y":2664.428627371788,"wires":[["d702c5b2.d1c5d8"]]},{"id":"fb94e1db.da26a","type":"change","z":"ab94ed2a.3949c","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/PHC","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":621.4285888671875,"y":2516.000118613243,"wires":[["f237e93f.32a488"]]},{"id":"508e227a.c9c3ac","type":"change","z":"ab94ed2a.3949c","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/DC","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":627.4284973144531,"y":2617.0000261068344,"wires":[["f0865ff8.10fae"]]},{"id":"f237e93f.32a488","type":"DataOut","z":"ab94ed2a.3949c","collection":"c16c24c5.336ba8","name":"","path":"/PHC","error":false,"x":807.5715026855469,"y":2516.714474081993,"wires":[["2a3dda1c.d47ee6"]]},{"id":"dfa15372.948ae","type":"DataOut","z":"ab94ed2a.3949c","collection":"c16c24c5.336ba8","name":"","path":"/PLC","error":false,"x":806.7142639160156,"y":2560.142940878868,"wires":[["fd9d597d.9681d8"]]},{"id":"d702c5b2.d1c5d8","type":"DataOut","z":"ab94ed2a.3949c","collection":"c16c24c5.336ba8","name":"","path":"/TOC","error":false,"x":806.7141914367676,"y":2655.857268691063,"wires":[["d50f51ec.fb4b5"]]},{"id":"f0865ff8.10fae","type":"DataOut","z":"ab94ed2a.3949c","collection":"c16c24c5.336ba8","name":"","path":"/DC","error":false,"x":806.7142753601074,"y":2613.0000968575478,"wires":[["ff720c57.29bfa"]]},{"id":"2a3dda1c.d47ee6","type":"function","z":"ab94ed2a.3949c","name":"global set Phicount","func":"var Phicount = global.set('Phicount', msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":1009.1428527832031,"y":2512.571407675743,"wires":[[]]},{"id":"fd9d597d.9681d8","type":"function","z":"ab94ed2a.3949c","name":"global set Plocount","func":"var Plocount = global.set('Plocount',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":1006.1428527832031,"y":2558.571407675743,"wires":[[]]},{"id":"d50f51ec.fb4b5","type":"function","z":"ab94ed2a.3949c","name":"global set Timedoutcount","func":"var Timedoutcount = global.set('Timedoutcount',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":1008.7142791748047,"y":2656.57148206234,"wires":[[]]},{"id":"ff720c57.29bfa","type":"function","z":"ab94ed2a.3949c","name":"global set Dirtcount","func":"var Dirtcount = global.set('Dirtcount', msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":1010.1428527832031,"y":2610.5715297460556,"wires":[[]]},{"id":"a76b6504.0433b8","type":"change","z":"ab94ed2a.3949c","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/PHC","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1014.1904621124268,"y":1947.9047454595566,"wires":[["61695d81.3516c4"]]},{"id":"61695d81.3516c4","type":"DataIn","z":"ab94ed2a.3949c","collection":"c16c24c5.336ba8","name":"","update":false,"path":"/PHC","x":1196.4762439727783,"y":1952.0475858449936,"wires":[]},{"id":"ba62f20a.2ef7c","type":"change","z":"ab94ed2a.3949c","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/PLC","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1018.9207592010498,"y":1996.2856744527817,"wires":[["5c69f1f0.9474f"]]},{"id":"5c69f1f0.9474f","type":"DataIn","z":"ab94ed2a.3949c","collection":"c16c24c5.336ba8","name":"","update":false,"path":"/PLC","x":1191.2065029144287,"y":2000.4285663366318,"wires":[]},{"id":"2c491f58.c9a2e","type":"change","z":"ab94ed2a.3949c","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/DC","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1024.634916305542,"y":2047.714313864708,"wires":[["225d0650.10b15a"]]},{"id":"225d0650.10b15a","type":"DataIn","z":"ab94ed2a.3949c","collection":"c16c24c5.336ba8","name":"","update":false,"path":"/DC","x":1194.0635051727295,"y":2047.571491599083,"wires":[]},{"id":"f5cde804.ed7d58","type":"change","z":"ab94ed2a.3949c","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/TOC","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1023.2064800262451,"y":2090.5714362859726,"wires":[["c43e982a.68de68"]]},{"id":"c43e982a.68de68","type":"DataIn","z":"ab94ed2a.3949c","collection":"c16c24c5.336ba8","name":"","update":false,"path":"/TOC","x":1188.3491611480713,"y":2089.0001472234726,"wires":[]},{"id":"5ec5d6ee.05de28","type":"function","z":"ab94ed2a.3949c","name":"global get Phicount","func":"msg.payload = global.get('Phicount');\nmsg.topic = 'Phicount';\nreturn msg;","outputs":1,"noerr":0,"x":738.4761333465576,"y":1953.6191238164902,"wires":[["a76b6504.0433b8"]]},{"id":"963dddf3.3d90e","type":"function","z":"ab94ed2a.3949c","name":"global get Plocount","func":"msg.payload = global.get('Plocount');\nmsg.topic = 'Plocount';\nreturn msg;","outputs":1,"noerr":0,"x":737.9047183990479,"y":1996.7620157003403,"wires":[["ba62f20a.2ef7c"]]},{"id":"3b5a1e04.21c3f2","type":"function","z":"ab94ed2a.3949c","name":"global get Dirtcount","func":"msg.payload = global.get('Dirtcount');\nmsg.topic = 'Dirtcount';\nreturn msg;","outputs":1,"noerr":0,"x":730.4761600494385,"y":2038.047710776329,"wires":[["2c491f58.c9a2e"]]},{"id":"bd41dbf3.b87ab8","type":"function","z":"ab94ed2a.3949c","name":"global get Timedoutcount","func":"msg.payload = global.get('Timedoutcount');\nmsg.topic = 'Timedoutcount';\nreturn msg;","outputs":1,"noerr":0,"x":753.4761829376221,"y":2075.7618926763535,"wires":[["f5cde804.ed7d58"]]},{"id":"336993a4.021a1c","type":"change","z":"ab94ed2a.3949c","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/PLC","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":582.9999904632568,"y":419.6666406393051,"wires":[["fd0ac0dc.b321b"]]},{"id":"b3bd4882.126f38","type":"change","z":"ab94ed2a.3949c","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/TOC","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":584.5713863372803,"y":509.52373826503754,"wires":[["5653370b.bebc88"]]},{"id":"6ee7dbd8.52adf4","type":"change","z":"ab94ed2a.3949c","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/PHC","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":583.2857341766357,"y":375.0952047109604,"wires":[["a84fa10.22c8e6"]]},{"id":"8119ae7d.f6b6e","type":"change","z":"ab94ed2a.3949c","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/DC","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":583.2856349945068,"y":462.0951370000839,"wires":[["b4d861af.bba31"]]},{"id":"a84fa10.22c8e6","type":"DataOut","z":"ab94ed2a.3949c","collection":"c16c24c5.336ba8","name":"","path":"/PHC","error":false,"x":765.4286479949951,"y":373.8094981908798,"wires":[["8eb6545d.4a14a8"]]},{"id":"fd0ac0dc.b321b","type":"DataOut","z":"ab94ed2a.3949c","collection":"c16c24c5.336ba8","name":"","path":"/PLC","error":false,"x":762.5714168548584,"y":415.2380641698837,"wires":[["14b2756a.bb578b"]]},{"id":"5653370b.bebc88","type":"DataOut","z":"ab94ed2a.3949c","collection":"c16c24c5.336ba8","name":"","path":"/TOC","error":false,"x":762.5713520050049,"y":508.95237958431244,"wires":[["92350170.a48d9"]]},{"id":"b4d861af.bba31","type":"DataOut","z":"ab94ed2a.3949c","collection":"c16c24c5.336ba8","name":"","path":"/DC","error":false,"x":762.5714130401611,"y":458.0952077507973,"wires":[["5441023.fc482fc"]]},{"id":"14b2756a.bb578b","type":"change","z":"ab94ed2a.3949c","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"Plocount","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":946.3333034515381,"y":414.6666406393051,"wires":[["2327aa94.145eb6"]]},{"id":"92350170.a48d9","type":"change","z":"ab94ed2a.3949c","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"Timedoutcount","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":945.5832958221436,"y":505.27377355098724,"wires":[["2327aa94.145eb6"]]},{"id":"8eb6545d.4a14a8","type":"change","z":"ab94ed2a.3949c","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"Phicount","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":945.6189937591553,"y":373.9523357152939,"wires":[["2327aa94.145eb6"]]},{"id":"5441023.fc482fc","type":"change","z":"ab94ed2a.3949c","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"Dirtcount","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":946.297513961792,"y":458.7022932767868,"wires":[["2327aa94.145eb6"]]},{"id":"2327aa94.145eb6","type":"vis in","z":"ab94ed2a.3949c","language":"en","x":1287.9444408416748,"y":353.00000035762787,"wires":[[]]},{"id":"57ceea8e.05f7a4","type":"range","z":"ab94ed2a.3949c","minin":"0","maxin":"3600","minout":"0","maxout":"1","action":"scale","round":true,"name":"","x":918.4999523162842,"y":256.00000035762787,"wires":[["6b732908.8c0038"]]},{"id":"f80cb67f.427ef8","type":"range","z":"ab94ed2a.3949c","minin":"0","maxin":"3600","minout":"0","maxout":"1","action":"scale","round":true,"name":"","x":916.0000133514404,"y":174.00000035762787,"wires":[["2257eef4.cc4752"]]},{"id":"2257eef4.cc4752","type":"change","z":"ab94ed2a.3949c","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"brpermhrs","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1112.5717296600342,"y":168.27388036251068,"wires":[["2327aa94.145eb6","eeb09d6c.deec8"]]},{"id":"ecdb847f.323978","type":"change","z":"ab94ed2a.3949c","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"bvpermmins","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1267.8216075897217,"y":216.8810123205185,"wires":[["2327aa94.145eb6"]]},{"id":"259f70b5.0c34e","type":"vis in","z":"ab94ed2a.3949c","language":"en","x":159.4998836517334,"y":1833.9999850988388,"wires":[["935492bb.d1279","a4ab0b23.6bd3d8","2a71cfc.f29f43","d173ca11.71fb28","48977b63.906dc4"]]},{"id":"98c3a7c4.58ce08","type":"change","z":"ab94ed2a.3949c","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"brpermmins","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1386.9999523162842,"y":165.99995458126068,"wires":[["2327aa94.145eb6","2d5432ff.75cf8e"]]},{"id":"8591ba1f.319f78","type":"delay","z":"ab94ed2a.3949c","name":"","pauseType":"delay","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":300.4999694824219,"y":1032.999961256981,"wires":[["30fabed8.b29e02","c691908b.628f8","10fe32e.44d99cd"]]},{"id":"232df399.47a82c","type":"function","z":"ab94ed2a.3949c","name":"calculate minutes from seconds","func":"var originalval = msg.payload;\nvar var1 = \"\";\n\nvar1 = parseFloat(originalval/3600).toFixed(5);\nvar2 = Math.trunc(originalval/3600);\nvar3 = var1 - var2;\nvar4 = Math.trunc(var3*60);\nmsg.payload = var4;\n\n\nreturn msg;","outputs":1,"noerr":0,"x":1112,"y":120.99995362758636,"wires":[["98c3a7c4.58ce08"]]},{"id":"cc0d72a4.2ab96","type":"function","z":"ab94ed2a.3949c","name":"calculate minutes from seconds","func":"var originalval = msg.payload;\nvar var1 = \"\";\n\nvar1 = parseFloat(originalval/3600).toFixed(5);\nvar2 = Math.trunc(originalval/3600);\nvar3 = var1 - var2;\nvar4 = Math.trunc(var3*60);\nmsg.payload = var4;\n\n\nreturn msg;","outputs":1,"noerr":0,"x":991.9999523162842,"y":217.99995458126068,"wires":[["ecdb847f.323978"]]},{"id":"c5006039.e8f73","type":"change","z":"ab94ed2a.3949c","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/CVperm","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":591.9999237060547,"y":634.9999316930771,"wires":[["d571d055.0eb25"]]},{"id":"d571d055.0eb25","type":"DataOut","z":"ab94ed2a.3949c","collection":"c16c24c5.336ba8","name":"","path":"/CVperm","error":false,"x":776.5713348388672,"y":632.5713428258896,"wires":[["f9b777ee.15add8","2b3e6ab2.9f62d6"]]},{"id":"f9b777ee.15add8","type":"range","z":"ab94ed2a.3949c","minin":"0","maxin":"3600","minout":"0","maxout":"1","action":"scale","round":true,"name":"","x":938.7140274047852,"y":619.4760631322861,"wires":[["caf1f8bc.e18cf8"]]},{"id":"caf1f8bc.e18cf8","type":"change","z":"ab94ed2a.3949c","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"cvpermhrs","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1089.2857666015625,"y":617.7499336004257,"wires":[["2327aa94.145eb6"]]},{"id":"2b3e6ab2.9f62d6","type":"function","z":"ab94ed2a.3949c","name":"calculate minutes from seconds","func":"var originalval = msg.payload;\nvar var1 = \"\";\n\nvar1 = parseFloat(originalval/3600).toFixed(5);\nvar2 = Math.trunc(originalval/3600);\nvar3 = var1 - var2;\nvar4 = Math.trunc(var3*60);\nmsg.payload = var4;\n\n\nreturn msg;","outputs":1,"noerr":0,"x":1014.7140274047852,"y":656.4760164022446,"wires":[["94efee70.f1553"]]},{"id":"94efee70.f1553","type":"change","z":"ab94ed2a.3949c","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"cvpermmins","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1245.7141075134277,"y":652.4760059118271,"wires":[["2327aa94.145eb6"]]},{"id":"10fe32e.44d99cd","type":"function","z":"ab94ed2a.3949c","name":"global get conveyor","func":"if (global.get ('conveyor') == 1 ) {\nmsg.payload = 1;\nreturn msg;\n} else\nmsg.payload = 0;\nreturn msg;","outputs":1,"noerr":0,"x":366.0000057220459,"y":1506.0000013113022,"wires":[["213ed264.38fdde"]]},{"id":"9d551f66.a7107","type":"change","z":"ab94ed2a.3949c","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/CVperm","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1266.143087387085,"y":1590.6310552358627,"wires":[["5b3e9355.19566c"]]},{"id":"96d2b801.43b7e8","type":"function","z":"ab94ed2a.3949c","name":"global set cvcount","func":"var temp = global.get('cvcount') - (-1);\nvar cvcount = global.set('cvcount', temp);\nmsg.payload = global.get('cvcount');\nreturn msg;","outputs":1,"noerr":0,"x":1100.250020980835,"y":1507.0000108480453,"wires":[["8efefd2d.4123c"]]},{"id":"8efefd2d.4123c","type":"change","z":"ab94ed2a.3949c","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/CVC","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1332.0000286102295,"y":1525.0000108480453,"wires":[["a0405eba.e29d9"]]},{"id":"db0164bc.37b478","type":"counter","z":"ab94ed2a.3949c","inc":1,"name":"","x":753.0000133514404,"y":1449.2500108480453,"wires":[["5e662d54.c4db04"]]},{"id":"e23da3.ffab926","type":"change","z":"ab94ed2a.3949c","name":"","rules":[{"t":"set","p":"reset","pt":"msg","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":938.0000133514404,"y":1389.2500108480453,"wires":[["db0164bc.37b478"]]},{"id":"f59ec65e.ab9c38","type":"trigger","z":"ab94ed2a.3949c","op1":"1","op2":"0","op1type":"num","op2type":"str","duration":"0","extend":false,"units":"ms","reset":"reset","name":"","x":856.0000133514404,"y":1490.2500108480453,"wires":[["96d2b801.43b7e8"]]},{"id":"adfece77.73b1a","type":"change","z":"ab94ed2a.3949c","name":"","rules":[{"t":"set","p":"reset","pt":"msg","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":829.5000133514404,"y":1528.2500108480453,"wires":[["f59ec65e.ab9c38"]]},{"id":"c82230a5.33a07","type":"trigger","z":"ab94ed2a.3949c","op1":"0","op2":"0","op1type":"num","op2type":"str","duration":"0","extend":false,"units":"ms","reset":"reset","name":"","x":750.5000133514404,"y":1567.2500108480453,"wires":[["c7411bfd.a20358","439dc7be.3f47f8"]]},{"id":"580fcb83.f1fcb4","type":"change","z":"ab94ed2a.3949c","name":"","rules":[{"t":"set","p":"reset","pt":"msg","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":666.5000133514404,"y":1620.2500108480453,"wires":[["c82230a5.33a07"]]},{"id":"213ed264.38fdde","type":"switch","z":"ab94ed2a.3949c","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"num"},{"t":"eq","v":"0","vt":"num"}],"checkall":"true","outputs":2,"x":549.5000133514404,"y":1505.2500108480453,"wires":[["f59ec65e.ab9c38","db0164bc.37b478","580fcb83.f1fcb4","1ee15479.9b3c5c"],["c82230a5.33a07","adfece77.73b1a"]]},{"id":"c7411bfd.a20358","type":"function","z":"ab94ed2a.3949c","name":"global set cvperm","func":"var temp = global.get('cvperm') -( -global.get('cvtemp')); \nvar cvperm = global.set('cvperm',temp);\nmsg.payload = global.get('cvperm');\nreturn msg;","outputs":1,"noerr":0,"x":1003.5000133514404,"y":1596.2500108480453,"wires":[["9d551f66.a7107"]]},{"id":"439dc7be.3f47f8","type":"function","z":"ab94ed2a.3949c","name":"global set cvtemp","func":"var cvtemp = global.set('cvtemp',0);\nreturn msg;","outputs":1,"noerr":0,"x":996.5000133514404,"y":1653.2500108480453,"wires":[["e23da3.ffab926"]]},{"id":"7d25ba01.ce7094","type":"inject","z":"ab94ed2a.3949c","name":"conveyor 1","topic":"conveyor","payload":"1","payloadType":"num","repeat":"","crontab":"","once":false,"x":231.64289665222168,"y":1665.6070722341537,"wires":[["a5ef1d21.0be25"]]},{"id":"a5ef1d21.0be25","type":"function","z":"ab94ed2a.3949c","name":"global set conveyor","func":"global.set('conveyor',msg.payload);\nreturn;","outputs":1,"noerr":0,"x":452.7619457244873,"y":1645.452405333519,"wires":[[]]},{"id":"db89bc7b.08302","type":"inject","z":"ab94ed2a.3949c","name":"conveyor 0","topic":"conveyor","payload":"0","payloadType":"num","repeat":"","crontab":"","once":true,"x":230.3333339691162,"y":1595.8333257436752,"wires":[["a5ef1d21.0be25"]]},{"id":"a0405eba.e29d9","type":"DataIn","z":"ab94ed2a.3949c","collection":"c16c24c5.336ba8","name":"","update":false,"path":"/CVC","x":1511.5716152191162,"y":1523.8571590185165,"wires":[]},{"id":"5b3e9355.19566c","type":"DataIn","z":"ab94ed2a.3949c","collection":"c16c24c5.336ba8","name":"","update":false,"path":"/CVperm","x":1464.0000648498535,"y":1593.8572496175766,"wires":[]},{"id":"cdaa146b.16f518","type":"comment","z":"ab94ed2a.3949c","name":"Conveyor runtime and start counts","info":"","x":672.6190929412842,"y":1375.1428989171982,"wires":[]},{"id":"2c45cf8a.279b9","type":"function","z":"ab94ed2a.3949c","name":"get hiductpress alarm","func":"if (global.get ('hiductpress') === 1)\n{\nmsg.payload = 1;\nreturn msg;\n} \nelse\nmsg.payload = 0;\nreturn msg;","outputs":1,"noerr":0,"x":464.6665802001953,"y":3267.333313345909,"wires":[["2c820d26.04e5b2"]]},{"id":"2c820d26.04e5b2","type":"switch","z":"ab94ed2a.3949c","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"num"},{"t":"eq","v":"0","vt":"num"}],"checkall":"true","outputs":2,"x":630.809440612793,"y":3269.0476001501083,"wires":[["ad056a72.bd1158"],["afff5765.1dd818"]]},{"id":"afff5765.1dd818","type":"change","z":"ab94ed2a.3949c","name":"","rules":[{"t":"set","p":"reset","pt":"msg","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":816.809440612793,"y":3310.0476001501083,"wires":[["ad056a72.bd1158"]]},{"id":"ad056a72.bd1158","type":"trigger","z":"ab94ed2a.3949c","op1":"1","op2":"0","op1type":"num","op2type":"str","duration":"0","extend":false,"units":"ms","reset":"reset","name":"","x":825.309440612793,"y":3261.0476001501083,"wires":[["6bccd6df.6e0d08"]]},{"id":"6bccd6df.6e0d08","type":"function","z":"ab94ed2a.3949c","name":"global set hdpcount","func":"var temp = global.get('hdpcount') - (-1);\nvar hiductpress = global.set('hdpcount', temp);\nmsg.payload = global.get('hdpcount');\nreturn msg;","outputs":1,"noerr":0,"x":1040.809471130371,"y":3264.7618144750595,"wires":[["5a97e6b2.8f6898"]]},{"id":"5a97e6b2.8f6898","type":"change","z":"ab94ed2a.3949c","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/HDC","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1280.0952453613281,"y":3309.19045484066,"wires":[["983f5291.5c404"]]},{"id":"983f5291.5c404","type":"DataIn","z":"ab94ed2a.3949c","collection":"c16c24c5.336ba8","name":"","update":false,"path":"/HDC","x":1445.2379264831543,"y":3307.61916577816,"wires":[]},{"id":"1bce9fba.5ae6b","type":"change","z":"ab94ed2a.3949c","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/HDC","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":624.6666564941406,"y":2716.666622519493,"wires":[["24e5e344.bcaa7c"]]},{"id":"24e5e344.bcaa7c","type":"DataOut","z":"ab94ed2a.3949c","collection":"c16c24c5.336ba8","name":"","path":"/HDC","error":false,"x":802.6665992736816,"y":2708.095263838768,"wires":[["4a24a28d.ff06bc"]]},{"id":"4a24a28d.ff06bc","type":"function","z":"ab94ed2a.3949c","name":"global set hdpcount","func":"var hdpcount = global.set('hdpcount',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":994.6666870117188,"y":2708.809477210045,"wires":[[]]},{"id":"8e5b3958.ddfc58","type":"inject","z":"ab94ed2a.3949c","name":"","topic":"","payload":"startup","payloadType":"str","repeat":"","crontab":"","once":true,"x":308.6666564941406,"y":2662.666622519493,"wires":[["508e227a.c9c3ac","828fb7e9.a14f58","1bce9fba.5ae6b","49c0c9b3.f7a088","8c52de97.0eec7"]]},{"id":"19f7c06b.78728","type":"function","z":"ab94ed2a.3949c","name":"global get hdpcount","func":"msg.payload = global.get('hdpcount');\nmsg.topic = 'hdpcount';\nreturn msg;","outputs":1,"noerr":0,"x":749.9998798370361,"y":2125.9999812841415,"wires":[["99a2f606.1840f8"]]},{"id":"99a2f606.1840f8","type":"change","z":"ab94ed2a.3949c","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/HDC","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1029.7301769256592,"y":2140.8095248937607,"wires":[["3cdd2968.5eff36"]]},{"id":"3cdd2968.5eff36","type":"DataIn","z":"ab94ed2a.3949c","collection":"c16c24c5.336ba8","name":"","update":false,"path":"/HDC","x":1194.8728580474854,"y":2139.2382358312607,"wires":[]},{"id":"70719220.1ce8ec","type":"change","z":"ab94ed2a.3949c","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/HDC","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":589.9999523162842,"y":551.9999545812607,"wires":[["d792a8c6.e3c6a8"]]},{"id":"d792a8c6.e3c6a8","type":"DataOut","z":"ab94ed2a.3949c","collection":"c16c24c5.336ba8","name":"","path":"/HDC","error":false,"x":767.9999179840088,"y":551.4285959005356,"wires":[["82abf26b.9d0ba"]]},{"id":"82abf26b.9d0ba","type":"change","z":"ab94ed2a.3949c","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"hdpcount","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":948.0118408203125,"y":545.7500137090683,"wires":[["2327aa94.145eb6"]]},{"id":"40fa13b.5612aec","type":"inject","z":"ab94ed2a.3949c","name":"1 SEC PULSE","topic":"","payload":"ddd","payloadType":"str","repeat":"1","crontab":"","once":true,"x":235.99995231628418,"y":505.9999545812607,"wires":[["336993a4.021a1c","8119ae7d.f6b6e","b3bd4882.126f38","70719220.1ce8ec","c5006039.e8f73","a5e0ad3f.cf98d"]]},{"id":"a9102036.e197a","type":"DataOut","z":"ab94ed2a.3949c","collection":"c16c24c5.336ba8","name":"","path":"/BRperm","error":false,"x":771.8572521209717,"y":164.09529149532318,"wires":[["f80cb67f.427ef8","232df399.47a82c","c67659eb.a15878"]]},{"id":"7b96cbd.513ba34","type":"function","z":"ab94ed2a.3949c","name":"global get cvcount","func":"msg.payload = global.get('cvcount');\nmsg.topic = 'cvcount';\nreturn msg;","outputs":1,"noerr":0,"x":737.7614593505859,"y":2175.4091209173203,"wires":[["d04750b9.c7b1c"]]},{"id":"b7a76925.7c87f8","type":"function","z":"ab94ed2a.3949c","name":"global get cvperm","func":"msg.payload = global.get('cvperm');\nmsg.topic = 'cvperm';\nreturn msg;","outputs":1,"noerr":0,"x":732.1900787353516,"y":2215.2189267873764,"wires":[["4c441858.3cc7d8"]]},{"id":"d04750b9.c7b1c","type":"change","z":"ab94ed2a.3949c","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/CVC","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":989.7615089416504,"y":2182.7425988912582,"wires":[["df4b510f.7bf79"]]},{"id":"4c441858.3cc7d8","type":"change","z":"ab94ed2a.3949c","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/CVperm","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":971.7615089416504,"y":2225.7425988912582,"wires":[["ffb6a2bb.a904a"]]},{"id":"df4b510f.7bf79","type":"DataIn","z":"ab94ed2a.3949c","collection":"c16c24c5.336ba8","name":"","update":false,"path":"/CVC","x":1176.261459350586,"y":2179.8855575323105,"wires":[]},{"id":"ffb6a2bb.a904a","type":"DataIn","z":"ab94ed2a.3949c","collection":"c16c24c5.336ba8","name":"","update":false,"path":"/CVperm","x":1177.2614097595215,"y":2222.1712526082993,"wires":[]},{"id":"49c0c9b3.f7a088","type":"change","z":"ab94ed2a.3949c","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/CVC","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":617.8787536621094,"y":2757.4545558691025,"wires":[["f345979a.8e03c8"]]},{"id":"f345979a.8e03c8","type":"DataOut","z":"ab94ed2a.3949c","collection":"c16c24c5.336ba8","name":"","path":"/CVC","error":false,"x":800.0216674804688,"y":2756.168849349022,"wires":[["4865d6c4.b02978"]]},{"id":"4865d6c4.b02978","type":"function","z":"ab94ed2a.3949c","name":"global set cvcount","func":"var cvcount = global.set('cvcount', msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":999.5930099487305,"y":2754.025991797447,"wires":[[]]},{"id":"9649db7f.4928f8","type":"function","z":"ab94ed2a.3949c","name":"global set cvperm","func":"var cvperm = global.set('cvperm',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":996.5930099487305,"y":2790.025991797447,"wires":[[]]},{"id":"777f3691.a7bf98","type":"DataOut","z":"ab94ed2a.3949c","collection":"c16c24c5.336ba8","name":"","path":"/CVperm","error":false,"x":807.164436340332,"y":2797.597415328026,"wires":[["9649db7f.4928f8"]]},{"id":"8c52de97.0eec7","type":"change","z":"ab94ed2a.3949c","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/CVperm","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":617.5930099487305,"y":2802.025991797447,"wires":[["777f3691.a7bf98"]]},{"id":"a4ab0b23.6bd3d8","type":"switch","z":"ab94ed2a.3949c","name":"reset blower runtime","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"brreset","vt":"str"}],"checkall":"true","outputs":1,"x":248.8484649658203,"y":1986.1571925878525,"wires":[["2c11c230.909e5e"]]},{"id":"2c11c230.909e5e","type":"function","z":"ab94ed2a.3949c","name":"Reset blower runtime","func":"var brtemp = global.set ('brtemp', 0);\nvar brperm = global.set ('brperm', 0);\nvar blwrcount = global.set ('blwrcount', 0);\nvar brreset = global.set ('brreset', 0);\nreturn msg; \n","outputs":"1","noerr":0,"x":479.8484649658203,"y":1986.1571925878525,"wires":[["c8623cf9.fd38e","faec107d.879a9"]]},{"id":"2a71cfc.f29f43","type":"switch","z":"ab94ed2a.3949c","name":"reset ball valve runtime","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"bvreset","vt":"str"}],"checkall":"true","outputs":1,"x":254.8484649658203,"y":2033.1571925878525,"wires":[["dff38214.945c7"]]},{"id":"dff38214.945c7","type":"function","z":"ab94ed2a.3949c","name":"Reset ball valve runtime","func":"var bvtemp = global.set ('bvtemp', 0);\nvar bvperm = global.set ('bvperm', 0);\nvar bvcount = global.set ('bvcount', 0);\nvar bvreset = global.set ('bvreset', 0);\nreturn msg; \n","outputs":"1","noerr":0,"x":485.8484649658203,"y":2033.1571925878525,"wires":[["98aae737.823608","439a2944.eca858"]]},{"id":"d173ca11.71fb28","type":"switch","z":"ab94ed2a.3949c","name":"reset conveyor runtime","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"cvreset","vt":"str"}],"checkall":"true","outputs":1,"x":240.8484649658203,"y":2078.1571925878525,"wires":[["e291f40a.1ce948"]]},{"id":"e291f40a.1ce948","type":"function","z":"ab94ed2a.3949c","name":"Reset conveyor runtime","func":"var cvtemp = global.set ('cvtemp', 0);\nvar cvperm = global.set ('cvperm', 0);\nvar cvcount = global.set ('cvcount', 0);\nvar cvreset = global.set ('cvreset', 0);\nreturn msg; \n","outputs":"1","noerr":0,"x":481.8484649658203,"y":2078.1571925878525,"wires":[["7b96cbd.513ba34","b7a76925.7c87f8"]]},{"id":"48977b63.906dc4","type":"switch","z":"ab94ed2a.3949c","name":"reset alarm counts","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"acreset","vt":"str"}],"checkall":"true","outputs":1,"x":227.8484649658203,"y":2124.1571925878525,"wires":[["3db8bdb6.09e392"]]},{"id":"3db8bdb6.09e392","type":"function","z":"ab94ed2a.3949c","name":"Reset alarm counts","func":"var Phicount = global.set ('Phicount', 0);\nvar Plocount = global.set ('Plocount', 0);\nvar Dirtcount = global.set ('Dirtcount', 0);\nvar Timedoutcount = global.set ('Timedoutcount', 0);\nvar hdpcount = global.set ('hdpcount', 0);\nvar acreset = global.set ('acreset', 0);\nreturn msg; \n","outputs":"1","noerr":0,"x":475.8484649658203,"y":2125.1571925878525,"wires":[["19f7c06b.78728","bd41dbf3.b87ab8","3b5a1e04.21c3f2","963dddf3.3d90e","5ec5d6ee.05de28"]]},{"id":"f3292ffd.9da86","type":"change","z":"ab94ed2a.3949c","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/BRperm","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1320.7706680297852,"y":818.2740768194199,"wires":[["78de4084.1b151"]]},{"id":"78de4084.1b151","type":"DataIn","z":"ab94ed2a.3949c","collection":"c16c24c5.336ba8","name":"","update":false,"path":"/BRperm","x":1502.9134140014648,"y":817.9882797002792,"wires":[]},{"id":"a5e0ad3f.cf98d","type":"change","z":"ab94ed2a.3949c","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/CVC","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":588.2726974487305,"y":592.187377333641,"wires":[["3d5505df.28e50a"]]},{"id":"3d5505df.28e50a","type":"DataOut","z":"ab94ed2a.3949c","collection":"c16c24c5.336ba8","name":"","path":"/CVC","error":false,"x":767.2725639343262,"y":593.6159995794296,"wires":[["556f4182.2e21f"]]},{"id":"556f4182.2e21f","type":"change","z":"ab94ed2a.3949c","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"cvcount","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":949.2845687866211,"y":582.9374679327011,"wires":[["2327aa94.145eb6"]]},{"id":"e180118b.81c9a","type":"function","z":"ab94ed2a.3949c","name":"global set brtemp","func":"if (global.get('brtemp')< 60) \n    {global.set('brtemp',msg.payload);}\nelse if (global.get('brtemp')>= 60)\n    {global.set('brtemp',0);\n    return msg;}\n\n","outputs":1,"noerr":0,"x":1149.019027709961,"y":772.501586318016,"wires":[["bdea0962.83cdc8"]]},{"id":"3aea911f.e7815e","type":"function","z":"ab94ed2a.3949c","name":"global set brperm","func":"if (global.get('brtemp')>= 60) {\nvar temp = global.get('brperm') -(-60); \nvar brperm = global.set('brperm',temp);\nmsg.payload = global.get('brperm');\nreturn msg;}\n","outputs":1,"noerr":0,"x":1013.2485504150391,"y":813.0369247198105,"wires":[["f3292ffd.9da86"]]},{"id":"40721fd2.fcab1","type":"function","z":"ab94ed2a.3949c","name":"global set bvtemp","func":"if (global.get('bvtemp')< 60) \n    {global.set('bvtemp',msg.payload);}\nelse if (global.get('bvtemp')>= 60)\n    {global.set('bvtemp',0);\n    return msg;}\n\n","outputs":1,"noerr":0,"x":1090.187858581543,"y":1105.2289646863937,"wires":[["fe50a648.edd1a8"]]},{"id":"ebf2c13c.c561f","type":"function","z":"ab94ed2a.3949c","name":"global set bvperm","func":"if (global.get('bvtemp')>= 60) {\nvar temp2 = global.get('bvperm') -(-60); \nvar bvperm = global.set('bvperm',temp2);\nmsg.payload = global.get('bvperm');\nreturn msg;}\n","outputs":1,"noerr":0,"x":1030.1315536499023,"y":1145.7643913030624,"wires":[["709d2887.a7b148"]]},{"id":"709d2887.a7b148","type":"change","z":"ab94ed2a.3949c","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/BVperm","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1316.2250671386719,"y":1152.4299186468124,"wires":[["85fdb1fa.6de72"]]},{"id":"85fdb1fa.6de72","type":"DataIn","z":"ab94ed2a.3949c","collection":"c16c24c5.336ba8","name":"","update":false,"path":"/BVperm","x":1499.796531677246,"y":1150.715643286705,"wires":[]},{"id":"5e662d54.c4db04","type":"function","z":"ab94ed2a.3949c","name":"global set cvtemp","func":"if (global.get('cvtemp')< 60) \n    {global.set('cvtemp',msg.payload);}\nelse if (global.get('cvtemp')>= 60)\n    {global.set('cvtemp',0);\n    return msg;}\n\n","outputs":1,"noerr":0,"x":1132.0061416625977,"y":1415.8781703710556,"wires":[["e23da3.ffab926"]]},{"id":"1ee15479.9b3c5c","type":"function","z":"ab94ed2a.3949c","name":"global set cvperm","func":"if (global.get('cvtemp')>= 60) {\nvar temp3 = global.get('cvperm') -(-60); \nvar cvperm = global.set('cvperm',temp3);\nmsg.payload = global.get('cvperm');\nreturn msg;}\n","outputs":1,"noerr":0,"x":1091.9497604370117,"y":1459.2707122564316,"wires":[["552dc8d6.4a7f48"]]},{"id":"552dc8d6.4a7f48","type":"change","z":"ab94ed2a.3949c","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/CVperm","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1356.6149368286133,"y":1454.5078519582748,"wires":[["46d5122.ebfc1ec"]]},{"id":"46d5122.ebfc1ec","type":"DataIn","z":"ab94ed2a.3949c","collection":"c16c24c5.336ba8","name":"","update":false,"path":"/CVperm","x":1541.614845275879,"y":1455.6506150960922,"wires":[]},{"id":"2d5432ff.75cf8e","type":"debug","z":"ab94ed2a.3949c","name":"","active":false,"console":"false","complete":"false","x":1569.8428802490234,"y":150.285675406456,"wires":[]},{"id":"eeb09d6c.deec8","type":"debug","z":"ab94ed2a.3949c","name":"","active":false,"console":"false","complete":"false","x":1462.700064522879,"y":294.57138315268924,"wires":[]},{"id":"c67659eb.a15878","type":"debug","z":"ab94ed2a.3949c","name":"","active":false,"console":"false","complete":"false","x":989.8429216657364,"y":84.57138315268924,"wires":[]},{"id":"6fc11fab.c32b","type":"inject","z":"ab94ed2a.3949c","name":"","topic":"","payload":"0","payloadType":"num","repeat":"","crontab":"","once":true,"x":1041.271493094308,"y":713.1428117241178,"wires":[["e180118b.81c9a"]]},{"id":"49b83f42.8dd69","type":"inject","z":"ab94ed2a.3949c","name":"","topic":"","payload":"0","payloadType":"num","repeat":"","crontab":"","once":true,"x":1104.8429565429688,"y":1031.7142490148544,"wires":[["40721fd2.fcab1"]]},{"id":"a231f191.b00ac","type":"inject","z":"ab94ed2a.3949c","name":"","topic":"","payload":"0","payloadType":"num","repeat":"","crontab":"","once":true,"x":1181.9857788085938,"y":1350.2857211828232,"wires":[["5e662d54.c4db04"]]},{"id":"956ff15.194aa1","type":"change","z":"aa21694d.456698","name":"","rules":[{"t":"set","p":"topic ","pt":"msg","to":"PS0","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":748.3333129882812,"y":276.380952835083,"wires":[["3239a963.f6a9f6"]]},{"id":"92594a6b.705808","type":"change","z":"aa21694d.456698","name":"","rules":[{"t":"set","p":"topic ","pt":"msg","to":"PS1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":768.8689498901367,"y":367.20239639282227,"wires":[["c0285dd3.3aa22","6226a902.099518"]]},{"id":"54904277.808f3c","type":"inject","z":"aa21694d.456698","name":"Auto Tune PULSE","topic":"","payload":"","payloadType":"num","repeat":"1","crontab":"","once":true,"x":398.5475158691406,"y":647.130989074707,"wires":[["7fb463b8.b24fac","10885c82.756d73","eecfc08.521524","759c5560.700dcc","60f6d45.b8a8e2c","a7eca215.2a3bb","431aaa8c.637444","990559e5.39d498","df845e7f.15db5","9b36340d.a8fbc8","b1fe8e14.824d8","466cf4df.637fec","6dd8743a.28288c"]]},{"id":"3239a963.f6a9f6","type":"function","z":"aa21694d.456698","name":"qualifier for write to data base set press","func":"if (global.get ('step4')===1) {\nglobal.set ('PS0', msg.payload );\nreturn msg;\n}\nreturn;","outputs":1,"noerr":0,"x":1103.8452453613281,"y":276.78572845458984,"wires":[["1950ea85.531de5","5fb62980.2b38e8"]]},{"id":"6226a902.099518","type":"function","z":"aa21694d.456698","name":"qualifier for write to data base set press","func":"if (global.get ('step4')===1) {\nglobal.set ('PS1', msg.payload );\nreturn msg;\n}\nreturn;","outputs":1,"noerr":0,"x":1124.9761581420898,"y":386.96428871154785,"wires":[["b97d9a0e.8540c8","af66b9f8.4f8688"]]},{"id":"5d7a293a.c25588","type":"comment","z":"aa21694d.456698","name":"Help Get Data","info":"Push to get the /myRootTest/currentTime a from the collection Test.\nThat time has been set by the set data.","x":961.880859375,"y":516.3333277702332,"wires":[]},{"id":"3ba48786.8b4db8","type":"change","z":"aa21694d.456698","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/SP0","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1081.4642028808594,"y":564.9285650253296,"wires":[["4a60b0ad.1defe"]]},{"id":"ad6c9c25.7568","type":"comment","z":"aa21694d.456698","name":"Help Get Data","info":"Push to get the /myRootTest/currentTime a from the collection Test.\nThat time has been set by the set data.","x":839.499870300293,"y":561.571400642395,"wires":[]},{"id":"7322b883.312f28","type":"function","z":"aa21694d.456698","name":"global set PS0","func":"var PS0 = global.set ('PS0', msg.payload);\nreturn;","outputs":1,"noerr":0,"x":1540.6902465820312,"y":591.6666297912598,"wires":[[]]},{"id":"8f8c0098.7c3bd","type":"function","z":"aa21694d.456698","name":"global set PS1","func":"var PS1 = global.set ('PS1', msg.payload);\nreturn;","outputs":1,"noerr":0,"x":1539.2618255615234,"y":740.7143144607544,"wires":[[]]},{"id":"59624587.7c65ec","type":"inject","z":"aa21694d.456698","name":"","topic":"","payload":"","payloadType":"num","repeat":"","crontab":"","once":true,"x":795.6904449462891,"y":603.2857532501221,"wires":[["3ba48786.8b4db8"]]},{"id":"369e10b9.61d3b","type":"change","z":"aa21694d.456698","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/SP1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1103.4999694824219,"y":674.7142848968506,"wires":[["2a773b78.364ed4"]]},{"id":"c0285dd3.3aa22","type":"function","z":"aa21694d.456698","name":"actFilt","func":"global.set ('actFilt', msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":1024.9760208129883,"y":462.2856750488281,"wires":[[]]},{"id":"990559e5.39d498","type":"function","z":"aa21694d.456698","name":"global setPress","func":"global.set ('setPres', global.get('PS0'));\nreturn;","outputs":1,"noerr":0,"x":511.64286041259766,"y":285.4761939048767,"wires":[[]]},{"id":"ecd2f7de.5ae8d8","type":"DataIn","z":"aa21694d.456698","collection":"2df55d75.4ea572","name":"","update":true,"path":"/SP0","x":1571.9761352539062,"y":172.23809051513672,"wires":[]},{"id":"d6fa9401.7770a8","type":"DataIn","z":"aa21694d.456698","collection":"2df55d75.4ea572","name":"","update":false,"path":"/SP1","x":1636.1189632415771,"y":493.238094329834,"wires":[]},{"id":"2a773b78.364ed4","type":"DataOut","z":"aa21694d.456698","collection":"2df55d75.4ea572","name":"","path":"SP1","error":false,"x":1297.6903762817383,"y":605.3809509277344,"wires":[["8f8c0098.7c3bd"]]},{"id":"ee89cdc6.e8119","type":"inject","z":"aa21694d.456698","name":"","topic":"","payload":"0","payloadType":"num","repeat":"","crontab":"","once":true,"x":834.118953704834,"y":637.8095397949219,"wires":[["369e10b9.61d3b"]]},{"id":"4a60b0ad.1defe","type":"DataOut","z":"aa21694d.456698","collection":"2df55d75.4ea572","name":"","path":"/SP0","error":false,"x":1295.6903762817383,"y":551.3809509277344,"wires":[["7322b883.312f28"]]},{"id":"1950ea85.531de5","type":"change","z":"aa21694d.456698","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/SP0","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1362.5474662780762,"y":173.66666412353516,"wires":[["ecd2f7de.5ae8d8"]]},{"id":"b97d9a0e.8540c8","type":"change","z":"aa21694d.456698","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/SP1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1389.6904754638672,"y":484.04762840270996,"wires":[["d6fa9401.7770a8"]]},{"id":"5fb62980.2b38e8","type":"delay","z":"aa21694d.456698","name":"","pauseType":"delay","timeout":"3","timeoutUnits":"seconds","rate":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1619.9760905674525,"y":270.66666521344865,"wires":[["3ba48786.8b4db8"]]},{"id":"af66b9f8.4f8688","type":"delay","z":"aa21694d.456698","name":"","pauseType":"delay","timeout":"3","timeoutUnits":"seconds","rate":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1652.8331909179688,"y":394.9523572921753,"wires":[["369e10b9.61d3b"]]},{"id":"10885c82.756d73","type":"function","z":"aa21694d.456698","name":"qualifier for write to data base set press","func":"if (global.get ('step3')===1) {\nglobal.set ('PS1', 0 );\nreturn msg;\n}\nreturn;","outputs":1,"noerr":0,"x":666.4047317504883,"y":1018.8809785842896,"wires":[["e0368d1c.a25c4"]]},{"id":"7fb463b8.b24fac","type":"function","z":"aa21694d.456698","name":"qualifier for write to data base set press","func":"if (global.get ('step3')===1) {\nglobal.set ('PS0', 0 );\nmsg.payload = global.get('PS0');\nreturn msg;\n}\nreturn;","outputs":1,"noerr":0,"x":667.773796081543,"y":980.4881057739258,"wires":[["c0bcacc2.8e496"]]},{"id":"e0368d1c.a25c4","type":"rbe","z":"aa21694d.456698","name":"","func":"rbe","gap":"","start":"","inout":"out","x":1087.4046630859375,"y":1015.5238418579102,"wires":[["369e10b9.61d3b"]]},{"id":"c0bcacc2.8e496","type":"rbe","z":"aa21694d.456698","name":"","func":"rbe","gap":"","start":"","inout":"out","x":967.5475463867188,"y":984.6666641235352,"wires":[["3ba48786.8b4db8"]]},{"id":"1e1b427e.ab922e","type":"change","z":"aa21694d.456698","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/SP03","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1049.0235977172852,"y":1281.380835533142,"wires":[["616287ba.4c1ab8","86b46161.1f694"]]},{"id":"58ac6591.3ba58c","type":"change","z":"aa21694d.456698","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/SP02","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1057.9284133911133,"y":1241.2856884002686,"wires":[["2ef1cb8b.e6fb54","431734f9.9b463c"]]},{"id":"3002cbf8.2794d4","type":"change","z":"aa21694d.456698","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/SP04","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1050.6902694702148,"y":1331.3808279037476,"wires":[["4bca2a40.28d0e4","26c05a52.788496"]]},{"id":"2ef1cb8b.e6fb54","type":"DataIn","z":"aa21694d.456698","collection":"2df55d75.4ea572","name":"","update":false,"path":"/SP02","x":1324.023796081543,"y":1234.7142887115479,"wires":[]},{"id":"616287ba.4c1ab8","type":"DataIn","z":"aa21694d.456698","collection":"2df55d75.4ea572","name":"","update":false,"path":"/SP03","x":1325.690299987793,"y":1276.380916595459,"wires":[]},{"id":"4bca2a40.28d0e4","type":"DataIn","z":"aa21694d.456698","collection":"2df55d75.4ea572","name":"","update":false,"path":"/SP04","x":1327.357048034668,"y":1329.7142925262451,"wires":[]},{"id":"5adf7cdd.0d9764","type":"DataOut","z":"aa21694d.456698","collection":"2df55d75.4ea572","name":"","path":"/SP02","error":false,"x":1264.023639678955,"y":1453.0476293563843,"wires":[["361ac8cf.9dddf8"]]},{"id":"61c1dee3.b4e91","type":"change","z":"aa21694d.456698","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/SP03","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1015.690315246582,"y":1503.0475769042969,"wires":[["217d17f.295b6e8"]]},{"id":"f2a0021f.ab551","type":"change","z":"aa21694d.456698","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/SP02","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1024.5951309204102,"y":1462.9524297714233,"wires":[["5adf7cdd.0d9764"]]},{"id":"56e47ea9.33c73","type":"inject","z":"aa21694d.456698","name":"","topic":"","payload":"","payloadType":"str","repeat":"","crontab":"","once":true,"x":787.3570556640625,"y":1474.7143621444702,"wires":[["f2a0021f.ab551"]]},{"id":"b173a195.8dd64","type":"change","z":"aa21694d.456698","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/SP04","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1017.3569869995117,"y":1553.0475692749023,"wires":[["ee2ab4c5.bd83b8"]]},{"id":"217d17f.295b6e8","type":"DataOut","z":"aa21694d.456698","collection":"2df55d75.4ea572","name":"","path":"/SP03","error":false,"x":1275.3570442199707,"y":1522.3808679580688,"wires":[["e63b86ed.d7b8d8"]]},{"id":"ee2ab4c5.bd83b8","type":"DataOut","z":"aa21694d.456698","collection":"2df55d75.4ea572","name":"","path":"/SP04","error":false,"x":1270.357063293457,"y":1565.7143249511719,"wires":[["acb0d9f7.2702c8"]]},{"id":"fe1d0c1a.4e9e7","type":"inject","z":"aa21694d.456698","name":"","topic":"","payload":"","payloadType":"str","repeat":"","crontab":"","once":true,"x":787.3570022583008,"y":1511.3809509277344,"wires":[["61c1dee3.b4e91"]]},{"id":"836a20a.e946ee","type":"inject","z":"aa21694d.456698","name":"","topic":"","payload":"","payloadType":"str","repeat":"","crontab":"","once":true,"x":785.6903762817383,"y":1558.0475769042969,"wires":[["b173a195.8dd64"]]},{"id":"eecfc08.521524","type":"function","z":"aa21694d.456698","name":"qualifier for write to data base set press","func":"if (global.get ('step6')===1) {\nmsg.payload = global.get ('oldPhi');\nreturn msg;\n}\nreturn;","outputs":1,"noerr":0,"x":479.9760208129883,"y":1114.9523448944092,"wires":[["58ac6591.3ba58c"]]},{"id":"759c5560.700dcc","type":"function","z":"aa21694d.456698","name":"qualifier for write to data base set press","func":"if (global.get ('step6')===1) {\nmsg.payload = global.get ('oldPlo');\nreturn msg;\n}\nreturn;","outputs":1,"noerr":0,"x":481.40465545654297,"y":1156.3808460235596,"wires":[["1e1b427e.ab922e"]]},{"id":"60f6d45.b8a8e2c","type":"function","z":"aa21694d.456698","name":"qualifier for write to data base set press","func":"if (global.get ('step6')===1) {\nmsg.payload = global.get ('oldFilt');\nreturn msg;\n}\nreturn;","outputs":1,"noerr":0,"x":488.54751205444336,"y":1199.238145828247,"wires":[["3002cbf8.2794d4"]]},{"id":"361ac8cf.9dddf8","type":"function","z":"aa21694d.456698","name":"global set PS2","func":"var PS2 = global.set ('PS2', msg.payload);\nvar oldPhi = global.set ('oldPhi', msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":1722.3569412231445,"y":1449.7143363952637,"wires":[[]]},{"id":"e63b86ed.d7b8d8","type":"function","z":"aa21694d.456698","name":"global set PS3","func":"var PS3 = global.set ('PS3', msg.payload);\nvar oldPlo = global.set ('oldPlo', msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":1724.0236282348633,"y":1493.0475769042969,"wires":[[]]},{"id":"acb0d9f7.2702c8","type":"function","z":"aa21694d.456698","name":"global set PS4","func":"var PS4 = global.set ('PS4', msg.payload);\nvar oldDirt = global.set ('oldFilt', msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":1710.6903991699219,"y":1531.3808860778809,"wires":[[]]},{"id":"431734f9.9b463c","type":"delay","z":"aa21694d.456698","name":"","pauseType":"delay","timeout":"3","timeoutUnits":"seconds","rate":"1","nbRateUnits":"","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":462.35705184936523,"y":1396.3810024261475,"wires":[["f2a0021f.ab551"]]},{"id":"86b46161.1f694","type":"delay","z":"aa21694d.456698","name":"","pauseType":"delay","timeout":"3","timeoutUnits":"seconds","rate":"1","nbRateUnits":"","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":484.02368927001953,"y":1443.0475769042969,"wires":[["61c1dee3.b4e91"]]},{"id":"26c05a52.788496","type":"delay","z":"aa21694d.456698","name":"","pauseType":"delay","timeout":"3","timeoutUnits":"seconds","rate":"1","nbRateUnits":"","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":495.6903762817383,"y":1481.3809509277344,"wires":[["b173a195.8dd64"]]},{"id":"a7eca215.2a3bb","type":"function","z":"aa21694d.456698","name":"actPres","func":"msg.payload = global.get ('actPres');\nreturn msg;","outputs":1,"noerr":0,"x":467.4165687561035,"y":240.7976245880127,"wires":[["956ff15.194aa1"]]},{"id":"431aaa8c.637444","type":"function","z":"aa21694d.456698","name":"actFilt","func":"msg.payload = global.get ('actFilt');\nreturn msg;","outputs":1,"noerr":0,"x":480.6903381347656,"y":320.761869430542,"wires":[["92594a6b.705808"]]},{"id":"df845e7f.15db5","type":"function","z":"aa21694d.456698","name":"global get PS2","func":"msg.payload = global.get('PS2');\nmsg.topic = 'PS2';\nreturn msg;","outputs":1,"noerr":0,"x":1443.6904067993164,"y":878.2857360839844,"wires":[["ec4c3c7b.d2c1d"]]},{"id":"9b36340d.a8fbc8","type":"function","z":"aa21694d.456698","name":"global get PS3","func":"msg.payload = global.get('PS3');\nmsg.topic = 'PS3';\nreturn msg;","outputs":1,"noerr":0,"x":1454.6904067993164,"y":918.2857360839844,"wires":[["ec4c3c7b.d2c1d"]]},{"id":"b1fe8e14.824d8","type":"function","z":"aa21694d.456698","name":"global get PS4","func":"msg.payload = global.get('PS4');\nmsg.topic = 'PS4';\nreturn msg;","outputs":1,"noerr":0,"x":1458.6904067993164,"y":965.2857360839844,"wires":[["ec4c3c7b.d2c1d"]]},{"id":"466cf4df.637fec","type":"function","z":"aa21694d.456698","name":"global get PS0","func":"msg.payload = global.get('PS0');\nmsg.topic = 'PS0';\nreturn msg;","outputs":1,"noerr":0,"x":1436.6904067993164,"y":790.2857360839844,"wires":[["ec4c3c7b.d2c1d"]]},{"id":"6dd8743a.28288c","type":"function","z":"aa21694d.456698","name":"global get PS1","func":"msg.payload = global.get('PS1');\nmsg.topic = 'PS1';\nreturn msg;","outputs":1,"noerr":0,"x":1441.3095474243164,"y":831.3333435058594,"wires":[["ec4c3c7b.d2c1d"]]},{"id":"6c7e256e.d524ac","type":"inject","z":"aa21694d.456698","name":"","topic":"","payload":"0","payloadType":"num","repeat":"","crontab":"","once":false,"x":1231.3333129882812,"y":136.66666412353516,"wires":[["ecd2f7de.5ae8d8","d6fa9401.7770a8"]]},{"id":"34f6f150.d49ede","type":"inject","z":"aa21694d.456698","name":"","topic":"","payload":"0","payloadType":"num","repeat":"","crontab":"","once":false,"x":1162.9999198913574,"y":513.3332951068878,"wires":[["4a60b0ad.1defe"]]},{"id":"1405369d.75f0f9","type":"inject","z":"aa21694d.456698","name":"","topic":"","payload":"0","payloadType":"num","repeat":"","crontab":"","once":false,"x":1147.9999389648438,"y":626.6666641235352,"wires":[["2a773b78.364ed4"]]},{"id":"25038b8e.171d94","type":"inject","z":"aa21694d.456698","name":"","topic":"","payload":"0","payloadType":"num","repeat":"","crontab":"","once":false,"x":1029.6666412353516,"y":1186.666706085205,"wires":[["2ef1cb8b.e6fb54","616287ba.4c1ab8","4bca2a40.28d0e4"]]},{"id":"d16e1277.b26e2","type":"inject","z":"aa21694d.456698","name":"","topic":"","payload":"1","payloadType":"num","repeat":"","crontab":"","once":false,"x":1046.333251953125,"y":1404.9999160766602,"wires":[["5adf7cdd.0d9764","217d17f.295b6e8","ee2ab4c5.bd83b8"]]},{"id":"ec4c3c7b.d2c1d","type":"vis in","z":"aa21694d.456698","language":"en","x":1676.0475158691406,"y":870.6666641235352,"wires":[[]]},{"id":"356dc5bf.ee502a","type":"function","z":"aa21694d.456698","name":"write oldPhi on factreset","func":"msg.payload = global.get ('oldPhi');\nreturn msg;\n","outputs":1,"noerr":0,"x":738.3333129882812,"y":824.6666641235352,"wires":[["58ac6591.3ba58c"]]},{"id":"6ceef72.25e5708","type":"vis in","z":"aa21694d.456698","language":"en","x":366.33331298828125,"y":543.6666641235352,"wires":[["16eb8f0f.b21be1"]]},{"id":"16eb8f0f.b21be1","type":"switch","z":"aa21694d.456698","name":"factreset","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"factreset","vt":"str"}],"checkall":"true","outputs":1,"x":509.84515380859375,"y":545.2379531860352,"wires":[["356dc5bf.ee502a","5406d854.89b638","a3226a9b.0fc318","3d9a31ea.6fe7ae","ebbf966a.1de648"]]},{"id":"5406d854.89b638","type":"function","z":"aa21694d.456698","name":"write oldPlo on factreset","func":"msg.payload = global.get ('oldPlo');\nreturn msg;\n","outputs":1,"noerr":0,"x":738.3333129882812,"y":861.6666641235352,"wires":[["1e1b427e.ab922e"]]},{"id":"a3226a9b.0fc318","type":"function","z":"aa21694d.456698","name":"write oldFilt on factreset","func":"msg.payload = global.get ('oldFilt');\nreturn msg;\n","outputs":1,"noerr":0,"x":732.3333129882812,"y":898.6666641235352,"wires":[["3002cbf8.2794d4"]]},{"id":"3d9a31ea.6fe7ae","type":"function","z":"aa21694d.456698","name":"write PS0 on factreset","func":"global.set ('PS0', 0 );\nmsg.payload = global.get('PS0');\nreturn msg;\n","outputs":1,"noerr":0,"x":884.3333129882812,"y":201.66666412353516,"wires":[["1950ea85.531de5"]]},{"id":"ebbf966a.1de648","type":"function","z":"aa21694d.456698","name":"write PS1 on factreset","func":"global.set ('PS1', 0 );\nmsg.payload = global.get('PS1');\nreturn msg;\n","outputs":1,"noerr":0,"x":805.3333129882812,"y":483.66666412353516,"wires":[["b97d9a0e.8540c8"]]},{"id":"5b1a7b5.e44e084","type":"change","z":"83ad3f3c.c4e8","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/phase_check","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":769.9999389648438,"y":146.42857933044434,"wires":[["df1a5a64.783c88"]]},{"id":"df1a5a64.783c88","type":"DataOut","z":"83ad3f3c.c4e8","collection":"f230d0ed.dbd7a","name":"","path":"/phase_check","error":false,"x":982.1428527832031,"y":145.14287281036377,"wires":[["4a0b2f73.dd9b3"]]},{"id":"909be98e.b4af48","type":"inject","z":"83ad3f3c.c4e8","name":"","topic":"","payload":"ddd","payloadType":"str","repeat":"","crontab":"","once":true,"x":414.21419525146484,"y":136.00001525878906,"wires":[["5b1a7b5.e44e084","add0659e.17cb68","9edaab7.7004e58","aed0cea1.6b487","3bc02ca8.917b24","93bfd952.fb2d98","c4ae73b4.9f821","8e9308d5.4a9048"]]},{"id":"4a0b2f73.dd9b3","type":"function","z":"83ad3f3c.c4e8","name":"global set phase_check","func":"var phase_check = global.set('phase_check', msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":1239.7141723632812,"y":144.00001525878906,"wires":[[]]},{"id":"a89d01db.7e033","type":"comment","z":"83ad3f3c.c4e8","name":"Read variables from DB on startup","info":"","x":762.5475311279297,"y":85,"wires":[]},{"id":"593233f5.4583dc","type":"inject","z":"83ad3f3c.c4e8","name":"1 SEC PULSE","topic":"","payload":"ddd","payloadType":"str","repeat":"1","crontab":"","once":true,"x":481.9999542236328,"y":925.8452587127686,"wires":[["203efcd5.8aae54","b76c46e2.9f6218","89619b42.34fc18","94750ef9.1b128","3f904840.32e078","44a4828.507507c","9587fb9a.6c2218","d719486f.238a78"]]},{"id":"203efcd5.8aae54","type":"function","z":"83ad3f3c.c4e8","name":"get phase_check","func":"msg.payload = global.get('phase_check');\nmsg.topic = 'phase_check';\nreturn msg;","outputs":1,"noerr":0,"x":809.4126434326172,"y":887.7500743865967,"wires":[["c7ec80b3.a6a9c"]]},{"id":"f4b69c27.38649","type":"change","z":"83ad3f3c.c4e8","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/phase_check","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1151.4126739501953,"y":887.7500743865967,"wires":[["b0b02840.a138b8"]]},{"id":"b0b02840.a138b8","type":"DataIn","z":"83ad3f3c.c4e8","collection":"f230d0ed.dbd7a","name":"","update":false,"path":"/phase_check","x":1352.8412628173828,"y":885.6072521209717,"wires":[]},{"id":"c7ec80b3.a6a9c","type":"rbe","z":"83ad3f3c.c4e8","name":"","func":"rbe","gap":"","start":"","inout":"out","x":985.4999542236328,"y":887.7500743865967,"wires":[["f4b69c27.38649"]]},{"id":"124b63f4.95015c","type":"comment","z":"83ad3f3c.c4e8","name":"Set variables to database if changed","info":"","x":970.4999542236328,"y":783.7500667572021,"wires":[]},{"id":"b76c46e2.9f6218","type":"function","z":"83ad3f3c.c4e8","name":"get setPhi","func":"msg.payload = global.get('setPhi');\nmsg.topic = 'setPhi';\nreturn msg;","outputs":1,"noerr":0,"x":776.9999542236328,"y":933.7500743865967,"wires":[["27fd24e5.83db8c"]]},{"id":"de43a469.eb93d8","type":"change","z":"83ad3f3c.c4e8","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/setPhi","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1148.999984741211,"y":933.7500743865967,"wires":[["7a7356d6.ed2558"]]},{"id":"7a7356d6.ed2558","type":"DataIn","z":"83ad3f3c.c4e8","collection":"f230d0ed.dbd7a","name":"","update":false,"path":"/setPhi","x":1330.4285736083984,"y":931.6072521209717,"wires":[]},{"id":"27fd24e5.83db8c","type":"rbe","z":"83ad3f3c.c4e8","name":"","func":"rbe","gap":"","start":"","inout":"out","x":983.0872650146484,"y":933.7500743865967,"wires":[["de43a469.eb93d8"]]},{"id":"89619b42.34fc18","type":"function","z":"83ad3f3c.c4e8","name":"get setPlo","func":"msg.payload = global.get('setPlo');\nmsg.topic = 'setPlo';\nreturn msg;","outputs":1,"noerr":0,"x":765.9999542236328,"y":978.7500743865967,"wires":[["1b96d7be.476fa8"]]},{"id":"4a8ce5e6.95d99c","type":"change","z":"83ad3f3c.c4e8","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/setPlo","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1137.999984741211,"y":978.7500743865967,"wires":[["6651aac.29c1a54"]]},{"id":"6651aac.29c1a54","type":"DataIn","z":"83ad3f3c.c4e8","collection":"f230d0ed.dbd7a","name":"","update":false,"path":"/setPlo","x":1319.4285736083984,"y":976.6072521209717,"wires":[]},{"id":"1b96d7be.476fa8","type":"rbe","z":"83ad3f3c.c4e8","name":"","func":"rbe","gap":"","start":"","inout":"out","x":972.0872650146484,"y":978.7500743865967,"wires":[["4a8ce5e6.95d99c"]]},{"id":"94750ef9.1b128","type":"function","z":"83ad3f3c.c4e8","name":"get setDirt","func":"msg.payload = global.get('setDirt');\nmsg.topic = 'setDirt';\nreturn msg;","outputs":1,"noerr":0,"x":763.9999542236328,"y":1027.7500743865967,"wires":[["bc05bbfa.c7bda8"]]},{"id":"b655c98.26c0b38","type":"change","z":"83ad3f3c.c4e8","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/setDirt","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1125.999984741211,"y":1027.7500743865967,"wires":[["c31c2d4c.b0c06"]]},{"id":"c31c2d4c.b0c06","type":"DataIn","z":"83ad3f3c.c4e8","collection":"f230d0ed.dbd7a","name":"","update":false,"path":"/setDirt","x":1307.4285736083984,"y":1025.6072521209717,"wires":[]},{"id":"bc05bbfa.c7bda8","type":"rbe","z":"83ad3f3c.c4e8","name":"","func":"rbe","gap":"","start":"","inout":"out","x":960.0872650146484,"y":1027.7500743865967,"wires":[["b655c98.26c0b38"]]},{"id":"add0659e.17cb68","type":"change","z":"83ad3f3c.c4e8","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/setPhi","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":768.9999389648438,"y":184,"wires":[["1cc42708.a74b59"]]},{"id":"9edaab7.7004e58","type":"change","z":"83ad3f3c.c4e8","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/setPlo","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":770.9999389648438,"y":223,"wires":[["9cf54399.650d"]]},{"id":"aed0cea1.6b487","type":"change","z":"83ad3f3c.c4e8","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/setDirt","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":774.9999389648438,"y":263,"wires":[["493dae76.3f9df"]]},{"id":"1cc42708.a74b59","type":"DataOut","z":"83ad3f3c.c4e8","collection":"f230d0ed.dbd7a","name":"","path":"/setPhi","error":false,"x":962.9999389648438,"y":195,"wires":[["76c3976a.44b3f8"]]},{"id":"9cf54399.650d","type":"DataOut","z":"83ad3f3c.c4e8","collection":"f230d0ed.dbd7a","name":"","path":"/setPlo","error":false,"x":961.9999389648438,"y":231,"wires":[["d6fc9d55.74a51"]]},{"id":"493dae76.3f9df","type":"DataOut","z":"83ad3f3c.c4e8","collection":"f230d0ed.dbd7a","name":"","path":"/setDirt","error":false,"x":955.9999389648438,"y":269,"wires":[["4a0b344f.6de81c"]]},{"id":"76c3976a.44b3f8","type":"function","z":"83ad3f3c.c4e8","name":"global set setPhi","func":"var setPhi = global.set('setPhi', msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":1213.9999389648438,"y":185,"wires":[[]]},{"id":"d6fc9d55.74a51","type":"function","z":"83ad3f3c.c4e8","name":"global set setPlo","func":"var setPlo = global.set('setPlo', msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":1210.9999389648438,"y":226,"wires":[[]]},{"id":"4a0b344f.6de81c","type":"function","z":"83ad3f3c.c4e8","name":"global set setDirt","func":"var setDirt = global.set('setDirt', msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":1212.9999389648438,"y":265,"wires":[[]]},{"id":"35dbb794.acc868","type":"inject","z":"83ad3f3c.c4e8","name":"","topic":"","payload":"0","payloadType":"num","repeat":"","crontab":"","once":false,"x":849.4999542236328,"y":832.7500667572021,"wires":[["f4b69c27.38649","de43a469.eb93d8","4a8ce5e6.95d99c","b655c98.26c0b38"]]},{"id":"3bc02ca8.917b24","type":"change","z":"83ad3f3c.c4e8","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/conveyor_check","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":755.7142028808594,"y":309.7142868041992,"wires":[["1094dff4.010bd"]]},{"id":"1094dff4.010bd","type":"DataOut","z":"83ad3f3c.c4e8","collection":"f230d0ed.dbd7a","name":"","path":"/conveyor_check","error":false,"x":977.8571166992188,"y":308.42858028411865,"wires":[["b05a4043.dab24"]]},{"id":"b05a4043.dab24","type":"function","z":"83ad3f3c.c4e8","name":"global set conveyor_check","func":"var conveyor_check = global.set('conveyor_check', msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":1235.4284362792969,"y":307.28572273254395,"wires":[[]]},{"id":"3f904840.32e078","type":"function","z":"83ad3f3c.c4e8","name":"get conveyor_check","func":"msg.payload = global.get('conveyor_check');\nmsg.topic = 'conveyor_check';\nreturn msg;","outputs":1,"noerr":0,"x":779.7142486572266,"y":1070.464361190796,"wires":[["740b1f3b.a67e6"]]},{"id":"740b1f3b.a67e6","type":"rbe","z":"83ad3f3c.c4e8","name":"","func":"rbe","gap":"","start":"","inout":"out","x":945.8015594482422,"y":1070.464361190796,"wires":[["9420b53e.f6c038"]]},{"id":"9420b53e.f6c038","type":"change","z":"83ad3f3c.c4e8","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/conveyor_check","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1111.7142791748047,"y":1070.464361190796,"wires":[["9a3c1cd0.8697f"]]},{"id":"9a3c1cd0.8697f","type":"DataIn","z":"83ad3f3c.c4e8","collection":"f230d0ed.dbd7a","name":"","update":false,"path":"/conveyor_check","x":1323.1428680419922,"y":1068.321538925171,"wires":[]},{"id":"48002f7d.8293f","type":"inject","z":"83ad3f3c.c4e8","name":"","topic":"","payload":"0","payloadType":"num","repeat":"","crontab":"","once":false,"x":784.964241027832,"y":1235.4643630981445,"wires":[["9420b53e.f6c038","7cae5e94.f0c5f","305fee17.e50b72","5a289441.d97f2c"]]},{"id":"93bfd952.fb2d98","type":"change","z":"83ad3f3c.c4e8","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/conveyor_control","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":759.7142028808594,"y":356.7142868041992,"wires":[["9686798f.8047f8"]]},{"id":"9686798f.8047f8","type":"DataOut","z":"83ad3f3c.c4e8","collection":"f230d0ed.dbd7a","name":"","path":"/conveyor_control","error":false,"x":981.8571166992188,"y":355.42858028411865,"wires":[["6d387953.44c7e8"]]},{"id":"6d387953.44c7e8","type":"function","z":"83ad3f3c.c4e8","name":"global set conveyor_control","func":"var conveyor_control = global.set('conveyor_control', msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":1239.4284362792969,"y":354.28572273254395,"wires":[[]]},{"id":"44a4828.507507c","type":"function","z":"83ad3f3c.c4e8","name":"get conveyor_control","func":"msg.payload = global.get('conveyor_control');\nmsg.topic = 'conveyor_control';\nreturn msg;","outputs":1,"noerr":0,"x":767.7142486572266,"y":1111.464361190796,"wires":[["443beab1.7faf74"]]},{"id":"443beab1.7faf74","type":"rbe","z":"83ad3f3c.c4e8","name":"","func":"rbe","gap":"","start":"","inout":"out","x":933.8015594482422,"y":1111.464361190796,"wires":[["7cae5e94.f0c5f"]]},{"id":"7cae5e94.f0c5f","type":"change","z":"83ad3f3c.c4e8","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/conveyor_control","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1099.7142791748047,"y":1111.464361190796,"wires":[["52f119b5.f619d8"]]},{"id":"52f119b5.f619d8","type":"DataIn","z":"83ad3f3c.c4e8","collection":"f230d0ed.dbd7a","name":"","update":false,"path":"/conveyor_control","x":1311.1428680419922,"y":1109.321538925171,"wires":[]},{"id":"c4ae73b4.9f821","type":"change","z":"83ad3f3c.c4e8","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/afterfilter_check","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":759.7142028808594,"y":398.7142868041992,"wires":[["3f81ad5c.db38c2"]]},{"id":"3f81ad5c.db38c2","type":"DataOut","z":"83ad3f3c.c4e8","collection":"f230d0ed.dbd7a","name":"","path":"/afterfilter_check","error":false,"x":981.8571166992188,"y":397.42858028411865,"wires":[["a2a750a8.2c1a6"]]},{"id":"a2a750a8.2c1a6","type":"function","z":"83ad3f3c.c4e8","name":"global set afterfilter_check","func":"var afterfilter_check = global.set('afterfilter_check', msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":1239.4284362792969,"y":396.28572273254395,"wires":[[]]},{"id":"8e9308d5.4a9048","type":"change","z":"83ad3f3c.c4e8","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/ducted_check","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":756.7142028808594,"y":439.7142868041992,"wires":[["9ecd7395.346b"]]},{"id":"9ecd7395.346b","type":"DataOut","z":"83ad3f3c.c4e8","collection":"f230d0ed.dbd7a","name":"","path":"/ducted_check","error":false,"x":968.8571166992188,"y":438.42858028411865,"wires":[["63fcc4cb.c9986c"]]},{"id":"63fcc4cb.c9986c","type":"function","z":"83ad3f3c.c4e8","name":"global set ducted_check","func":"var ducted_check = global.set('ducted_check', msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":1226.4284362792969,"y":437.28572273254395,"wires":[[]]},{"id":"9587fb9a.6c2218","type":"function","z":"83ad3f3c.c4e8","name":"get afterfilter_check","func":"msg.payload = global.get('afterfilter_check');\nmsg.topic = 'afterfilter_check';\nreturn msg;","outputs":1,"noerr":0,"x":762.7142486572266,"y":1148.464361190796,"wires":[["66da986e.ff0f38"]]},{"id":"66da986e.ff0f38","type":"rbe","z":"83ad3f3c.c4e8","name":"","func":"rbe","gap":"","start":"","inout":"out","x":928.8015594482422,"y":1148.464361190796,"wires":[["305fee17.e50b72"]]},{"id":"305fee17.e50b72","type":"change","z":"83ad3f3c.c4e8","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/afterfilter_check","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1094.7142791748047,"y":1148.464361190796,"wires":[["bdefcbd4.885cb8"]]},{"id":"bdefcbd4.885cb8","type":"DataIn","z":"83ad3f3c.c4e8","collection":"f230d0ed.dbd7a","name":"","update":false,"path":"/afterfilter_check","x":1306.1428680419922,"y":1146.321538925171,"wires":[]},{"id":"d719486f.238a78","type":"function","z":"83ad3f3c.c4e8","name":"get ducted_check","func":"msg.payload = global.get('ducted_check');\nmsg.topic = 'ducted_check';\nreturn msg;","outputs":1,"noerr":0,"x":753.7142486572266,"y":1186.464361190796,"wires":[["12ac2be6.6cc1d4"]]},{"id":"12ac2be6.6cc1d4","type":"rbe","z":"83ad3f3c.c4e8","name":"","func":"rbe","gap":"","start":"","inout":"out","x":929.8015594482422,"y":1186.464361190796,"wires":[["5a289441.d97f2c"]]},{"id":"5a289441.d97f2c","type":"change","z":"83ad3f3c.c4e8","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/ducted_check","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1095.7142791748047,"y":1186.464361190796,"wires":[["d3b10d13.36397"]]},{"id":"d3b10d13.36397","type":"DataIn","z":"83ad3f3c.c4e8","collection":"f230d0ed.dbd7a","name":"","update":false,"path":"/ducted_check","x":1297.1428680419922,"y":1184.321538925171,"wires":[]},{"id":"aa771262.fe918","type":"inject","z":"83ad3f3c.c4e8","name":"","topic":"","payload":"ddd","payloadType":"str","repeat":"","crontab":"","once":true,"x":423.7142028808594,"y":459.7142868041992,"wires":[["53e9ef50.12527","e85ab85b.ad74a8","3ef52e96.8124c2","df847946.e0e858","a4cf1097.e421"]]},{"id":"3ef52e96.8124c2","type":"change","z":"83ad3f3c.c4e8","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/post_time","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":748.2142105102539,"y":565.4285583496094,"wires":[["aac1f9e7.a34d28"]]},{"id":"e85ab85b.ad74a8","type":"change","z":"83ad3f3c.c4e8","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/off_time","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":751.2142105102539,"y":524.4285583496094,"wires":[["a3f16423.f354e8"]]},{"id":"53e9ef50.12527","type":"change","z":"83ad3f3c.c4e8","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/on_time","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":751.2142105102539,"y":482.4285583496094,"wires":[["4c485db.be19aa4"]]},{"id":"4c485db.be19aa4","type":"DataOut","z":"83ad3f3c.c4e8","collection":"f230d0ed.dbd7a","name":"","path":"/on_time","error":false,"x":943.3571243286133,"y":481.1428518295288,"wires":[["9031bf4d.ab407"]]},{"id":"a3f16423.f354e8","type":"DataOut","z":"83ad3f3c.c4e8","collection":"f230d0ed.dbd7a","name":"","path":"/off_time","error":false,"x":943.3571243286133,"y":523.1428518295288,"wires":[["730854ec.74a8fc"]]},{"id":"aac1f9e7.a34d28","type":"DataOut","z":"83ad3f3c.c4e8","collection":"f230d0ed.dbd7a","name":"","path":"/post_time","error":false,"x":950.3571243286133,"y":564.1428518295288,"wires":[["76cf0298.8fc43c"]]},{"id":"9031bf4d.ab407","type":"function","z":"83ad3f3c.c4e8","name":"global set on_time","func":"var on_time = global.set('on_time', msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":1200.9284439086914,"y":479.9999942779541,"wires":[[]]},{"id":"730854ec.74a8fc","type":"function","z":"83ad3f3c.c4e8","name":"global set off_time","func":"var off_time = global.set('off_time', msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":1200.9284439086914,"y":521.9999942779541,"wires":[[]]},{"id":"76cf0298.8fc43c","type":"function","z":"83ad3f3c.c4e8","name":"global set post_time","func":"var post_time = global.set('post_time', msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":1207.9284439086914,"y":562.9999942779541,"wires":[[]]},{"id":"950de8a5.4da488","type":"inject","z":"83ad3f3c.c4e8","name":"1 SEC PULSE","topic":"","payload":"ddd","payloadType":"str","repeat":"1","crontab":"","once":true,"x":504.7142028808594,"y":1317.7142868041992,"wires":[["3c99a61a.4440fa","7f13342d.05328c","31daa421.47534c","fdb44533.a9e708","1ea17487.a8864b"]]},{"id":"3c99a61a.4440fa","type":"function","z":"83ad3f3c.c4e8","name":"get on_time","func":"msg.payload = global.get('on_time');\nmsg.topic = 'on_time';\nreturn msg;","outputs":1,"noerr":0,"x":715.4284973144531,"y":1299.3333892822266,"wires":[["76da265.c597dd8"]]},{"id":"7f13342d.05328c","type":"function","z":"83ad3f3c.c4e8","name":"get off_time","func":"msg.payload = global.get('off_time');\nmsg.topic = 'off_time';\nreturn msg;","outputs":1,"noerr":0,"x":710.4284973144531,"y":1336.3333892822266,"wires":[["fea6b35e.31403"]]},{"id":"31daa421.47534c","type":"function","z":"83ad3f3c.c4e8","name":"get post_time","func":"msg.payload = global.get('post_time');\nmsg.topic = 'post_time';\nreturn msg;","outputs":1,"noerr":0,"x":721.4284973144531,"y":1374.3333892822266,"wires":[["943edab8.153098"]]},{"id":"76da265.c597dd8","type":"rbe","z":"83ad3f3c.c4e8","name":"","func":"rbe","gap":"","start":"","inout":"out","x":911.5158081054688,"y":1299.3333892822266,"wires":[["4cf75667.82b558"]]},{"id":"fea6b35e.31403","type":"rbe","z":"83ad3f3c.c4e8","name":"","func":"rbe","gap":"","start":"","inout":"out","x":906.5158081054688,"y":1336.3333892822266,"wires":[["112f868f.363819"]]},{"id":"943edab8.153098","type":"rbe","z":"83ad3f3c.c4e8","name":"","func":"rbe","gap":"","start":"","inout":"out","x":907.5158081054688,"y":1374.3333892822266,"wires":[["bd8fa050.472df"]]},{"id":"4cf75667.82b558","type":"change","z":"83ad3f3c.c4e8","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/on_time","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1077.4285278320312,"y":1299.3333892822266,"wires":[["db56bb64.012978"]]},{"id":"112f868f.363819","type":"change","z":"83ad3f3c.c4e8","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/off_time","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1072.4285278320312,"y":1336.3333892822266,"wires":[["380e9a36.536e36"]]},{"id":"bd8fa050.472df","type":"change","z":"83ad3f3c.c4e8","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/post_time","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1073.4285278320312,"y":1374.3333892822266,"wires":[["2e0117a0.57ba88"]]},{"id":"db56bb64.012978","type":"DataIn","z":"83ad3f3c.c4e8","collection":"f230d0ed.dbd7a","name":"","update":false,"path":"/on_time","x":1258.8571166992188,"y":1297.1905670166016,"wires":[]},{"id":"380e9a36.536e36","type":"DataIn","z":"83ad3f3c.c4e8","collection":"f230d0ed.dbd7a","name":"","update":false,"path":"/off_time","x":1253.8571166992188,"y":1334.1905670166016,"wires":[]},{"id":"2e0117a0.57ba88","type":"DataIn","z":"83ad3f3c.c4e8","collection":"f230d0ed.dbd7a","name":"","update":false,"path":"/post_time","x":1264.8571166992188,"y":1372.1905670166016,"wires":[]},{"id":"f00a3dd4.5cb58","type":"inject","z":"83ad3f3c.c4e8","name":"","topic":"","payload":"0","payloadType":"num","repeat":"","crontab":"","once":false,"x":536.4284820556641,"y":1500.0001745224,"wires":[["4cf75667.82b558","112f868f.363819","bd8fa050.472df","a2c500cf.e39e9"]]},{"id":"df847946.e0e858","type":"change","z":"83ad3f3c.c4e8","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/setfspassword","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":743.4500122070312,"y":611.623405456543,"wires":[["af074c7d.9ebe9"]]},{"id":"af074c7d.9ebe9","type":"DataOut","z":"83ad3f3c.c4e8","collection":"f230d0ed.dbd7a","name":"","path":"/setfspassword","error":false,"x":955.5929260253906,"y":610.3376989364624,"wires":[["97e6d373.9ddd4"]]},{"id":"97e6d373.9ddd4","type":"function","z":"83ad3f3c.c4e8","name":"global set setfspassword","func":"var setfspassword = global.set('setfspassword', msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":1213.1642456054688,"y":609.1948413848877,"wires":[[]]},{"id":"fdb44533.a9e708","type":"function","z":"83ad3f3c.c4e8","name":"get setfspassword","func":"msg.payload = global.get('setfspassword');\nmsg.topic = 'setfspassword';\nreturn msg;","outputs":1,"noerr":0,"x":730.5409240722656,"y":1413.8052291870117,"wires":[["f62254d6.37bb38"]]},{"id":"f62254d6.37bb38","type":"rbe","z":"83ad3f3c.c4e8","name":"","func":"rbe","gap":"","start":"","inout":"out","x":906.6282348632812,"y":1413.8052291870117,"wires":[["a2c500cf.e39e9"]]},{"id":"a2c500cf.e39e9","type":"change","z":"83ad3f3c.c4e8","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/setfspassword","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1072.5409545898438,"y":1413.8052291870117,"wires":[["8f0b03ba.7ec89"]]},{"id":"8f0b03ba.7ec89","type":"DataIn","z":"83ad3f3c.c4e8","collection":"f230d0ed.dbd7a","name":"","update":false,"path":"/setfspassword","x":1273.9695434570312,"y":1411.6624069213867,"wires":[]},{"id":"a4cf1097.e421","type":"change","z":"83ad3f3c.c4e8","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/alarmonly_check","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":742.6334533691406,"y":664.1211853027344,"wires":[["36b6a04b.9439c"]]},{"id":"36b6a04b.9439c","type":"DataOut","z":"83ad3f3c.c4e8","collection":"f230d0ed.dbd7a","name":"","path":"/alarmonly_check","error":false,"x":964.7763671875,"y":662.8354787826538,"wires":[["9435f7db.f19268"]]},{"id":"9435f7db.f19268","type":"function","z":"83ad3f3c.c4e8","name":"global set alarmonly_check","func":"var alarmonly_check = global.set('alarmonly_check', msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":1222.3476867675781,"y":661.6926212310791,"wires":[[]]},{"id":"1ea17487.a8864b","type":"function","z":"83ad3f3c.c4e8","name":"get alarmonly_check","func":"msg.payload = global.get('alarmonly_check');\nmsg.topic = 'alarmonly_check';\nreturn msg;","outputs":1,"noerr":0,"x":727.6334533691406,"y":1457.9090881347656,"wires":[["4fa3f8f1.4fc198"]]},{"id":"4fa3f8f1.4fc198","type":"rbe","z":"83ad3f3c.c4e8","name":"","func":"rbe","gap":"","start":"","inout":"out","x":893.7207641601562,"y":1457.9090881347656,"wires":[["fcabe599.392f78"]]},{"id":"fcabe599.392f78","type":"change","z":"83ad3f3c.c4e8","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/alarmonly_check","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1059.6334838867188,"y":1457.9090881347656,"wires":[["c9d0d1b8.faf8e"]]},{"id":"c9d0d1b8.faf8e","type":"DataIn","z":"83ad3f3c.c4e8","collection":"f230d0ed.dbd7a","name":"","update":false,"path":"/alarmonly_check","x":1271.0620727539062,"y":1455.7662658691406,"wires":[]},{"id":"81847f90.6a393","type":"inject","z":"83ad3f3c.c4e8","name":"","topic":"","payload":"0","payloadType":"num","repeat":"","crontab":"","once":false,"x":522.6334533691406,"y":1552.9090881347656,"wires":[["fcabe599.392f78"]]},{"id":"b31adfff.4c8","type":"inject","z":"83ad3f3c.c4e8","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"x":1172.1666259765625,"y":802.0000076293945,"wires":[[]]},{"id":"6728bea9.8963f","type":"vis in","z":"52db5dc3.18f7e4","language":"en","x":351.6666564941406,"y":222.76190539768763,"wires":[["de2ce498.39b048"]]},{"id":"de2ce498.39b048","type":"switch","z":"52db5dc3.18f7e4","name":"","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"ups_firmware","vt":"str"}],"checkall":"true","outputs":1,"x":494.2380894252233,"y":188.619047164917,"wires":[["5a22de57.0b04f","42da8bce.96de74","8bcbfc56.1c932"]]},{"id":"8bcbfc56.1c932","type":"delay","z":"52db5dc3.18f7e4","name":"","pauseType":"delay","timeout":"3","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":508.3809422084264,"y":268.3333339691162,"wires":[["82a66e57.7358b"]]},{"id":"5a22de57.0b04f","type":"debug","z":"52db5dc3.18f7e4","name":"","active":true,"console":"false","complete":"false","x":738.3809422084264,"y":188.3333339691162,"wires":[]},{"id":"3345d6ab.035f4a","type":"debug","z":"52db5dc3.18f7e4","name":"","active":true,"console":"false","complete":"false","x":986.3809422084264,"y":179.3333339691162,"wires":[]},{"id":"a0107b92.44e618","type":"debug","z":"52db5dc3.18f7e4","name":"","active":true,"console":"false","complete":"false","x":1019.3809422084264,"y":364.3333339691162,"wires":[]},{"id":"42da8bce.96de74","type":"bigexec","z":"52db5dc3.18f7e4","name":"","command":"sudo","commandArgs":"i2cset -y 1 0x6b 0x00 0xff","minError":1,"minWarning":1,"cwd":"","shell":true,"extraArgumentProperty":"","envProperty":"","format":"","limiter":true,"payloadIs":"triggerNoStdin","x":807.3809422084264,"y":249.8333339691162,"wires":[["3345d6ab.035f4a"],[],[]]},{"id":"82a66e57.7358b","type":"exec","z":"52db5dc3.18f7e4","command":"sudo python 9600_picofuHV3.0.py -v -f 0x31_UPS_PIco_HV3.0_main.hex","addpay":true,"append":"","useSpawn":"","timer":"","name":"update ups","x":734.0475681849889,"y":379.5000114440918,"wires":[["a0107b92.44e618"],[],[]]},{"id":"f04498bb.e17508","type":"inject","z":"52db5dc3.18f7e4","name":"","topic":"ups_firmware","payload":"1","payloadType":"str","repeat":"","crontab":"","once":false,"x":441.3809422084264,"y":138.3333339691162,"wires":[["de2ce498.39b048"]]},{"id":"6d022e01.129d6","type":"inject","z":"52db5dc3.18f7e4","name":"","topic":"ups_firmware","payload":"1","payloadType":"str","repeat":"","crontab":"","once":false,"x":425.71427808489125,"y":399.33332347869873,"wires":[["8bcbfc56.1c932"]]},{"id":"bc923d3c.98008","type":"inject","z":"9fcd592e.f55918","name":"","topic":"","payload":"","payloadType":"num","repeat":"","crontab":"","once":true,"x":466.6666564941406,"y":150,"wires":[["7890a146.05414"]]},{"id":"7890a146.05414","type":"exec","z":"9fcd592e.f55918","command":"sudo /etc/init.d/picofssd start","addpay":false,"append":"","useSpawn":"","timer":"","name":"","x":763.6666564941406,"y":183.5,"wires":[[],[],[]]},{"id":"b31339ea.a6d398","type":"inject","z":"9fcd592e.f55918","name":"","topic":"","payload":"","payloadType":"num","repeat":"10","crontab":"","once":false,"x":491.6666564941406,"y":279,"wires":[["649d61ac.6da93"]]},{"id":"649d61ac.6da93","type":"exec","z":"9fcd592e.f55918","command":"sudo python modules/pico_status.py","addpay":false,"append":"","useSpawn":"","timer":"","name":"","x":757.6666564941406,"y":256.5,"wires":[["bf37ee55.e4f71"],[],[]]},{"id":"bf37ee55.e4f71","type":"change","z":"9fcd592e.f55918","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"ups_status","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":662.6666564941406,"y":340,"wires":[["bf444c65.2e2b"]]},{"id":"4ff22621.780f18","type":"switch","z":"9fcd592e.f55918","name":"","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"ups_firmware","vt":"str"}],"checkall":"true","outputs":1,"x":1037.6666564941406,"y":328,"wires":[[]]},{"id":"bf444c65.2e2b","type":"vis in","z":"9fcd592e.f55918","language":"en","x":854.6666564941406,"y":323,"wires":[["4ff22621.780f18"]]},{"id":"30621b86.cdc904","type":"vis in","z":"9fcd592e.f55918","language":"en","x":506.6666564941406,"y":567,"wires":[["a2580962.bb4318"]]},{"id":"a2580962.bb4318","type":"switch","z":"9fcd592e.f55918","name":"","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"upspassword","vt":"str"}],"checkall":"true","outputs":1,"x":689.6666564941406,"y":571,"wires":[["f6ef1eef.fa007"]]},{"id":"f6ef1eef.fa007","type":"switch","z":"9fcd592e.f55918","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"1234","vt":"str"},{"t":"else"}],"checkall":"true","outputs":2,"x":695.6666564941406,"y":647,"wires":[["ed0810fa.36e4b"],["8a614b5b.3d8058"]]},{"id":"ed0810fa.36e4b","type":"change","z":"9fcd592e.f55918","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":887.6666564941406,"y":632,"wires":[["ac1cfa2a.038e58"]]},{"id":"8a614b5b.3d8058","type":"change","z":"9fcd592e.f55918","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"0","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":889.6666564941406,"y":670,"wires":[["ac1cfa2a.038e58"]]},{"id":"ac1cfa2a.038e58","type":"change","z":"9fcd592e.f55918","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"upspasstrue","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1049.6666564941406,"y":554,"wires":[["b7b4bd15.d7fa2"]]},{"id":"b7b4bd15.d7fa2","type":"vis in","z":"9fcd592e.f55918","language":"en","x":1102.6666564941406,"y":649,"wires":[[]]},{"id":"8dc2c50e.e88e08","type":"inject","z":"9fcd592e.f55918","name":"","topic":"","payload":"","payloadType":"num","repeat":"","crontab":"","once":true,"x":484.6666564941406,"y":663,"wires":[["60126cec.981b24"]]},{"id":"60126cec.981b24","type":"delay","z":"9fcd592e.f55918","name":"","pauseType":"delay","timeout":"1","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":653.6666564941406,"y":694,"wires":[["8a614b5b.3d8058"]]},{"id":"ec5fb1b8.e2001","type":"comment","z":"f313e1b7.08c8b","name":"Reset button ","info":"","x":913.3333129882812,"y":284.2023868560791,"wires":[]},{"id":"43ae8b1a.fd7f44","type":"inject","z":"f313e1b7.08c8b","name":"","topic":"reset","payload":"true","payloadType":"bool","repeat":"","crontab":"","once":false,"x":544.1547546386719,"y":498.3095235824585,"wires":[["6075c097.499b9"]]},{"id":"2a2825ae.17a41a","type":"inject","z":"f313e1b7.08c8b","name":"","topic":"reset","payload":"false","payloadType":"bool","repeat":"","crontab":"","once":false,"x":539.0119018554688,"y":460.6309652328491,"wires":[["d1af5080.365be"]]},{"id":"221dbc85.065014","type":"trigger","z":"f313e1b7.08c8b","op1":"","op2":"","op1type":"nul","op2type":"pay","duration":"3","extend":false,"units":"s","reset":"","name":"delay reset","x":833.1190567016602,"y":481.738112449646,"wires":[["958e3b4a.a77c78"]]},{"id":"6075c097.499b9","type":"switch","z":"f313e1b7.08c8b","name":"reset","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"reset","vt":"str"}],"checkall":"true","outputs":1,"x":809.4047317504883,"y":410.535719871521,"wires":[["221dbc85.065014","d1af5080.365be"]]},{"id":"958e3b4a.a77c78","type":"change","z":"f313e1b7.08c8b","name":"","rules":[{"t":"change","p":"payload","pt":"msg","from":"true","fromt":"bool","to":"1","tot":"num"},{"t":"change","p":"payload","pt":"msg","from":"false","fromt":"bool","to":"0","tot":"num"},{"t":"change","p":"payload","pt":"msg","from":"99","fromt":"num","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":567.7975540161133,"y":398.2500295639038,"wires":[["3358e1fd.35b8ee"]]},{"id":"3358e1fd.35b8ee","type":"function","z":"f313e1b7.08c8b","name":"flip flop","func":"var newmsg = msg.payload;\nif (newmsg === 0 ) {\n   msg.payload = 1 ;\n}   \nif (newmsg== 1 ) {\n    msg.payload = 0 ;\n}\nreturn msg;","outputs":1,"noerr":0,"x":575.2976608276367,"y":353.53573513031006,"wires":[["d1af5080.365be"]]},{"id":"55bb188f.f8a828","type":"inject","z":"f313e1b7.08c8b","name":"","topic":"factreset","payload":"true","payloadType":"bool","repeat":"","crontab":"","once":false,"x":535.4999771118164,"y":756.2024126052856,"wires":[["3d951457.65054c"]]},{"id":"42e2343f.5c323c","type":"inject","z":"f313e1b7.08c8b","name":"","topic":"factreset","payload":"false","payloadType":"bool","repeat":"","crontab":"","once":false,"x":541.833381652832,"y":711.6667623519897,"wires":[["c10cdcf7.221f2"]]},{"id":"2a60f089.2b133","type":"trigger","z":"f313e1b7.08c8b","op1":"1","op2":"0","op1type":"nul","op2type":"pay","duration":"3","extend":false,"units":"s","reset":"","name":"delay reset","x":888.1309280395508,"y":734.9643087387085,"wires":[["5f6d2859.15ae48"]]},{"id":"3d951457.65054c","type":"switch","z":"f313e1b7.08c8b","name":"","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"factreset","vt":"str"}],"checkall":"true","outputs":1,"x":904.7024002075195,"y":662.8571310043335,"wires":[["2a60f089.2b133","c10cdcf7.221f2"]]},{"id":"5f6d2859.15ae48","type":"change","z":"f313e1b7.08c8b","name":"","rules":[{"t":"change","p":"payload","pt":"msg","from":"true","fromt":"bool","to":"1","tot":"num"},{"t":"change","p":"payload","pt":"msg","from":"false","fromt":"bool","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":684.809455871582,"y":668.4762163162231,"wires":[["fc4bbd17.9cfba"]]},{"id":"fc4bbd17.9cfba","type":"function","z":"f313e1b7.08c8b","name":"flip flop","func":"var newmsg = msg.payload;\nif (newmsg === 0 ) {\n   msg.payload = 1 ;\n}   \nif (newmsg== 1 ) {\n    msg.payload = 0 ;\n}\nreturn msg;","outputs":1,"noerr":0,"x":677.4523696899414,"y":610.190505027771,"wires":[["c10cdcf7.221f2"]]},{"id":"72a34d6e.df7934","type":"comment","z":"f313e1b7.08c8b","name":"Factory Reset Button Reset","info":"","x":814.5833206176758,"y":550.630970954895,"wires":[]},{"id":"45a09e9e.3e1bc","type":"inject","z":"f313e1b7.08c8b","name":"RESET on startup","topic":"reset","payload":"0","payloadType":"num","repeat":"","crontab":"","once":true,"x":1155.9761657714844,"y":288.23811531066895,"wires":[["73428dc1.1b27d4"]]},{"id":"73428dc1.1b27d4","type":"trigger","z":"f313e1b7.08c8b","op1":"","op2":"","op1type":"pay","op2type":"pay","duration":"3","extend":false,"units":"s","reset":"","name":"initialization","x":1388.0595397949219,"y":304.28575325012207,"wires":[["325802cd.b3e50e"]]},{"id":"689f7789.bdfc68","type":"change","z":"f313e1b7.08c8b","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":1151.2499694824219,"y":340.7142810821533,"wires":[["73428dc1.1b27d4"]]},{"id":"2a222a.0572ddd6","type":"switch","z":"f313e1b7.08c8b","name":"reset","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"reset","vt":"str"}],"checkall":"true","outputs":1,"x":987.8689880371094,"y":340.76191902160645,"wires":[["689f7789.bdfc68"]]},{"id":"325802cd.b3e50e","type":"function","z":"f313e1b7.08c8b","name":"SET CALL VARIABLES","func":"var alarm = global.set ('alarm', 0);\nvar blwr = global.set ('blwr', 0);\nvar conveyor = global.set ('conveyor', 0);\nvar hiductpress = global.set ('hiductpress', 0);\nvar permPlo = global.set ('permPlo', 0);\nvar permPhi = global.set ('permPhi', 0);\nvar permDirt = global.set ('permDirt', 0);\nvar begin = global.set ('begin', 0);\nvar step1 = global.set ('step1', 0);\nvar step2 = global.set ('step2', 0);\nvar step3 = global.set ('step3', 0);\nvar step4 = global.set ('step4', 0);\nvar step5 = global.set ('step5', 0);\nvar step6 = global.set ('step6', 0);\nvar step7 = global.set ('step7', 0);\nvar timedout = global.set ('timedout', 0);\nvar timedout_alarm = global.set ('timedout_alarm', 0);\nvar gate = global.set ('gate', 0);\nvar gauge = global.set ('gauge', 1);\nvar table = global.set ('table', 0);\nvar filterlife = global.set ('filterlife', 0);\nvar ballvalve = global.set ('ballvalve', 0);\nvar test_mode = global.set ('test_mode', 0);\nvar dynFill = global.set ('dynFill', 0);\nvar tune = global.set ('tune', 0);\nvar demo_mode = global.set ('demo_mode', 0);\nvar ballchk = global.set ('ballchk', 0);\nvar man_control = global.set ('man_control', 0);\nvar man_fill = global.set ('manfill', 0);\nvar phase = global.set ('phase', 1);\nvar fspasstrue = global.set ('fspasstrue', 0);\nvar fspassword = global.set ('fspassword', 0);\nvar tempPres = global.set ('temp_Pres', 0);\nvar reset = global.set ('reset', 0);\nvar start_stop = global.set ('start_stop', 0);\nvar warnPhi = global.set('warnPhi', 0);\nvar warnPlo = global.set('warnPlo', 0);\nvar warnDirt = global.set('warnDirt', 0);\nvar warn_timedout = global.set('warn_timedout', 0);\nvar rsrtest = global.set ('rsrtest', 0);\nvar brtemp = global.set ('brtemp', 0);\nvar bvtemp = global.set ('bvtemp', 0);\nvar cvtemp = global.set ('cvtemp', 0);\nvar press_calibration = global.set('press_calibration',0);\nvar pcstep1 = global.set ('pcstep1', 0);\nvar pcstep2 = global.set ('pcstep2', 0);\nvar pcstep3 = global.set ('pcstep3', 0);\nvar pcstep4 = global.set ('pcstep4', 0);\nvar pcstep5 = global.set ('pcstep5', 0);\nvar pcstep6 = global.set ('pcstep6', 0);\nvar pcstep7 = global.set ('pcstep7', 0);\nvar realfiltpress = global.set ('realfiltpress',0);\nvar realscrubpress = global.set ('realscrubpress',0);\nvar realductpress = global.set ('realductpress',0);\nvar rawFilt = global.set ('rawFilt',0);\nvar rawScrub = global.set ('rawScrub',0);\nvar rawDuct = global.set ('rawDuct', 0);\nreturn msg;\n","outputs":"1","noerr":0,"x":1374.8691101074219,"y":374.8093433380127,"wires":[[]]},{"id":"6701dc77.1c4fe4","type":"switch","z":"f313e1b7.08c8b","name":"reset","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"reset","vt":"str"}],"checkall":"true","outputs":1,"x":990.3451843261719,"y":378.8093738555908,"wires":[["325802cd.b3e50e"]]},{"id":"dc9d6849.93e778","type":"inject","z":"f313e1b7.08c8b","name":"Inject reset","topic":"reset","payload":"0","payloadType":"num","repeat":"","crontab":"","once":false,"x":1140.8333206176758,"y":530.380970954895,"wires":[["4b4790b0.fccc6"]]},{"id":"4b4790b0.fccc6","type":"trigger","z":"f313e1b7.08c8b","op1":"","op2":"","op1type":"pay","op2type":"pay","duration":"3","extend":false,"units":"s","reset":"","name":"initialization","x":1429.0595169067383,"y":583.285756111145,"wires":[["a174a39e.794fe","e432289e.42b6b8","fe7ca59.c771558"]]},{"id":"cd6ea342.f67ef","type":"change","z":"f313e1b7.08c8b","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":1220.2499465942383,"y":584.7142839431763,"wires":[["4b4790b0.fccc6"]]},{"id":"3ccaa945.113a66","type":"switch","z":"f313e1b7.08c8b","name":"factreset","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"factreset","vt":"str"}],"checkall":"true","outputs":1,"x":1038.8689651489258,"y":581.7619218826294,"wires":[["cd6ea342.f67ef"]]},{"id":"a174a39e.794fe","type":"function","z":"f313e1b7.08c8b","name":"SET CALL VARIABLES 2","func":"var oldFilt = global.set ('oldFilt', 2.5);\nvar oldPhi = global.set ('oldPhi', 7.5);\nvar oldPlo = global.set ('oldPlo', 3.5);\nvar on_time = global.set ('on_time', 8);\nvar off_time = global.set ('off_time', 8);\nvar permDirt = global.set ('permDirt', 0);\nvar permPhi = global.set ('permPhi', 0);\nvar permPlo = global.set ('permPlo', 0);\nvar phase = global.set ('phase', 1);\nvar phase_check = global.set ('phase_check', 1);\nvar Phicount = global.set ('Phicount', 0);\nvar Plocount = global.set ('Plocount', 0);\nvar post_time = global.set ('post_time', 30);\nvar setDirt = global.set ('setDirt', 0.75);\nvar setFilt = global.set ('setFilt', 1.25);\nvar setPhi = global.set ('setPhi', 1.5);\nvar setPlo = global.set ('setPlo', 1.0);\nvar setPres = global.set ('setPres', 5.5);\nvar setfspassword = global.set ('setfspassword', '1234');\n\nreturn msg;\n\n","outputs":"1","noerr":0,"x":1389.8690795898438,"y":736.8093433380127,"wires":[[]]},{"id":"8de01332.95b84","type":"switch","z":"f313e1b7.08c8b","name":"factreset","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"factreset","vt":"str"}],"checkall":"true","outputs":1,"x":1088.3451614379883,"y":635.8093767166138,"wires":[["a174a39e.794fe","e432289e.42b6b8","fe7ca59.c771558"]]},{"id":"23a9936d.896e4c","type":"comment","z":"f313e1b7.08c8b","name":"question qualifier unit set up","info":"","x":1179.1666107177734,"y":1423.6667232513428,"wires":[]},{"id":"c6c9ee20.f1e38","type":"inject","z":"f313e1b7.08c8b","name":"1 SEC PULSE","topic":"","payload":"4","payloadType":"str","repeat":"1","crontab":"","once":true,"x":612.4046936035156,"y":1475.952712059021,"wires":[["a5771822.849428","13f07b67.219525","7282d152.033cc","2aa3aa49.7ed8f6"]]},{"id":"96064422.da25c8","type":"switch","z":"f313e1b7.08c8b","name":"gate","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"gate","vt":"str"}],"checkall":"true","outputs":1,"x":1314.166592915853,"y":1578.6666267712908,"wires":[["a587382c.bd2328","92463f5b.346b7"]]},{"id":"a587382c.bd2328","type":"change","z":"f313e1b7.08c8b","name":"gate","rules":[{"t":"change","p":"payload","pt":"msg","from":"1","fromt":"num","to":"2","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":1489.8492368062339,"y":1576.142741044362,"wires":[["f73c0809.77d938"]]},{"id":"94fa8d0d.3508a","type":"change","z":"f313e1b7.08c8b","name":"filterlife","rules":[{"t":"change","p":"payload","pt":"msg","from":"1","fromt":"num","to":"2","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":1579.4205029805503,"y":1675.2854851086931,"wires":[["f73c0809.77d938"]]},{"id":"75307d0f.461374","type":"switch","z":"f313e1b7.08c8b","name":"filterlife","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"filterlife","vt":"str"}],"checkall":"true","outputs":1,"x":1341.5158322652183,"y":1677.8094509442644,"wires":[["94fa8d0d.3508a","13bc7537.ae33ab"]]},{"id":"c9911c50.5a9d7","type":"switch","z":"f313e1b7.08c8b","name":"ballchk","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"ballchk","vt":"str"}],"checkall":"true","outputs":1,"x":1353.4206008911133,"y":1720.9046392440796,"wires":[["2344a463.c64abc","9de8e8b7.9803d8"]]},{"id":"2344a463.c64abc","type":"change","z":"f313e1b7.08c8b","name":"ballchk","rules":[{"t":"change","p":"payload","pt":"msg","from":"1","fromt":"num","to":"2","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":1603.5993423461914,"y":1719.357050895691,"wires":[["f73c0809.77d938"]]},{"id":"d589f90.70a3008","type":"inject","z":"f313e1b7.08c8b","name":"gate 0","topic":"gate","payload":"0","payloadType":"num","repeat":"","crontab":"","once":true,"x":1802.5000546773276,"y":1698.5000465710955,"wires":[["8b296a51.413018"]]},{"id":"bd57dfa7.38786","type":"inject","z":"f313e1b7.08c8b","name":"gate 1","topic":"gate","payload":"1","payloadType":"num","repeat":"","crontab":"","once":false,"x":1805.8333854675293,"y":1733.5000491142273,"wires":[["8b296a51.413018"]]},{"id":"8b296a51.413018","type":"function","z":"f313e1b7.08c8b","name":"gate test","func":"global.set('gate', msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":2035.595287322998,"y":1715.1667728424072,"wires":[[]]},{"id":"a5771822.849428","type":"change","z":"f313e1b7.08c8b","name":"gate filter","rules":[{"t":"set","p":"topic","pt":"msg","to":"gate","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":920.8333587646484,"y":1505.1904945373535,"wires":[["7fb512a5.df64cc"]]},{"id":"7fb512a5.df64cc","type":"function","z":"f313e1b7.08c8b","name":"gate","func":"msg.payload = global.get('gate');\nreturn msg;\n","outputs":1,"noerr":0,"x":1084.833267211914,"y":1506.8567543029785,"wires":[["96064422.da25c8"]]},{"id":"862d86b3.1045f8","type":"inject","z":"f313e1b7.08c8b","name":"table 0","topic":"table","payload":"0","payloadType":"num","repeat":"","crontab":"","once":false,"x":1805.8333854675293,"y":1770.8333988189697,"wires":[["2b0be016.75e4b"]]},{"id":"a7f904c3.c4eb08","type":"inject","z":"f313e1b7.08c8b","name":"table 1","topic":"table","payload":"1","payloadType":"num","repeat":"","crontab":"","once":false,"x":1811.8333854675293,"y":1809.4999027252197,"wires":[["2b0be016.75e4b"]]},{"id":"2b0be016.75e4b","type":"function","z":"f313e1b7.08c8b","name":"table test","func":"global.set('table', msg.payload);\nreturn msg;\n","outputs":1,"noerr":0,"x":2034.7381858825684,"y":1771.1666507720947,"wires":[[]]},{"id":"b4b6fa61.d42a68","type":"inject","z":"f313e1b7.08c8b","name":"filterlife 0","topic":"filterlife","payload":"0","payloadType":"num","repeat":"","crontab":"","once":false,"x":1804.50004196167,"y":1843.1666507720947,"wires":[["429ffa0e.6501f4"]]},{"id":"feee730b.fb6ed","type":"inject","z":"f313e1b7.08c8b","name":"filterlife 1","topic":"filterlife","payload":"1","payloadType":"num","repeat":"","crontab":"","once":false,"x":1810.50004196167,"y":1883.4999027252197,"wires":[["429ffa0e.6501f4"]]},{"id":"429ffa0e.6501f4","type":"function","z":"f313e1b7.08c8b","name":"filterlife test","func":"global.set('filterlife', msg.payload);\nreturn msg;\n","outputs":1,"noerr":0,"x":2033.9762229919434,"y":1834.9759769439697,"wires":[[]]},{"id":"8fcdb08b.871ba","type":"inject","z":"f313e1b7.08c8b","name":"ballchk 0","topic":"ballchk","payload":"0","payloadType":"num","repeat":"","crontab":"","once":false,"x":2012.1667289733887,"y":1891.5000247955322,"wires":[["66dce1d4.0fdfc"]]},{"id":"a19689d4.a17078","type":"inject","z":"f313e1b7.08c8b","name":"ballchk 1","topic":"ballchk","payload":"1","payloadType":"num","repeat":"","crontab":"","once":false,"x":2016.8333854675293,"y":1938.1666507720947,"wires":[["66dce1d4.0fdfc"]]},{"id":"66dce1d4.0fdfc","type":"function","z":"f313e1b7.08c8b","name":"ballvalve test","func":"global.set('ballchk', msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":2226.738140106201,"y":1901.7856693267822,"wires":[[]]},{"id":"7282d152.033cc","type":"change","z":"f313e1b7.08c8b","name":"filterlife filter","rules":[{"t":"set","p":"topic","pt":"msg","to":"filterlife","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":905.8928070068359,"y":1593.1905555725098,"wires":[["32078201.969bde"]]},{"id":"2aa3aa49.7ed8f6","type":"change","z":"f313e1b7.08c8b","name":"ballvalve filter","rules":[{"t":"set","p":"topic","pt":"msg","to":"ballchk","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":855.2737579345703,"y":1633.1427040100098,"wires":[["b93dba6.a1b0e48"]]},{"id":"53361d38.cfdd24","type":"switch","z":"f313e1b7.08c8b","name":"table","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"table","vt":"str"}],"checkall":"true","outputs":1,"x":1324.166692097982,"y":1623.666708787282,"wires":[["b65ce0f5.92532","c36af044.a2bb9"]]},{"id":"b65ce0f5.92532","type":"change","z":"f313e1b7.08c8b","name":"table","rules":[{"t":"change","p":"payload","pt":"msg","from":"1","fromt":"num","to":"2","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":1508.7380765279136,"y":1616.142798264821,"wires":[["f73c0809.77d938"]]},{"id":"13f07b67.219525","type":"change","z":"f313e1b7.08c8b","name":"table filter","rules":[{"t":"set","p":"topic","pt":"msg","to":"table","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":915.9761199951172,"y":1551.1429481506348,"wires":[["6f428821.555e58"]]},{"id":"6f428821.555e58","type":"function","z":"f313e1b7.08c8b","name":"table","func":"msg.payload = global.get('table');\nreturn msg;\n","outputs":1,"noerr":0,"x":1073.4999542236328,"y":1578.0000038146973,"wires":[["53361d38.cfdd24"]]},{"id":"92463f5b.346b7","type":"function","z":"f313e1b7.08c8b","name":"gate set","func":"global.set('gate', msg.payload);\nif (global.get('gate') === 0 ) {global.set ('table', 0 );\nglobal.set ('filterlife', 0 );\nglobal.set ('ballchk', 0)}\nreturn ;\n","outputs":1,"noerr":0,"x":1670.118968963623,"y":1460.6783838272095,"wires":[[]]},{"id":"c36af044.a2bb9","type":"function","z":"f313e1b7.08c8b","name":"table test","func":"global.set('table', msg.payload);\nif (global.get('table') === 0 ) {\nglobal.set ('filterlife', 0 );\nglobal.set ('ballchk', 0)}\nreturn ;\n","outputs":1,"noerr":0,"x":1678.2379875183105,"y":1517.6666650772095,"wires":[[]]},{"id":"32078201.969bde","type":"function","z":"f313e1b7.08c8b","name":"table and filterlife","func":"msg.payload = global.get('filterlife');\nreturn msg;\n","outputs":1,"noerr":0,"x":1081.4999542236328,"y":1636.9999771118164,"wires":[["75307d0f.461374"]]},{"id":"13bc7537.ae33ab","type":"function","z":"f313e1b7.08c8b","name":"filterlife test","func":"global.set('filterlife', msg.payload);\nif (global.get('filterlife') === 0 ) {\nglobal.set ('ballchk', 0)}\nreturn ;\n","outputs":1,"noerr":0,"x":1722.678539276123,"y":1567.7142724990845,"wires":[[]]},{"id":"b93dba6.a1b0e48","type":"function","z":"f313e1b7.08c8b","name":"table and filterlife and ballvalve","func":"msg.payload = global.get('ballchk');\nreturn msg;\n","outputs":1,"noerr":0,"x":1038.5475769042969,"y":1692.9283065795898,"wires":[["c9911c50.5a9d7"]]},{"id":"9de8e8b7.9803d8","type":"function","z":"f313e1b7.08c8b","name":"ballchk test","func":"global.set('ballchk', msg.payload);\nreturn msg;\n","outputs":1,"noerr":0,"x":1752.785717010498,"y":1625.881142616272,"wires":[[]]},{"id":"d1af5080.365be","type":"vis in","z":"f313e1b7.08c8b","language":"en","x":774.8333206176758,"y":356.238112449646,"wires":[["6701dc77.1c4fe4","2a222a.0572ddd6","6075c097.499b9"]]},{"id":"c10cdcf7.221f2","type":"vis in","z":"f313e1b7.08c8b","language":"en","x":861.8333206176758,"y":618.238112449646,"wires":[["8de01332.95b84","3ccaa945.113a66","3d951457.65054c"]]},{"id":"f73c0809.77d938","type":"vis in","z":"f313e1b7.08c8b","language":"en","x":1390.7381401062012,"y":1441.952416419983,"wires":[["96064422.da25c8","53361d38.cfdd24","75307d0f.461374","c9911c50.5a9d7"]]},{"id":"87e5bd3.81b6e4","type":"comment","z":"f313e1b7.08c8b","name":"Variable List","info":"var start_stop = global.get ('start_stop')||0;\nvar man_control = global.get ('man_control')||0;\nvar test_mode = global.get ('test_mode')||0;\nvar demo_mode = global.get ('demo_mode')||0;\nvar alarm = global.get ('alarm') || 0;\nvar blwr = global.get ('blwr') || 0;\nvar speed = global.get ('speed')|| 0;\nvar flt = global.get ('flt') || 0;\nvar count = global.get ('count') || 0;\n//var permPres = global.get ('permPres') || 2.5;\n//var actPres = global.get ('actPres') || 0;\n//var setPres = global.get ('setPres') || 5.5;\n//var permPlo = global.get ('permPlo') || 0;\n//var permPhi = global.get ('permPhi') || 0;\n//var permDirt = global.get ('permDirt') || 0;\n//var oldPlo = global.get ('oldPlo') || 3.5;\n//var oldPhi = global.get ('oldPhi') || 7.5;\n//var oldFilt = global.get ('oldFilt') || 2.5;\n//var setFilt = global.get ('setFilt') || 1.25;\n//var actFilt = global.get ('actFilt') || 0;\n//var permFilt = global.get ('permFilt') || 0.2;\nvar begin = global.get ('begin') || 0;\nvar step1 = global.get ('step1' ) || 0;\nvar step2 = global.get ('step2' ) || 0;\nvar step3 = global.get ('step3' ) || 0;\nvar step4 = global.get ('step4' ) || 0;\nvar step5 = global.get ('step5' ) || 0;\nvar step6 = global.get ('step6' ) || 0;\nvar step7 = global.get ('step7' ) || 0;\nvar gate = global.get ('gate' ) || 0;\nvar table = global.get ('table' ) || 0;\nvar filterlife = global.get ('filterlife' ) || 0;\nvar ballvalve = global.get ('ballvalve' ) || 0;\nvar gate2 = global.get ('gate2' ) || 0;\nvar table2 = global.get ('table2' ) || 0;\nvar filterlife2 = global.get ('filterlife2' ) || 0;\nvar ballvalve = global.get ('ballchk' ) || 0;\nvar reset = global.get ('reset' ) || 0;\nvar phase = global.get ('phase' ) || 1;\nvar dynFill = global.get ('dynFill' ) || 0;\nvar scott = global.get ('scott') || 0;\nvar tune = global.get ('tune') || 0;\nvar setPhi = global.get ('setPhi') || 1.5;\nvar setPlo = global.get ('setPlo') || 1.5;\nvar setDirt = global.get ('setDirt') || 0.75;\nvar phase_check = global.get ('phase_check') || 1;\n\nvar test = global.set ('test', 1);\nvar alarm = global.set ('alarm', 0);\nvar sys = global.set ('sys', 0);\nvar flt = global.set ('flt', 0);\nvar wtr = global.set ('wtr',  0);\nvar blwr = global.set ('blwr', 0);\nvar count = global.set ('count', 0);\n//var permPres = global.set ('permPres', 5.5);\n//var setPres = global.set ('setPres', 5.5);\nvar actPres = global.set ('actPres', 0);\nvar permPlo = global.set ('permPlo', 0);\nvar permPhi = global.set ('permPhi', 0);\n//var permFilt = global.set ('permFilt', 0.2);\n//var oldPlo = global.set ('oldPlo', 3.5);\n//var oldPhi = global.set ('oldPhi', 7.5);\n//var oldFilt = global.set ('oldFilt', 2.5);\n//var setFilt = global.set ('setFilt', 0.25);\nvar actFilt = global.set ('actFilt', 0);\nvar permDirt = global.set ('permDirt', 0);\nvar begin = global.set ('begin', 0);\nvar begin = global.set ('begin2', 0);\nvar step1 = global.set ('step1', 0);\nvar step2 = global.set ('step2', 0);\nvar step3 = global.set ('step3', 0);\nvar step4 = global.set ('step4', 0);\nvar step5 = global.set ('step5', 0);\nvar step6 = global.set ('step6', 0);\nvar step7 = global.set ('step7', 0);\nvar timedout = global.set ('timedout', 0);\nvar timedout_alarm = global.set ('timedout_alarm', 0);\nvar gate = global.set ('gate', 0);\nvar table = global.set ('table', 0);\nvar filterlife = global.set ('filterlife', 0);\nvar ballvalve = global.set ('ballvalve', 0);\nvar gate = global.set ('gate2', 0);\nvar table = global.set ('table2', 0);\nvar filterlife2 = global.set ('filterlife2', 0);\nvar ballvalve = global.set ('ballvalve', 0);\nvar reset = global.set ('reset', 0);\nvar test_mode = global.set ('test_mode', 0);\nvar phase = global.set ('phase', 1);\nvar dynFill = global.set ('dynFill', 0);\nvar scott = global.set ('scott', 3);\nvar tune = global.set ('tune', 0);\nvar newval1 = global.set ('newval1', 0);\nvar newval2 = global.set ('newval2', 0);\nvar newval3 = global.set ('newval3', 0);\nvar setPhi = global.set ('setPhi', 1.5);\nvar setPlo = global.set ('setPlo', 1.5);\nvar setDirt = global.set ('setDirt', 0.75);\nvar demo_mode = global.set ('demo_mode', 0);\nvar Phicount = global.set ('Phicount', 0);\nvar Plocount = global.set ('Plocount', 0);\nvar Dirtcount = global.set ('Dirtcount', 0);\nvar Timedoutcount = global.set ('Timedoutcount', 0);","x":750.4047241210938,"y":231.3809928894043,"wires":[]},{"id":"e432289e.42b6b8","type":"function","z":"f313e1b7.08c8b","name":"SET CALL VARIABLES 1","func":"var actFilt = global.set ('actFilt', 0);\nvar actPres = global.set ('actPres', 0);\nvar acreset = global.set ('acreset', 0);\nvar afterfilter_check = global.set('afterfilter_check',0);\nvar alarm = global.set ('alarm', 0);\nvar alarmonly_check = global.set ('alarmonly_check', 0);\nvar ballchk = global.set ('ballchk', 0);\nvar ballvalve = global.set ('ballvalve', 0);\nvar begin = global.set ('begin', 0);\nvar blwr = global.set ('blwr', 0);\nvar brreset = global.set ('brreset', 0);\nvar bvreset = global.set ('bvreset', 0);\nvar conveyor = global.set ('conveyor', 0);\nvar coveyor_check = global.set ('conveyor_check',0);\nvar cvcount =global.set ('cvcount', 0);\nvar cvreset = global.set ('cvreset', 0);\nvar demo_mode = global.set ('demo_mode',0);\nvar Dirtcount = global.set ('Dirtcount', 0);\nvar dynFill = global.set ('dynFill', 0);\nvar ductPres = global.set ('duct_Pres', 0);\nvar ducted_check = global.set ('ducted_check', 0);\nvar filterlife = global.set ('filterlife', 0);\nvar flt = global.set ('flt', 0);\nvar gate = global.set ('gate', 0);\nvar hiductpress = global.set ('hiductpress', 0);\nvar man_control = global.set ('man_control', 0);\n\nreturn msg;\n\n","outputs":"1","noerr":0,"x":1391.3333129882812,"y":683.5238513946533,"wires":[[]]},{"id":"fe7ca59.c771558","type":"function","z":"f313e1b7.08c8b","name":"SET CALL VARIABLES 3","func":"var speed = global.set ('speed', 0);\nvar start_stop = global.set ('start_stop',0);\nvar step1 = global.set ('step1' , 0);\nvar step2 = global.set ('step2' , 0);\nvar step3 = global.set ('step3' , 0);\nvar step4 = global.set ('step4' , 0);\nvar step5 = global.set ('step5' , 0);\nvar step6 = global.set ('step6' , 0);\nvar step7 = global.set ('step7' , 0);\nvar table = global.set ('table' , 0);\nvar test_mode = global.set ('test_mode', 0);\nvar timedout = global.set ('timedout', 0);\nvar timedout_alarm = global.set ('timedout_alarm', 0);\nvar Timedoutcount = global.set ('Timedoutcount', 0);\nvar tune = global.set ('tune', 0);\nvar manfill = global.set('manfill', 0);\nvar conveyor_control = global.set('conveyor_control', 0);\nvar warnPhi = global.set('warnPhi', 0);\nvar warnPlo = global.set('warnPlo', 0);\nvar warnDirt = global.set('warnDirt', 0);\nvar warn_timedout = global.set('warn_timedout', 0);\nvar reset = global.set ('reset', 0);\nvar rsrtest = global.set ('rsrtest', 0);\nvar laststartup = global.set ('laststartup',0);\nvar realfiltpress = global.set ('realfiltpress',0);\nvar realscrubpress = global.set ('realscrubpress',0);\nvar realductpress = global.set ('realductpress',0);\n\nreturn msg;\n\n","outputs":"1","noerr":0,"x":1390.3333129882812,"y":782.5238513946533,"wires":[["1c4847f2.c5f748"]]},{"id":"3b760616.2da89a","type":"vis in","z":"f313e1b7.08c8b","language":"en","x":973.9999694824219,"y":3528.547737121582,"wires":[["af574b05.1a6858","615fa362.d29ffc","649161be.e889c","fd6db981.6dfb08","7b587151.1eb6d","c39b562e.b965e8","b62f709e.88b4c","a0e7944a.1e0ba8","c9fe533a.b8b8f"]]},{"id":"af574b05.1a6858","type":"switch","z":"f313e1b7.08c8b","name":"set topic testpermPhi","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"testpermPhi","vt":"str"}],"checkall":"true","outputs":1,"x":1214.5116271972656,"y":3371.809700012207,"wires":[["96b5e018.cb406"]]},{"id":"df8b8daf.68cf9","type":"function","z":"f313e1b7.08c8b","name":"global set testpermPhi","func":"global.set('testalarm',1);\nreturn;","outputs":1,"noerr":0,"x":1595.2264099121094,"y":3376.214241027832,"wires":[[]]},{"id":"986f34b3.066468","type":"comment","z":"f313e1b7.08c8b","name":"Manually set Alarm states from VIS for demo","info":"","x":1067.2499084472656,"y":3323.797737121582,"wires":[]},{"id":"615fa362.d29ffc","type":"switch","z":"f313e1b7.08c8b","name":"set topic testpermPlo","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"testpermPlo","vt":"str"}],"checkall":"true","outputs":1,"x":1217.9999694824219,"y":3421.547737121582,"wires":[["34603e7a.ca1052"]]},{"id":"e6862076.b4337","type":"function","z":"f313e1b7.08c8b","name":"global set testpermPlo","func":"global.set('testalarm',2);\nreturn;","outputs":1,"noerr":0,"x":1598.7147521972656,"y":3425.952278137207,"wires":[[]]},{"id":"649161be.e889c","type":"switch","z":"f313e1b7.08c8b","name":"set topic testpermDirt","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"testpermDirt","vt":"str"}],"checkall":"true","outputs":1,"x":1216.9999694824219,"y":3470.547737121582,"wires":[["6ef88957.90f9e8"]]},{"id":"32cc290a.165fb6","type":"function","z":"f313e1b7.08c8b","name":"global set testpermDirt","func":"global.set('testalarm',3);\nreturn;","outputs":1,"noerr":0,"x":1597.7147521972656,"y":3474.952278137207,"wires":[[]]},{"id":"fd6db981.6dfb08","type":"switch","z":"f313e1b7.08c8b","name":"set topic testtimedout_alarm","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"testtimedout_alarm","vt":"str"}],"checkall":"true","outputs":1,"x":1233.9999694824219,"y":3519.547737121582,"wires":[["42a76031.cfc8e"]]},{"id":"e31150a7.bc0f5","type":"function","z":"f313e1b7.08c8b","name":"global set testtimedout_alarm","func":"global.set('testalarm',4);\nreturn;","outputs":1,"noerr":0,"x":1624.7147521972656,"y":3523.952278137207,"wires":[[]]},{"id":"7b587151.1eb6d","type":"switch","z":"f313e1b7.08c8b","name":"set topic testphase","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"testphase","vt":"str"}],"checkall":"true","outputs":1,"x":1192.9999694824219,"y":3611.547737121582,"wires":[["90a3d77f.201b38"]]},{"id":"20fb6d0d.1fb622","type":"function","z":"f313e1b7.08c8b","name":"global set testphase","func":"global.set('testphase',0);\nreturn;","outputs":1,"noerr":0,"x":1596.7147521972656,"y":3631.952278137207,"wires":[[]]},{"id":"96b5e018.cb406","type":"switch","z":"f313e1b7.08c8b","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"0","vt":"num"},{"t":"eq","v":"1","vt":"num"}],"checkall":"true","outputs":2,"x":1411.4999694824219,"y":3371.547737121582,"wires":[[],["df8b8daf.68cf9"]]},{"id":"34603e7a.ca1052","type":"switch","z":"f313e1b7.08c8b","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"0","vt":"num"},{"t":"eq","v":"1","vt":"num"}],"checkall":"true","outputs":2,"x":1416.9999694824219,"y":3421.547737121582,"wires":[[],["e6862076.b4337"]]},{"id":"6ef88957.90f9e8","type":"switch","z":"f313e1b7.08c8b","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"0","vt":"num"},{"t":"eq","v":"1","vt":"num"}],"checkall":"true","outputs":2,"x":1417.9999694824219,"y":3470.547737121582,"wires":[[],["32cc290a.165fb6"]]},{"id":"42a76031.cfc8e","type":"switch","z":"f313e1b7.08c8b","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"0","vt":"num"},{"t":"eq","v":"1","vt":"num"}],"checkall":"true","outputs":2,"x":1422.9999694824219,"y":3517.547737121582,"wires":[[],["e31150a7.bc0f5"]]},{"id":"90a3d77f.201b38","type":"switch","z":"f313e1b7.08c8b","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"0","vt":"num"},{"t":"eq","v":"1","vt":"num"}],"checkall":"true","outputs":2,"x":1400.9999694824219,"y":3646.547737121582,"wires":[["20fb6d0d.1fb622"],["9babce45.772ae"]]},{"id":"22a1cc87.fd8fd4","type":"vis in","z":"f313e1b7.08c8b","language":"en","x":597.8332748413086,"y":2025.5237188339233,"wires":[["ae4a821.be0dc8","1fbec0ba.49179f","c829e3a3.d0f5f","456ac695.a5afb8","e8b7bc3c.47c3d","9e034c4c.9653d","900341b1.9f2ed","bc3ffd12.fcaf","411efb12.f8be74","3bc60e53.aa8c22","c47f4f58.776a4","54962ff2.89c9d","d94dc4dc.31e688","16ffdf36.daaca1","8c3238d6.f6fc98","80501c55.d86f5","4cf3ed04.769fb4","ad87077c.0bf638"]]},{"id":"940f1604.a29e78","type":"inject","z":"f313e1b7.08c8b","name":"","topic":"man_control","payload":"true","payloadType":"bool","repeat":"","crontab":"","once":false,"x":713.3332710266113,"y":1900.2379522323608,"wires":[["db08fbe8.9e02b8"]]},{"id":"af699585.da33b8","type":"inject","z":"f313e1b7.08c8b","name":"","topic":"man_control","payload":"false","payloadType":"bool","repeat":"","crontab":"","once":false,"x":684.1427955627441,"y":1948.6188116073608,"wires":[["db08fbe8.9e02b8"]]},{"id":"e0d42171.09a19","type":"inject","z":"f313e1b7.08c8b","name":"","topic":"phase_check","payload":"false","payloadType":"bool","repeat":"","crontab":"","once":false,"x":809.1427841186523,"y":1861.9045782089233,"wires":[["497a84dc.bcbbcc"]]},{"id":"d0d98e49.05bbc","type":"inject","z":"f313e1b7.08c8b","name":"","topic":"phase_check","payload":"true","payloadType":"bool","repeat":"","crontab":"","once":false,"x":816.3332748413086,"y":1820.5237188339233,"wires":[["497a84dc.bcbbcc"]]},{"id":"497a84dc.bcbbcc","type":"change","z":"f313e1b7.08c8b","name":"","rules":[{"t":"change","p":"payload","pt":"msg","from":"true","fromt":"bool","to":"1","tot":"num"},{"t":"change","p":"payload","pt":"msg","from":"false","fromt":"bool","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":1310.2261505126953,"y":1850.7738933563232,"wires":[["27a2d92b.d1ef96"]]},{"id":"ae4a821.be0dc8","type":"switch","z":"f313e1b7.08c8b","name":"set topic phase_check","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"phase_check","vt":"str"}],"checkall":"true","outputs":1,"x":1076.3449974060059,"y":1840.7857341766357,"wires":[["497a84dc.bcbbcc"]]},{"id":"1fbec0ba.49179f","type":"switch","z":"f313e1b7.08c8b","name":"set topic man_control","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"man_control","vt":"str"}],"checkall":"true","outputs":1,"x":1075.5671768188477,"y":1881.722155570984,"wires":[["db08fbe8.9e02b8"]]},{"id":"db08fbe8.9e02b8","type":"change","z":"f313e1b7.08c8b","name":"","rules":[{"t":"change","p":"payload","pt":"msg","from":"true","fromt":"bool","to":"1","tot":"num"},{"t":"change","p":"payload","pt":"msg","from":"false","fromt":"bool","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":1311.2261581420898,"y":1886.93265914917,"wires":[["17fc239b.87b24c","97ecff6d.d7981"]]},{"id":"27a2d92b.d1ef96","type":"function","z":"f313e1b7.08c8b","name":"global set phase_check","func":"global.set('phase_check',msg.payload);\nreturn;","outputs":1,"noerr":0,"x":1532.0597686767578,"y":1848.1901531219482,"wires":[[]]},{"id":"17fc239b.87b24c","type":"function","z":"f313e1b7.08c8b","name":"global set man_control","func":"global.set('man_control',msg.payload);\nif (msg.payload === 1){var rsrtest = global.set('rsrtest',1);}\nreturn;","outputs":1,"noerr":0,"x":1532.7265357971191,"y":1882.3489608764648,"wires":[[]]},{"id":"c829e3a3.d0f5f","type":"switch","z":"f313e1b7.08c8b","name":"set topic test_mode","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"test_mode","vt":"str"}],"checkall":"true","outputs":1,"x":1072.182472229004,"y":1922.3212242126465,"wires":[["808b71ef.41043"]]},{"id":"456ac695.a5afb8","type":"switch","z":"f313e1b7.08c8b","name":"set topic demo_mode","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"demo_mode","vt":"str"}],"checkall":"true","outputs":1,"x":1074.3333053588867,"y":1962.968334197998,"wires":[["da0e96cf.b096a8"]]},{"id":"808b71ef.41043","type":"change","z":"f313e1b7.08c8b","name":"","rules":[{"t":"change","p":"payload","pt":"msg","from":"true","fromt":"bool","to":"1","tot":"num"},{"t":"change","p":"payload","pt":"msg","from":"false","fromt":"bool","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":1307.4840240478516,"y":1924.1111822128296,"wires":[["faeb5f3a.8"]]},{"id":"da0e96cf.b096a8","type":"change","z":"f313e1b7.08c8b","name":"","rules":[{"t":"change","p":"payload","pt":"msg","from":"true","fromt":"bool","to":"1","tot":"num"},{"t":"change","p":"payload","pt":"msg","from":"false","fromt":"bool","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":1309.63480758667,"y":1963.5358257293701,"wires":[["ff2c6435.d44ba8"]]},{"id":"faeb5f3a.8","type":"function","z":"f313e1b7.08c8b","name":"global set test_mode","func":"global.set('test_mode',msg.payload);\nreturn;","outputs":1,"noerr":0,"x":1530.2776718139648,"y":1921.74986743927,"wires":[[]]},{"id":"ff2c6435.d44ba8","type":"function","z":"f313e1b7.08c8b","name":"global set demo_mode","func":"global.set('demo_mode',msg.payload);\nreturn;","outputs":1,"noerr":0,"x":1527.983995437622,"y":1962.8413410186768,"wires":[[]]},{"id":"e8b7bc3c.47c3d","type":"switch","z":"f313e1b7.08c8b","name":"set topic begin","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"begin","vt":"str"}],"checkall":"true","outputs":1,"x":1051.1547317504883,"y":2002.848937511444,"wires":[["438b560a.a863e8"]]},{"id":"1952401c.c9ccc","type":"inject","z":"f313e1b7.08c8b","name":"","topic":"begin","payload":"true","payloadType":"str","repeat":"","crontab":"","once":false,"x":625.158561706543,"y":2070.047522544861,"wires":[["e8b7bc3c.47c3d"]]},{"id":"a0ac02d9.b80f1","type":"inject","z":"f313e1b7.08c8b","name":"","topic":"begin","payload":"false","payloadType":"str","repeat":"","crontab":"","once":false,"x":632.8808059692383,"y":2102.852942466736,"wires":[["e8b7bc3c.47c3d"]]},{"id":"438b560a.a863e8","type":"change","z":"f313e1b7.08c8b","name":"","rules":[{"t":"change","p":"payload","pt":"msg","from":"true","fromt":"bool","to":"1","tot":"num"},{"t":"change","p":"payload","pt":"msg","from":"false","fromt":"bool","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":1305.3930130004883,"y":2000.5948276519775,"wires":[["d139ef94.3452f"]]},{"id":"d139ef94.3452f","type":"function","z":"f313e1b7.08c8b","name":"global set begin","func":"global.set('begin',msg.payload);\nreturn;","outputs":1,"noerr":0,"x":1505.9364852905273,"y":2002.7141189575195,"wires":[[]]},{"id":"b15ef1bd.aca5f","type":"comment","z":"f313e1b7.08c8b","name":"Data from VIS","info":"","x":1193.8332633972168,"y":1795.5237503051758,"wires":[]},{"id":"9e034c4c.9653d","type":"switch","z":"f313e1b7.08c8b","name":"set topic conveyor_check","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"conveyor_check","vt":"str"}],"checkall":"true","outputs":1,"x":1073.9005661010742,"y":2040.6745691299438,"wires":[["7f810239.1e420c"]]},{"id":"ca2d983f.514d58","type":"inject","z":"f313e1b7.08c8b","name":"","topic":"conveyor_check","payload":"false","payloadType":"bool","repeat":"","crontab":"","once":false,"x":639.1427841186523,"y":2248.904700279236,"wires":[["7f810239.1e420c"]]},{"id":"a6c56830.56f118","type":"inject","z":"f313e1b7.08c8b","name":"","topic":"conveyor_check","payload":"true","payloadType":"bool","repeat":"","crontab":"","once":false,"x":631.3332748413086,"y":2211.5237188339233,"wires":[["7f810239.1e420c"]]},{"id":"7f810239.1e420c","type":"change","z":"f313e1b7.08c8b","name":"","rules":[{"t":"change","p":"payload","pt":"msg","from":"true","fromt":"bool","to":"1","tot":"num"},{"t":"change","p":"payload","pt":"msg","from":"false","fromt":"bool","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":1302.2261505126953,"y":2040.662823677063,"wires":[["1b8a4f83.ea3e7"]]},{"id":"1b8a4f83.ea3e7","type":"function","z":"f313e1b7.08c8b","name":"global set conveyor_check","func":"global.set('conveyor_check',msg.payload);\nreturn;","outputs":1,"noerr":0,"x":1534.0597457885742,"y":2040.3012504577637,"wires":[[]]},{"id":"900341b1.9f2ed","type":"switch","z":"f313e1b7.08c8b","name":"set topic conveyor_control","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"conveyor_control","vt":"str"}],"checkall":"true","outputs":1,"x":1072.944435119629,"y":2080.7461309432983,"wires":[["d01c8952.689f98"]]},{"id":"d01c8952.689f98","type":"function","z":"f313e1b7.08c8b","name":"global set conveyor_control","func":"global.set('conveyor_control',msg.payload);\nreturn;","outputs":1,"noerr":0,"x":1534.1036911010742,"y":2079.5948734283447,"wires":[[]]},{"id":"bc3ffd12.fcaf","type":"switch","z":"f313e1b7.08c8b","name":"set topic fspassword","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"fspassword","vt":"str"}],"checkall":"true","outputs":1,"x":1050.2777709960938,"y":2117.74577999115,"wires":[["6dd1b909.ff4888"]]},{"id":"6dd1b909.ff4888","type":"function","z":"f313e1b7.08c8b","name":"global set fspassword","func":"global.set('fspassword',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":1512.2147903442383,"y":2116.927800178528,"wires":[[]]},{"id":"91bb5c43.fe18b","type":"exec","z":"f313e1b7.08c8b","command":"sudo reboot #","addpay":false,"append":"","useSpawn":"","name":"System Reboot","x":1470.3333129882812,"y":851.5238513946533,"wires":[[],[],[]]},{"id":"1c4847f2.c5f748","type":"delay","z":"f313e1b7.08c8b","name":"","pauseType":"delay","timeout":"4","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1298.8333129882812,"y":856.5238513946533,"wires":[["91bb5c43.fe18b"]]},{"id":"a0e7944a.1e0ba8","type":"switch","z":"f313e1b7.08c8b","name":"resettestalarms","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"resettestalarms","vt":"str"}],"checkall":"true","outputs":1,"x":860.3332824707031,"y":3588.881233215332,"wires":[["f0e09f26.16be5","3b760616.2da89a"]]},{"id":"f0e09f26.16be5","type":"trigger","z":"f313e1b7.08c8b","op1":"","op2":"","op1type":"nul","op2type":"pay","duration":"3","extend":false,"units":"s","reset":"","name":"delay reset","x":918.047607421875,"y":3628.083625793457,"wires":[["db357b32.f0d1c8"]]},{"id":"db357b32.f0d1c8","type":"change","z":"f313e1b7.08c8b","name":"","rules":[{"t":"change","p":"payload","pt":"msg","from":"true","fromt":"bool","to":"1","tot":"num"},{"t":"change","p":"payload","pt":"msg","from":"false","fromt":"bool","to":"0","tot":"num"},{"t":"change","p":"payload","pt":"msg","from":"99","fromt":"num","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":662.7261047363281,"y":3468.595588684082,"wires":[["ba0d13d5.43dfa"]]},{"id":"ba0d13d5.43dfa","type":"function","z":"f313e1b7.08c8b","name":"flip flop","func":"var newmsg = msg.payload;\nif (newmsg === 0 ) {\n   msg.payload = 1 ;\n}   \nif (newmsg== 1 ) {\n    msg.payload = 0 ;\n}\nreturn msg;","outputs":1,"noerr":0,"x":825.2262115478516,"y":3459.881233215332,"wires":[["3b760616.2da89a"]]},{"id":"8baad793.d92378","type":"inject","z":"f313e1b7.08c8b","name":"","topic":"resettestalarms","payload":"false","payloadType":"bool","repeat":"","crontab":"","once":false,"x":635.9404602050781,"y":3537.976448059082,"wires":[["a0e7944a.1e0ba8"]]},{"id":"2fc532c6.b400fe","type":"inject","z":"f313e1b7.08c8b","name":"","topic":"resettestalarms","payload":"true","payloadType":"bool","repeat":"","crontab":"","once":false,"x":639.0833129882812,"y":3589.655158996582,"wires":[["a0e7944a.1e0ba8"]]},{"id":"b62f709e.88b4c","type":"switch","z":"f313e1b7.08c8b","name":"resettestalarms","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"resettestalarms","vt":"str"}],"checkall":"true","outputs":1,"x":1200.2737121582031,"y":3711.154914855957,"wires":[["6e6c4238.42264c"]]},{"id":"6e6c4238.42264c","type":"function","z":"f313e1b7.08c8b","name":"SET CALL VARIABLES","func":"var testalarm = global.set ('testalarm', 0);\nvar testpermPlo = global.set ('testpermPlo', 0);\nvar testpermPhi = global.set ('testpermPhi', 0);\nvar testpermDirt = global.set ('testpermDirt', 0);\nvar testtimedout_alarm = global.set ('testtimedout_alarm', 0);\nvar testphase = global.set ('testphase', 1);\nvar testhiductpress = global.set ('testhiductpress', 0);\nvar resettestalarms = global.set ('resettestalarms', 0);\n\nreturn msg;\n","outputs":"1","noerr":0,"x":1673.7976379394531,"y":3759.154914855957,"wires":[[]]},{"id":"9ae37ac5.a63358","type":"inject","z":"f313e1b7.08c8b","name":"RESET on startup","topic":"resettestalarms","payload":"0","payloadType":"num","repeat":"","crontab":"","once":true,"x":1393.9046936035156,"y":3768.583625793457,"wires":[["17d7a855.701ac8"]]},{"id":"17d7a855.701ac8","type":"trigger","z":"f313e1b7.08c8b","op1":"","op2":"","op1type":"pay","op2type":"pay","duration":"3","extend":false,"units":"s","reset":"","name":"initialization","x":1580.9880676269531,"y":3708.631233215332,"wires":[["6e6c4238.42264c"]]},{"id":"a3ad81d4.ee6e8","type":"change","z":"f313e1b7.08c8b","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":1398.1784973144531,"y":3691.059700012207,"wires":[["17d7a855.701ac8"]]},{"id":"c39b562e.b965e8","type":"switch","z":"f313e1b7.08c8b","name":"resettestalarms","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"resettestalarms","vt":"str"}],"checkall":"true","outputs":1,"x":1195.7975158691406,"y":3672.107551574707,"wires":[["a3ad81d4.ee6e8"]]},{"id":"f42bdd68.d8fb5","type":"function","z":"f313e1b7.08c8b","name":"global get testalarm state","func":"if (global.get('testalarm')===0) {\n    global.set('testpermPhi', 0);\n    global.set('testpermPlo', 0);\n    global.set('testpermDirt', 0);\n    global.set('testtimedout_alarm', 0);\n    return;\n}\nif (global.get('testalarm')===1) {global.set('testpermPhi', 1);\n    global.set('testpermPlo', 0);\n    global.set('testpermDirt', 0); \n    global.set('testtimedout_alarm', 0);\n    return;\n}\nif (global.get('testalarm')===2) {global.set('testpermPlo', 1);\n    global.set('testpermDirt', 0);\n    global.set('testpermPhi', 0);\n    global.set('testtimedout_alarm', 0);\n    return;\n}\nif (global.get('testalarm')===3) {global.set('testpermDirt', 1);\n    global.set('testpermPhi', 0);\n    global.set('testpermPlo', 0); \n    global.set('testtimedout_alarm', 0);\n    return;\n}\nif (global.get('testalarm')===4) {global.set('testtimedout_alarm', 1);\n    global.set('testpermPhi', 0);\n    global.set('testpermPlo', 0); \n    global.set('testpermDirt', 0);\n    return;\n}\nreturn ;","outputs":1,"noerr":0,"x":893.3333206176758,"y":3976.881169319153,"wires":[[]]},{"id":"44137e23.24bb","type":"inject","z":"f313e1b7.08c8b","name":"ONCE A SEC PULSE","topic":"","payload":"ddd","payloadType":"str","repeat":"1","crontab":"","once":true,"x":614.3333206176758,"y":3810.8809957504272,"wires":[["3395ff68.cfa42","1a9a27b9.fa3238","6ef94975.b42ce8","70e755be.6fad5c","bee2e5cc.3f1ea8","f1edea39.a4ffe8","f42bdd68.d8fb5","b1627bbd.e8c008"]]},{"id":"70e755be.6fad5c","type":"function","z":"f313e1b7.08c8b","name":"global get testpermPhi","func":"msg.payload = global.get('testpermPhi');\nmsg.topic = 'testpermPhi';\nreturn msg;","outputs":1,"noerr":0,"x":896.8333206176758,"y":3758.881169319153,"wires":[["c7dd6366.01141"]]},{"id":"6ef94975.b42ce8","type":"function","z":"f313e1b7.08c8b","name":"global get testpermPlo","func":"msg.payload = global.get('testpermPlo');\nmsg.topic = 'testpermPlo';\nreturn msg;","outputs":1,"noerr":0,"x":892.8333206176758,"y":3805.881169319153,"wires":[["c7dd6366.01141"]]},{"id":"1a9a27b9.fa3238","type":"function","z":"f313e1b7.08c8b","name":"global get testpermDirt","func":"msg.payload = global.get('testpermDirt');\nmsg.topic = 'testpermDirt';\nreturn msg;","outputs":1,"noerr":0,"x":888.8333206176758,"y":3841.881169319153,"wires":[["c7dd6366.01141"]]},{"id":"3395ff68.cfa42","type":"function","z":"f313e1b7.08c8b","name":"global get testtimedout_alarm","func":"msg.payload = global.get('testtimedout_alarm');\nmsg.topic = 'testtimedout_alarm';\nreturn msg;","outputs":1,"noerr":0,"x":889.2619094848633,"y":3878.166813850403,"wires":[["c7dd6366.01141"]]},{"id":"bee2e5cc.3f1ea8","type":"function","z":"f313e1b7.08c8b","name":"global get testphase","func":"msg.payload = global.get('testphase');\nmsg.topic = 'testphase';\nreturn msg;","outputs":1,"noerr":0,"x":912.3333206176758,"y":3723.881169319153,"wires":[["c7dd6366.01141"]]},{"id":"f1edea39.a4ffe8","type":"function","z":"f313e1b7.08c8b","name":"global get testalarm","func":"msg.payload = global.get('testalarm');\nmsg.topic = 'testalarm';\nreturn msg;","outputs":1,"noerr":0,"x":915.000129699707,"y":3688.214665412903,"wires":[["c7dd6366.01141"]]},{"id":"c7dd6366.01141","type":"vis in","z":"f313e1b7.08c8b","language":"en","x":1139.8333053588867,"y":3806.880989074707,"wires":[[]]},{"id":"9babce45.772ae","type":"function","z":"f313e1b7.08c8b","name":"global reset testphase","func":"global.set('testphase',1);\nreturn;","outputs":1,"noerr":0,"x":1600.3332824707031,"y":3667.881233215332,"wires":[[]]},{"id":"411efb12.f8be74","type":"switch","z":"f313e1b7.08c8b","name":"set topic ducted_check","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"ducted_check","vt":"str"}],"checkall":"true","outputs":1,"x":1052.0555877685547,"y":2191.7458095550537,"wires":[["576e2e59.f6b3"]]},{"id":"576e2e59.f6b3","type":"change","z":"f313e1b7.08c8b","name":"","rules":[{"t":"change","p":"payload","pt":"msg","from":"true","fromt":"bool","to":"1","tot":"num"},{"t":"change","p":"payload","pt":"msg","from":"false","fromt":"bool","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":1281.492275238037,"y":2192.84525680542,"wires":[["c4aefc99.ab2b3"]]},{"id":"c4aefc99.ab2b3","type":"function","z":"f313e1b7.08c8b","name":"global set ducted_check","func":"global.set('ducted_check',msg.payload);\nreturn;","outputs":1,"noerr":0,"x":1513.1036758422852,"y":2194.039316177368,"wires":[[]]},{"id":"3bc60e53.aa8c22","type":"switch","z":"f313e1b7.08c8b","name":"set topic afterfilter_check","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"afterfilter_check","vt":"str"}],"checkall":"true","outputs":1,"x":1048.8333358764648,"y":2232.079280614853,"wires":[["82f69403.629328"]]},{"id":"82f69403.629328","type":"change","z":"f313e1b7.08c8b","name":"","rules":[{"t":"change","p":"payload","pt":"msg","from":"true","fromt":"bool","to":"1","tot":"num"},{"t":"change","p":"payload","pt":"msg","from":"false","fromt":"bool","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":1273.8256072998047,"y":2236.5120606422424,"wires":[["1320ba67.93ca06"]]},{"id":"1320ba67.93ca06","type":"function","z":"f313e1b7.08c8b","name":"global set afterfilter_check","func":"global.set('afterfilter_check',msg.payload);\nreturn;","outputs":1,"noerr":0,"x":1517.8815078735352,"y":2235.261484146118,"wires":[[]]},{"id":"c47f4f58.776a4","type":"switch","z":"f313e1b7.08c8b","name":"set topic on_time","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"on_time","vt":"str"}],"checkall":"true","outputs":1,"x":1028.2777862548828,"y":2269.1903400421143,"wires":[["fc90826d.b9a6e"]]},{"id":"fc90826d.b9a6e","type":"function","z":"f313e1b7.08c8b","name":"global set on_time","func":"global.set('on_time',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":1495.1036758422852,"y":2269.372568130493,"wires":[[]]},{"id":"54962ff2.89c9d","type":"switch","z":"f313e1b7.08c8b","name":"set topic off_time","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"off_time","vt":"str"}],"checkall":"true","outputs":1,"x":1030.72220993042,"y":2305.4125356674194,"wires":[["b9afea38.8a5ff8"]]},{"id":"b9afea38.8a5ff8","type":"function","z":"f313e1b7.08c8b","name":"global set off_time","func":"global.set('off_time',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":1491.9925918579102,"y":2303.483652114868,"wires":[[]]},{"id":"d94dc4dc.31e688","type":"switch","z":"f313e1b7.08c8b","name":"set topic post_time","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"post_time","vt":"str"}],"checkall":"true","outputs":1,"x":1027.833366394043,"y":2339.301372528076,"wires":[["80c6163e.e782f8"]]},{"id":"80c6163e.e782f8","type":"function","z":"f313e1b7.08c8b","name":"global set post_time","func":"global.set('post_time',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":1501.3259658813477,"y":2337.372568130493,"wires":[[]]},{"id":"a6905001.b33d7","type":"function","z":"f313e1b7.08c8b","name":"get dynFill","func":"msg.payload = global.get('dynFill');\nmsg.topic = 'dynFill';\nreturn msg;","outputs":1,"noerr":0,"x":970.8214721679688,"y":2545.2497425079346,"wires":[["6756fe03.efce"]]},{"id":"360c062c.de6c9a","type":"function","z":"f313e1b7.08c8b","name":"global get oldPhi","func":"msg.payload = global.get('oldPhi');\nmsg.topic = 'oldPhi';\nreturn msg;","outputs":1,"noerr":0,"x":976.2142562866211,"y":2588.952169418335,"wires":[["6756fe03.efce"]]},{"id":"d7ebf65c.4cd458","type":"function","z":"f313e1b7.08c8b","name":"global get oldPlo","func":"msg.payload = global.get('oldPlo');\nmsg.topic = 'oldPlo';\nreturn msg;","outputs":1,"noerr":0,"x":981.3571090698242,"y":2626.8570232391357,"wires":[["6756fe03.efce"]]},{"id":"6ab569cf.b73368","type":"function","z":"f313e1b7.08c8b","name":"global get setPres","func":"msg.payload = global.get('setPres');\nmsg.topic = 'setPres';\nreturn msg;","outputs":1,"noerr":0,"x":978.9284896850586,"y":2666.9521675109863,"wires":[["6756fe03.efce"]]},{"id":"c177e1d7.ec3c6","type":"function","z":"f313e1b7.08c8b","name":"global get actPres","func":"//var newmsg = global.get('PS0');\n//global.set('actFilt',newmsg);\nmsg.payload = global.get('actPres');\nmsg.topic = 'actPres';\nreturn msg;","outputs":1,"noerr":0,"x":970.78564453125,"y":2704.809374332428,"wires":[["6756fe03.efce"]]},{"id":"bc305131.8e9d9","type":"function","z":"f313e1b7.08c8b","name":"global get actFilt","func":"msg.payload = global.get('actFilt');\nmsg.topic = 'actFilt';\nreturn msg;","outputs":1,"noerr":0,"x":973.9999389648438,"y":2741.928270816803,"wires":[["6756fe03.efce"]]},{"id":"87b787f4.04a678","type":"function","z":"f313e1b7.08c8b","name":"global get permPhi","func":"msg.payload = global.get('permPhi');\nmsg.topic = 'permPhi';\nreturn msg;","outputs":1,"noerr":0,"x":977.8809204101562,"y":2829.095018863678,"wires":[["6756fe03.efce"]]},{"id":"bfcc31eb.8c048","type":"function","z":"f313e1b7.08c8b","name":"global get permPlo","func":"msg.payload = global.get('permPlo');\nmsg.topic = 'permPlo';\nreturn msg;","outputs":1,"noerr":0,"x":974.8809204101562,"y":2868.095018863678,"wires":[["6756fe03.efce"]]},{"id":"417c40d3.4b22e","type":"function","z":"f313e1b7.08c8b","name":"global get permDirt","func":"msg.payload = global.get('permDirt');\nmsg.topic = 'permDirt';\nreturn msg;","outputs":1,"noerr":0,"x":975.8809204101562,"y":2906.095018863678,"wires":[["6756fe03.efce"]]},{"id":"ea289b09.ba85f8","type":"function","z":"f313e1b7.08c8b","name":"global get setFilt","func":"msg.payload = global.get('setFilt');\nmsg.topic = 'setFilt';\nreturn msg;","outputs":1,"noerr":0,"x":984.8809204101562,"y":2781.095018863678,"wires":[["6756fe03.efce"]]},{"id":"6a58086e.568bc8","type":"function","z":"f313e1b7.08c8b","name":"global get timedout_alarm","func":"msg.payload = global.get('timedout_alarm');\nmsg.topic = 'timedout_alarm';\nreturn msg;","outputs":1,"noerr":0,"x":992.4523620605469,"y":2942.0950894355774,"wires":[["1a0e1fc5.0ddb3"]]},{"id":"9604e992.59a1a8","type":"function","z":"f313e1b7.08c8b","name":"global get setPhi","func":"msg.payload = global.get('setPhi');\nmsg.topic = 'setPhi';\nreturn msg;","outputs":1,"noerr":0,"x":978.0237503051758,"y":2984.952301979065,"wires":[["1a0e1fc5.0ddb3"]]},{"id":"6bb34089.587c9","type":"function","z":"f313e1b7.08c8b","name":"global get setPlo","func":"msg.payload = global.get('setPlo');\nmsg.topic = 'setPlo';\nreturn msg;","outputs":1,"noerr":0,"x":969.0237503051758,"y":3022.952301979065,"wires":[["1a0e1fc5.0ddb3"]]},{"id":"12b4278b.a2ab58","type":"function","z":"f313e1b7.08c8b","name":"global get setDirt","func":"msg.payload = global.get('setDirt');\nmsg.topic = 'setDirt';\nreturn msg;","outputs":1,"noerr":0,"x":963.0237503051758,"y":3063.952301979065,"wires":[["1a0e1fc5.0ddb3"]]},{"id":"56e9966b.e9d5f8","type":"function","z":"f313e1b7.08c8b","name":"global get Phicount","func":"msg.payload = global.get('Phicount');\nmsg.topic = 'Phicount';\nreturn msg;","outputs":1,"noerr":0,"x":961.0237503051758,"y":3103.952301979065,"wires":[["1a0e1fc5.0ddb3"]]},{"id":"575737e4.ef13d8","type":"function","z":"f313e1b7.08c8b","name":"global get Plocount","func":"msg.payload = global.get('Plocount');\nmsg.topic = 'Plocount';\nreturn msg;","outputs":1,"noerr":0,"x":964.0237503051758,"y":3146.952301979065,"wires":[["1a0e1fc5.0ddb3"]]},{"id":"ad6c8f23.4cf63","type":"function","z":"f313e1b7.08c8b","name":"global get Dirtcount","func":"msg.payload = global.get('Dirtcount');\nmsg.topic = 'Dirtcount';\nreturn msg;","outputs":1,"noerr":0,"x":963.0237503051758,"y":3193.952301979065,"wires":[["1a0e1fc5.0ddb3"]]},{"id":"1bd0caac.e9e875","type":"function","z":"f313e1b7.08c8b","name":"global get Timedoutcount","func":"msg.payload = global.get('Timedoutcount');\nmsg.topic = 'Timedoutcount';\nreturn msg;","outputs":1,"noerr":0,"x":987.0237503051758,"y":3233.952301979065,"wires":[["1a0e1fc5.0ddb3"]]},{"id":"6756fe03.efce","type":"vis in","z":"f313e1b7.08c8b","language":"en","x":1208.8094100952148,"y":2595.2379236221313,"wires":[[]]},{"id":"227254ae.ea87bc","type":"inject","z":"f313e1b7.08c8b","name":"ONCE A SEC PULSE","topic":"","payload":"ddd","payloadType":"str","repeat":"1","crontab":"","once":true,"x":573.5952072143555,"y":2719.5234875679016,"wires":[["a6905001.b33d7","360c062c.de6c9a","d7ebf65c.4cd458","6ab569cf.b73368","c177e1d7.ec3c6","bc305131.8e9d9","ea289b09.ba85f8","87b787f4.04a678","bfcc31eb.8c048","417c40d3.4b22e"]]},{"id":"1c7fd2cd.02302d","type":"inject","z":"f313e1b7.08c8b","name":"ONCE A SEC PULSE","topic":"","payload":"ddd","payloadType":"str","repeat":"1","crontab":"","once":true,"x":613.4047088623047,"y":3034.6665501594543,"wires":[["6a58086e.568bc8","9604e992.59a1a8","6bb34089.587c9","12b4278b.a2ab58","56e9966b.e9d5f8","575737e4.ef13d8","ad6c8f23.4cf63","1bd0caac.e9e875","7462b656.098dd8"]]},{"id":"1a0e1fc5.0ddb3","type":"vis in","z":"f313e1b7.08c8b","language":"en","x":1265.5475692749023,"y":3160.3806715011597,"wires":[[]]},{"id":"82ff50f9.e1e66","type":"comment","z":"f313e1b7.08c8b","name":"Data to VIS","info":"","x":1334.1190490722656,"y":2538.380558490753,"wires":[]},{"id":"b1432f65.b7bb2","type":"function","z":"f313e1b7.08c8b","name":"get phase_check","func":"msg.payload = global.get('phase_check');\nmsg.topic = 'phase_check';\nreturn msg;","outputs":1,"noerr":0,"x":1691.976131439209,"y":2854.3807287216187,"wires":[["8133f9a3.b9cf88"]]},{"id":"ce3c43b2.d5021","type":"function","z":"f313e1b7.08c8b","name":"global get begin","func":"msg.payload = global.get('begin');\nmsg.topic = 'begin';\nreturn msg;","outputs":1,"noerr":0,"x":1671.9762115478516,"y":2662.951775074005,"wires":[["8133f9a3.b9cf88"]]},{"id":"47504d64.e26384","type":"function","z":"f313e1b7.08c8b","name":"global get demo_mode","func":"msg.payload = global.get('demo_mode');\nmsg.topic = 'demo_mode';\nreturn msg;","outputs":1,"noerr":0,"x":1681.9761810302734,"y":2782.9518823623657,"wires":[["8133f9a3.b9cf88"]]},{"id":"a3f6ad55.856a9","type":"function","z":"f313e1b7.08c8b","name":"global get start_stop","func":"msg.payload = global.get('start_stop');\nmsg.topic = 'start_stop';\nreturn msg;","outputs":1,"noerr":0,"x":1676.261962890625,"y":2744.3806943893433,"wires":[["8133f9a3.b9cf88"]]},{"id":"c312ecd0.b4f0c","type":"function","z":"f313e1b7.08c8b","name":"global get flt","func":"msg.payload = global.get('flt');\nmsg.topic = 'flt';\nreturn msg;","outputs":1,"noerr":0,"x":1650.9285888671875,"y":2624.428234100342,"wires":[["8133f9a3.b9cf88"]]},{"id":"335e6e2e.2230d2","type":"function","z":"f313e1b7.08c8b","name":"global get man_control","func":"msg.payload = global.get('man_control');\nmsg.topic = 'man_control';\nreturn msg;","outputs":1,"noerr":0,"x":1676.8809356689453,"y":2700.4757356643677,"wires":[["8133f9a3.b9cf88"]]},{"id":"193f4b86.9b3654","type":"function","z":"f313e1b7.08c8b","name":"global get test_mode","func":"msg.payload = global.get('test_mode');\nmsg.topic = 'test_mode';\nreturn msg;","outputs":1,"noerr":0,"x":1687.642967224121,"y":2819.951741218567,"wires":[["8133f9a3.b9cf88"]]},{"id":"4c0c2913.ddff68","type":"inject","z":"f313e1b7.08c8b","name":"ONCE A SEC PULSE","topic":"","payload":"ddd","payloadType":"str","repeat":"1","crontab":"","once":true,"x":1421.4047775268555,"y":2746.6658658981323,"wires":[["c312ecd0.b4f0c","ce3c43b2.d5021","335e6e2e.2230d2","a3f6ad55.856a9","47504d64.e26384","193f4b86.9b3654","b1432f65.b7bb2","c6a75fea.b1e22","19fdb6c.18bfe49","2322fe6c.5cc532"]]},{"id":"8133f9a3.b9cf88","type":"vis in","z":"f313e1b7.08c8b","language":"en","x":1988.083324432373,"y":2770.987735748291,"wires":[[]]},{"id":"844ef76e.4bf918","type":"inject","z":"f313e1b7.08c8b","name":"ONCE A SEC PULSE","topic":"","payload":"ddd","payloadType":"str","repeat":"1","crontab":"","once":true,"x":1431.8332138061523,"y":3030.2733540534973,"wires":[["ed3d8503.e40458","505f6f1b.76a82","240a5a80.93e146","cb96160d.248b28","c1c8b8a9.2095f8","d2078256.77741","42dcb66e.54e188","39c7df73.2efab","b1aa93a8.3bfa7"]]},{"id":"f3520225.4eb24","type":"vis in","z":"f313e1b7.08c8b","language":"en","x":2003.0833473205566,"y":3025.451955795288,"wires":[[]]},{"id":"ed3d8503.e40458","type":"function","z":"f313e1b7.08c8b","name":"get ducted_check","func":"msg.payload = global.get('ducted_check');\nmsg.topic = 'ducted_check';\nreturn msg;","outputs":1,"noerr":0,"x":1696.0832977294922,"y":2982.7733459472656,"wires":[["f3520225.4eb24"]]},{"id":"505f6f1b.76a82","type":"function","z":"f313e1b7.08c8b","name":"get afterfilter_check","func":"msg.payload = global.get('afterfilter_check');\nmsg.topic = 'afterfilter_check';\nreturn msg;","outputs":1,"noerr":0,"x":1703.5832977294922,"y":3024.0233459472656,"wires":[["f3520225.4eb24"]]},{"id":"240a5a80.93e146","type":"function","z":"f313e1b7.08c8b","name":"get on_time","func":"msg.payload = global.get('on_time');\nmsg.topic = 'on_time';\nreturn msg;","outputs":1,"noerr":0,"x":1688.5832977294922,"y":3074.0233459472656,"wires":[["f3520225.4eb24"]]},{"id":"cb96160d.248b28","type":"function","z":"f313e1b7.08c8b","name":"get off_time","func":"msg.payload = global.get('off_time');\nmsg.topic = 'off_time';\nreturn msg;","outputs":1,"noerr":0,"x":1691.0832977294922,"y":3114.0233459472656,"wires":[["f3520225.4eb24"]]},{"id":"c1c8b8a9.2095f8","type":"function","z":"f313e1b7.08c8b","name":"get post_time","func":"msg.payload = global.get('post_time');\nmsg.topic = 'post_time';\nreturn msg;","outputs":1,"noerr":0,"x":1698.5832977294922,"y":3151.5233459472656,"wires":[["f3520225.4eb24"]]},{"id":"d2078256.77741","type":"function","z":"f313e1b7.08c8b","name":"global get ductPres","func":"msg.payload = global.get('ductPres');\nmsg.topic = 'ductPres';\nreturn msg;","outputs":1,"noerr":0,"x":1689.8333129882812,"y":2944.856463432312,"wires":[["f3520225.4eb24"]]},{"id":"42dcb66e.54e188","type":"function","z":"f313e1b7.08c8b","name":"global get fspasstrue","func":"msg.payload = global.get('fspasstrue');\nmsg.topic = 'fspasstrue';\nreturn msg;","outputs":1,"noerr":0,"x":1699.8332748413086,"y":3194.856463432312,"wires":[["f3520225.4eb24"]]},{"id":"39c7df73.2efab","type":"function","z":"f313e1b7.08c8b","name":"global get fspassword","func":"msg.payload = global.get('fspassword');\nmsg.topic = 'fspassword';\nreturn msg;","outputs":1,"noerr":0,"x":1704.166648864746,"y":3232.189962387085,"wires":[["f3520225.4eb24"]]},{"id":"16ffdf36.daaca1","type":"switch","z":"f313e1b7.08c8b","name":"set topic setfspassword","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"setfspassword","vt":"str"}],"checkall":"true","outputs":1,"x":1056.4681854248047,"y":2153.5035123825073,"wires":[["739a0f2f.3d9ca"]]},{"id":"739a0f2f.3d9ca","type":"function","z":"f313e1b7.08c8b","name":"global set setfspassword","func":"global.set('setfspassword',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":1518.405288696289,"y":2154.9076738357544,"wires":[[]]},{"id":"b1aa93a8.3bfa7","type":"function","z":"f313e1b7.08c8b","name":"global get setfspassword","func":"msg.payload = global.get('setfspassword');\nmsg.topic = 'setfspassword';\nreturn msg;","outputs":1,"noerr":0,"x":1709.4781951904297,"y":3273.5233459472656,"wires":[["f3520225.4eb24"]]},{"id":"7462b656.098dd8","type":"function","z":"f313e1b7.08c8b","name":"global get cvcount","func":"msg.payload = global.get('cvcount');\nmsg.topic = 'cvcount';\nreturn msg;","outputs":1,"noerr":0,"x":976.8332824707031,"y":3275.5234956741333,"wires":[["1a0e1fc5.0ddb3"]]},{"id":"c6a75fea.b1e22","type":"function","z":"f313e1b7.08c8b","name":"global get hiductpress","func":"msg.payload = global.get('hiductpress');\nmsg.topic = 'hiductpress';\nreturn msg;","outputs":1,"noerr":0,"x":1698.8332977294922,"y":2897.5233459472656,"wires":[["8133f9a3.b9cf88"]]},{"id":"b1627bbd.e8c008","type":"function","z":"f313e1b7.08c8b","name":"global get testhiductpress","func":"msg.payload = global.get('testhiductpress');\nmsg.topic = 'testhiductpress';\nreturn msg;","outputs":1,"noerr":0,"x":885.3333206176758,"y":3927.023991584778,"wires":[["c7dd6366.01141"]]},{"id":"c9fe533a.b8b8f","type":"switch","z":"f313e1b7.08c8b","name":"set topic testhiductpress","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"testhiductpress","vt":"str"}],"checkall":"true","outputs":1,"x":1213.3332824707031,"y":3565.024055480957,"wires":[["3f5994b9.b5cbfc"]]},{"id":"3f5994b9.b5cbfc","type":"switch","z":"f313e1b7.08c8b","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"0","vt":"num"},{"t":"eq","v":"1","vt":"num"}],"checkall":"true","outputs":2,"x":1419.3332824707031,"y":3572.024055480957,"wires":[["9dfcc4b3.390be8"],["82a2f654.d7b508"]]},{"id":"9dfcc4b3.390be8","type":"function","z":"f313e1b7.08c8b","name":"global set testhiductpress","func":"global.set('testhiductpress',0);\nreturn;","outputs":1,"noerr":0,"x":1605.0481262207031,"y":3561.428596496582,"wires":[[]]},{"id":"82a2f654.d7b508","type":"function","z":"f313e1b7.08c8b","name":"global reset testhiductpress","func":"global.set('testhiductpress',1);\nreturn;","outputs":1,"noerr":0,"x":1614.6665344238281,"y":3597.357551574707,"wires":[[]]},{"id":"ad255c7.f5548a","type":"change","z":"f313e1b7.08c8b","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"duct_pressure","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1610.1646785736084,"y":1176.6602050960064,"wires":[["821f2ba4.e1dea8","c2ec8767.322ea8"]]},{"id":"9a221daa.4fe24","type":"function","z":"f313e1b7.08c8b","name":"set filter_pressure 0 if blwr 0","func":"var filter_pressure = global.get ('filter_pressure') || 0;\nvar newval4 = Math.abs(global.get('actFilt') - global.get ('tempPres'));\nif (global.get ('blwr') === 0 && newval4 <= 0.35 ) {\nnewval4 = 0;\n}\nif (global.get ('blwr') === 2 && newval4 <= 0.1 ) {\nnewval4 = 0.1;}\nglobal.set('filter_pressure', newval4);\nmsg.topic = 'filter_pressure';\nmsg.payload = global.get('filter_pressure');\nreturn msg;","outputs":1,"noerr":0,"x":1064.8228454589844,"y":941.3281269073486,"wires":[["cde60862.af4fc8","9768812e.a96fc"]]},{"id":"3414811a.e97d5e","type":"function","z":"f313e1b7.08c8b","name":"global set filter_pressure","func":"var filter_pressure = global.get ('filter_pressure') || 0;\nvar newval4 = Math.abs(global.get('actFilt') - global.get ('tempPres'));\nif (global.get ('blwr') === 2 && newval4 <= 0.1 ) {\nnewval4 = 0.1;}\nglobal.set('filter_pressure', newval4);\nmsg.topic = 'filter_pressure';\nmsg.payload = global.get('filter_pressure');\nreturn msg;","outputs":1,"noerr":0,"x":1052.763298034668,"y":983.4360952377319,"wires":[["cde60862.af4fc8"]]},{"id":"d1dd1271.d174b","type":"function","z":"f313e1b7.08c8b","name":"set actPres 0 if blwr 0","func":"msg.payload = global.get ('actPres');\nif (global.get ('blwr') === 0 && global.get ('actPres') <= 0.45 ) {\nmsg.payload = 0;\n}\nglobal.set ('actPres', msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":1221.5809020996094,"y":1023.2408256530762,"wires":[["554dcf72.10f64","16fcda30.440746"]]},{"id":"554dcf72.10f64","type":"change","z":"f313e1b7.08c8b","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"scrub_pressure","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1501.1285705566406,"y":1017.6813650131226,"wires":[["821f2ba4.e1dea8","18155dfe.2fa512"]]},{"id":"cde60862.af4fc8","type":"change","z":"f313e1b7.08c8b","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"filter_pressure","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1462.548973083496,"y":945.9508209228516,"wires":[["821f2ba4.e1dea8","2e58e6e4.2bd49a"]]},{"id":"821f2ba4.e1dea8","type":"vis in","z":"f313e1b7.08c8b","language":"en","x":1714.8110885620117,"y":994.4472114741802,"wires":[[]]},{"id":"54bd60ce.f0a9d","type":"inject","z":"f313e1b7.08c8b","name":"Start ","topic":"","payload":"","payloadType":"num","repeat":"1","crontab":"","once":true,"x":520.1952095031738,"y":1106.2587070465088,"wires":[["7ee33e58.6e47f","bad979db.a3edc8","f61ba099.7168a"]]},{"id":"bad979db.a3edc8","type":"function","z":"f313e1b7.08c8b","name":"ducted check","func":"if (global.get ('ducted_check') ===1) { \nmsg.payload = 1;\nreturn msg;} \nelse\nmsg.payload = 0;\nreturn msg;\n","outputs":1,"noerr":0,"x":596.4830474853516,"y":1210.5769283771515,"wires":[["1202fd5d.3bf713"]]},{"id":"1202fd5d.3bf713","type":"switch","z":"f313e1b7.08c8b","name":"switch","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"0","vt":"num"},{"t":"eq","v":"1","vt":"num"}],"checkall":"true","outputs":2,"x":762.7727661132812,"y":1207.3428654670715,"wires":[["d3b586ba.71b838"],["c0e696a2.980be8","6a305ea5.5c238"]]},{"id":"c0e696a2.980be8","type":"function","z":"f313e1b7.08c8b","name":"get ductPres","func":"msg.payload = global.get('ductPres');\nmsg.topic = 'ductPres';\nreturn msg;","outputs":1,"noerr":0,"x":1009.730094909668,"y":1202.9002046585083,"wires":[["ad255c7.f5548a"]]},{"id":"7ee33e58.6e47f","type":"function","z":"f313e1b7.08c8b","name":"set Gauge","func":"msg.payload = global.set('gauge', 1);\nmsg.topic = 'gauge';\nreturn msg;","outputs":1,"noerr":0,"x":1518.558609008789,"y":1119.4558095932007,"wires":[["821f2ba4.e1dea8"]]},{"id":"afed861c.708048","type":"comment","z":"f313e1b7.08c8b","name":"Pressures to VIS","info":"","x":1018.7630090713501,"y":873.2227153778076,"wires":[]},{"id":"ff6e7998.c98d08","type":"function","z":"f313e1b7.08c8b","name":"get tempPres","func":"msg.payload = global.get ('tempPres');\nreturn msg;","outputs":1,"noerr":0,"x":1005.9225273132324,"y":1066.690408706665,"wires":[["a054d55d.91e2c8"]]},{"id":"a054d55d.91e2c8","type":"function","z":"f313e1b7.08c8b","name":"set actPres","func":"global.set ('actPres', msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":1177.7205810546875,"y":1068.962978363037,"wires":[["554dcf72.10f64"]]},{"id":"3f536d50.025562","type":"function","z":"f313e1b7.08c8b","name":"global set actPres if ducted","func":"var actPres = global.get ('actPres') || 0;\nvar newval4 = Math.abs(global.get('tempPres') - global.get ('ductPres'));\nglobal.set('actPres', newval4);\nmsg.topic = 'scrubber_pressure';\nmsg.payload = global.get('actPres');\nreturn msg;","outputs":1,"noerr":0,"x":1571.7823944091797,"y":1270.5836429595947,"wires":[["ac1fda5d.5cf2a8","b62af1f2.66451"]]},{"id":"692727a3.f69688","type":"switch","z":"f313e1b7.08c8b","name":"blwr status","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"0","vt":"num"},{"t":"btwn","v":"1","vt":"num","v2":"3","v2t":"num"}],"checkall":"true","outputs":2,"x":577.5730667114258,"y":877.2127685546875,"wires":[["9a221daa.4fe24"],["3414811a.e97d5e"]]},{"id":"786ce092.b62d1","type":"function","z":"f313e1b7.08c8b","name":"get tempPres","func":"msg.payload = global.get ('tempPres');\nreturn msg;","outputs":1,"noerr":0,"x":1014.3972587585449,"y":1021.5389995574951,"wires":[["d1dd1271.d174b"]]},{"id":"6a305ea5.5c238","type":"function","z":"f313e1b7.08c8b","name":"BLWR STATUS","func":"msg.payload = global.get('blwr');\nreturn msg;","outputs":1,"noerr":0,"x":991.5387268066406,"y":1269.816813468933,"wires":[["c4b6636c.8ce29"]]},{"id":"c4b6636c.8ce29","type":"switch","z":"f313e1b7.08c8b","name":"blwr status","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"0","vt":"num"},{"t":"btwn","v":"1","vt":"num","v2":"3","v2t":"num"}],"checkall":"true","outputs":2,"x":1358.966911315918,"y":1279.586459159851,"wires":[["3f536d50.025562"],["d19fc96f.c50278"]]},{"id":"ac1fda5d.5cf2a8","type":"function","z":"f313e1b7.08c8b","name":"set actPres 0 if blwr 0","func":"msg.payload = global.get ('actPres');\nif (global.get ('blwr') === 0 && global.get ('actPres') <= 0.45 ) {\nmsg.payload = 0;\n}\nglobal.set ('actPres', msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":1821.7001724243164,"y":1228.205617904663,"wires":[["da11432.7dc6ec","97f45752.473278"]]},{"id":"da11432.7dc6ec","type":"change","z":"f313e1b7.08c8b","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"scrub_pressure","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1866.8033294677734,"y":1143.8682823181152,"wires":[["821f2ba4.e1dea8","8e322e2e.42de6"]]},{"id":"d19fc96f.c50278","type":"function","z":"f313e1b7.08c8b","name":"global set actPres if ducted","func":"var actPres = global.get ('actPres') || 0;\nvar newval4 = Math.abs(global.get('tempPres') - global.get ('ductPres'));\nglobal.set('actPres', newval4);\nmsg.topic = 'scrubber_pressure';\nmsg.payload = global.get('actPres');\nreturn msg;","outputs":1,"noerr":0,"x":1572.7718811035156,"y":1306.5591773986816,"wires":[["da11432.7dc6ec"]]},{"id":"afee646a.50df28","type":"comment","z":"f313e1b7.08c8b","name":"If ducted, scrubber is difference of actPres and ductPres","info":"","x":1475.7315063476562,"y":1232.3470058441162,"wires":[]},{"id":"97f45752.473278","type":"debug","z":"f313e1b7.08c8b","name":"","active":false,"console":"false","complete":"false","x":2004.5519561767578,"y":1260.1224174499512,"wires":[]},{"id":"9b9a2cdf.3400d","type":"debug","z":"f313e1b7.08c8b","name":"","active":false,"console":"false","complete":"false","x":2007.549087524414,"y":1312.125286102295,"wires":[]},{"id":"9768812e.a96fc","type":"debug","z":"f313e1b7.08c8b","name":"","active":false,"console":"false","complete":"false","x":1362.5520477294922,"y":898.119580745697,"wires":[]},{"id":"16fcda30.440746","type":"debug","z":"f313e1b7.08c8b","name":"","active":false,"console":"false","complete":"false","x":1482.8133239746094,"y":982.0286922454834,"wires":[]},{"id":"2e58e6e4.2bd49a","type":"debug","z":"f313e1b7.08c8b","name":"","active":false,"console":"false","complete":"false","x":1804.5406188964844,"y":906.7559633255005,"wires":[]},{"id":"18155dfe.2fa512","type":"debug","z":"f313e1b7.08c8b","name":"","active":false,"console":"false","complete":"false","x":1872.5434646606445,"y":1016.7530536651611,"wires":[]},{"id":"c2ec8767.322ea8","type":"debug","z":"f313e1b7.08c8b","name":"","active":false,"console":"false","complete":"false","x":1929.2678985595703,"y":1051.755931854248,"wires":[]},{"id":"8e322e2e.42de6","type":"debug","z":"f313e1b7.08c8b","name":"","active":false,"console":"false","complete":"false","x":2079.279296875,"y":1171.7559232711792,"wires":[]},{"id":"b62af1f2.66451","type":"debug","z":"f313e1b7.08c8b","name":"","active":false,"console":"false","complete":"false","x":1885.5462799072266,"y":1389.483226776123,"wires":[]},{"id":"19fdb6c.18bfe49","type":"function","z":"f313e1b7.08c8b","name":"global get tempPres","func":"msg.payload = global.get('tempPres');\nmsg.topic = 'tempPres';\nreturn msg;","outputs":1,"noerr":0,"x":1682.233772277832,"y":2586.289577484131,"wires":[["8133f9a3.b9cf88"]]},{"id":"f61ba099.7168a","type":"function","z":"f313e1b7.08c8b","name":"BLWR STATUS","func":"msg.payload = global.get('blwr');\nreturn msg;","outputs":1,"noerr":0,"x":512.4677276611328,"y":988.0476188659668,"wires":[["692727a3.f69688"]]},{"id":"d3b586ba.71b838","type":"function","z":"f313e1b7.08c8b","name":"BLWR STATUS","func":"msg.payload = global.get('blwr');\nreturn msg;","outputs":1,"noerr":0,"x":790.8702087402344,"y":1146.1082878112793,"wires":[["f2db0e28.7e0f2"]]},{"id":"f2db0e28.7e0f2","type":"switch","z":"f313e1b7.08c8b","name":"blwr status","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"0","vt":"num"},{"t":"btwn","v":"1","vt":"num","v2":"3","v2t":"num"}],"checkall":"true","outputs":2,"x":777.9755477905273,"y":1058.2734718322754,"wires":[["786ce092.b62d1"],["ff6e7998.c98d08"]]},{"id":"8c3238d6.f6fc98","type":"switch","z":"f313e1b7.08c8b","name":"set topic alarmonly_check","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"alarmonly_check","vt":"str"}],"checkall":"true","outputs":1,"x":1053.7445755004883,"y":2372.7345876693726,"wires":[["51123ecd.e5969"]]},{"id":"51123ecd.e5969","type":"change","z":"f313e1b7.08c8b","name":"","rules":[{"t":"change","p":"payload","pt":"msg","from":"true","fromt":"bool","to":"1","tot":"num"},{"t":"change","p":"payload","pt":"msg","from":"false","fromt":"bool","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":1276.5146255493164,"y":2372.7227878570557,"wires":[["a70e2739.4d3828"]]},{"id":"a70e2739.4d3828","type":"function","z":"f313e1b7.08c8b","name":"global set alarmonly_check","func":"global.set('alarmonly_check',msg.payload);\nreturn;","outputs":1,"noerr":0,"x":1515.0149307250977,"y":2371.805917739868,"wires":[[]]},{"id":"2322fe6c.5cc532","type":"function","z":"f313e1b7.08c8b","name":"global get alarmonly_check","func":"msg.payload = global.get('alarmonly_check');\nmsg.topic = 'alarmonly_check';\nreturn msg;","outputs":1,"noerr":0,"x":1694.8151016235352,"y":2548.5321021080017,"wires":[["8133f9a3.b9cf88"]]},{"id":"258f0153.45c8ae","type":"comment","z":"f313e1b7.08c8b","name":"For Alarm-Only Unit, flash warning alarms","info":"","x":1413.8818882533483,"y":4019.4762303488587,"wires":[]},{"id":"fe5e69fa.1cf3e8","type":"inject","z":"f313e1b7.08c8b","name":"ONCE A SEC PULSE","topic":"","payload":"ddd","payloadType":"str","repeat":"1","crontab":"","once":true,"x":660.6676025390625,"y":4284.297658920288,"wires":[["640178d9.63af88","9d60b76d.004808","1b2399be.83d596","485be79b.9ffae8"]]},{"id":"640178d9.63af88","type":"function","z":"f313e1b7.08c8b","name":"global get warnPhi","func":"msg.payload = global.get('warnPhi');\nmsg.topic = 'warnPhi';\nreturn msg;","outputs":1,"noerr":0,"x":918.2391052246094,"y":4113.297839164734,"wires":[["1e87648b.5cd8eb"]]},{"id":"9d60b76d.004808","type":"function","z":"f313e1b7.08c8b","name":"global get warnPlo","func":"msg.payload = global.get('warnPlo');\nmsg.topic = 'warnPlo';\nreturn msg;","outputs":1,"noerr":0,"x":923.2390823364258,"y":4250.440057754517,"wires":[["54e715f1.36945c"]]},{"id":"1b2399be.83d596","type":"function","z":"f313e1b7.08c8b","name":"global get warnDirt","func":"msg.payload = global.get('warnDirt');\nmsg.topic = 'warnDirt';\nreturn msg;","outputs":1,"noerr":0,"x":960.4534072875977,"y":4519.226301193237,"wires":[["c875267e.b90ec8"]]},{"id":"485be79b.9ffae8","type":"function","z":"f313e1b7.08c8b","name":"global get warn_timedout","func":"msg.payload = global.get('warn_timedout');\nmsg.topic = 'warn_timedout';\nreturn msg;","outputs":1,"noerr":0,"x":966.1320037841797,"y":4693.90410900116,"wires":[["f46f742d.f79a88"]]},{"id":"cc185dbf.634fb","type":"vis in","z":"f313e1b7.08c8b","language":"en","x":2000.4531860351562,"y":4455.5836353302,"wires":[[]]},{"id":"c875267e.b90ec8","type":"switch","z":"f313e1b7.08c8b","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"0","vt":"num"},{"t":"eq","v":"1","vt":"num"}],"checkall":"true","outputs":2,"x":1148.0247802734375,"y":4447.79701423645,"wires":[["9852fba6.c8ee48","6e657469.9df10c"],["e837ccef.8ac01"]]},{"id":"6e657469.9df10c","type":"change","z":"f313e1b7.08c8b","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"warnDirt","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1757.1676177978516,"y":4491.082572937012,"wires":[["cc185dbf.634fb"]]},{"id":"44ef6b3b.8902f4","type":"trigger","z":"f313e1b7.08c8b","op1":"1","op2":"0","op1type":"num","op2type":"num","duration":"2","extend":false,"units":"s","reset":"reset","name":"","x":1409.5962829589844,"y":4526.22585773468,"wires":[["5dbccc7b.60e914"]]},{"id":"ab8e6732.aa8898","type":"trigger","z":"f313e1b7.08c8b","op1":"0","op2":"1","op1type":"num","op2type":"num","duration":"2","extend":false,"units":"s","reset":"reset","name":"","x":1410.5962829589844,"y":4599.22585773468,"wires":[["9ba9a5b1.4b7588"]]},{"id":"71a79024.1d969","type":"change","z":"f313e1b7.08c8b","name":"","rules":[{"t":"set","p":"reset","pt":"msg","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":1231.5963516235352,"y":4526.2257623672485,"wires":[["44ef6b3b.8902f4"]]},{"id":"f97371a9.47aa5","type":"change","z":"f313e1b7.08c8b","name":"","rules":[{"t":"set","p":"reset","pt":"msg","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":1224.5963592529297,"y":4585.2257623672485,"wires":[["ab8e6732.aa8898"]]},{"id":"9ba9a5b1.4b7588","type":"switch","z":"f313e1b7.08c8b","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"num"},{"t":"eq","v":"0","vt":"num"}],"checkall":"true","outputs":2,"x":1546.0129089355469,"y":4587.39236164093,"wires":[["44ef6b3b.8902f4"],["6e8de5b1.f19e3c","71a79024.1d969"]]},{"id":"5dbccc7b.60e914","type":"switch","z":"f313e1b7.08c8b","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"num"},{"t":"eq","v":"0","vt":"num"}],"checkall":"true","outputs":2,"x":1547.5129089355469,"y":4526.39236164093,"wires":[["6e8de5b1.f19e3c","f97371a9.47aa5"],["ab8e6732.aa8898"]]},{"id":"6e8de5b1.f19e3c","type":"rbe","z":"f313e1b7.08c8b","name":"","func":"rbe","gap":"","start":"","inout":"out","x":1737.5129089355469,"y":4563.39236164093,"wires":[["6e657469.9df10c"]]},{"id":"9852fba6.c8ee48","type":"change","z":"f313e1b7.08c8b","name":"","rules":[{"t":"set","p":"reset","pt":"msg","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":1457.7391510009766,"y":4457.65465927124,"wires":[["ab8e6732.aa8898","44ef6b3b.8902f4"]]},{"id":"f46f742d.f79a88","type":"switch","z":"f313e1b7.08c8b","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"0","vt":"num"},{"t":"eq","v":"1","vt":"num"}],"checkall":"true","outputs":2,"x":1133.4676513671875,"y":4630.93275642395,"wires":[["ab59dfe3.07e1f","59605def.0e90c4"],["302fa82e.e17b38"]]},{"id":"59605def.0e90c4","type":"change","z":"f313e1b7.08c8b","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"warn_timedout","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1690.6104621887207,"y":4694.218306541443,"wires":[["cc185dbf.634fb"]]},{"id":"9980497a.9501d8","type":"trigger","z":"f313e1b7.08c8b","op1":"1","op2":"0","op1type":"num","op2type":"num","duration":"2","extend":false,"units":"s","reset":"reset","name":"","x":1343.0391273498535,"y":4729.361591339111,"wires":[["2c6ee8bb.16f1b8"]]},{"id":"c7299150.b0367","type":"trigger","z":"f313e1b7.08c8b","op1":"0","op2":"1","op1type":"num","op2type":"num","duration":"2","extend":false,"units":"s","reset":"reset","name":"","x":1344.0391273498535,"y":4802.361591339111,"wires":[["f65b8397.1dab2"]]},{"id":"c2b7251e.6d06f8","type":"change","z":"f313e1b7.08c8b","name":"","rules":[{"t":"set","p":"reset","pt":"msg","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":1165.0391960144043,"y":4729.36149597168,"wires":[["9980497a.9501d8"]]},{"id":"84f4c3f5.c202a","type":"change","z":"f313e1b7.08c8b","name":"","rules":[{"t":"set","p":"reset","pt":"msg","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":1158.0392036437988,"y":4788.36149597168,"wires":[["c7299150.b0367"]]},{"id":"f65b8397.1dab2","type":"switch","z":"f313e1b7.08c8b","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"num"},{"t":"eq","v":"0","vt":"num"}],"checkall":"true","outputs":2,"x":1479.455753326416,"y":4790.528095245361,"wires":[["9980497a.9501d8"],["cb36a624.59b278","c2b7251e.6d06f8"]]},{"id":"2c6ee8bb.16f1b8","type":"switch","z":"f313e1b7.08c8b","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"num"},{"t":"eq","v":"0","vt":"num"}],"checkall":"true","outputs":2,"x":1480.955753326416,"y":4729.528095245361,"wires":[["cb36a624.59b278","84f4c3f5.c202a"],["c7299150.b0367"]]},{"id":"cb36a624.59b278","type":"rbe","z":"f313e1b7.08c8b","name":"","func":"rbe","gap":"","start":"","inout":"out","x":1670.955753326416,"y":4766.528095245361,"wires":[["59605def.0e90c4"]]},{"id":"ab59dfe3.07e1f","type":"change","z":"f313e1b7.08c8b","name":"","rules":[{"t":"set","p":"reset","pt":"msg","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":1391.1819953918457,"y":4660.790392875671,"wires":[["c7299150.b0367","9980497a.9501d8"]]},{"id":"1e87648b.5cd8eb","type":"switch","z":"f313e1b7.08c8b","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"0","vt":"num"},{"t":"eq","v":"1","vt":"num"}],"checkall":"true","outputs":2,"x":1088.6676025390625,"y":4044.797746658325,"wires":[["e59a0a9a.8e5138","92077e57.fd6d"],["ef11171d.0174e8"]]},{"id":"92077e57.fd6d","type":"change","z":"f313e1b7.08c8b","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"warnPhi","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1698.8104286193848,"y":4101.083083152771,"wires":[["cc185dbf.634fb"]]},{"id":"a1f81464.143e98","type":"trigger","z":"f313e1b7.08c8b","op1":"1","op2":"0","op1type":"num","op2type":"num","duration":"2","extend":false,"units":"s","reset":"reset","name":"","x":1351.2390937805176,"y":4136.226367950439,"wires":[["3140f758.4bbc78"]]},{"id":"429f46ab.092f38","type":"trigger","z":"f313e1b7.08c8b","op1":"0","op2":"1","op1type":"num","op2type":"num","duration":"2","extend":false,"units":"s","reset":"reset","name":"","x":1352.2390937805176,"y":4209.226367950439,"wires":[["b39fa0aa.ba815"]]},{"id":"940c93b.e6df57","type":"change","z":"f313e1b7.08c8b","name":"","rules":[{"t":"set","p":"reset","pt":"msg","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":1173.2391624450684,"y":4136.226272583008,"wires":[["a1f81464.143e98"]]},{"id":"ea21ef97.3425c","type":"change","z":"f313e1b7.08c8b","name":"","rules":[{"t":"set","p":"reset","pt":"msg","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":1166.239170074463,"y":4195.226272583008,"wires":[["429f46ab.092f38"]]},{"id":"b39fa0aa.ba815","type":"switch","z":"f313e1b7.08c8b","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"num"},{"t":"eq","v":"0","vt":"num"}],"checkall":"true","outputs":2,"x":1487.65571975708,"y":4197.392871856689,"wires":[["a1f81464.143e98"],["69cb7c62.3416e4","940c93b.e6df57"]]},{"id":"3140f758.4bbc78","type":"switch","z":"f313e1b7.08c8b","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"num"},{"t":"eq","v":"0","vt":"num"}],"checkall":"true","outputs":2,"x":1489.15571975708,"y":4136.392871856689,"wires":[["69cb7c62.3416e4","ea21ef97.3425c"],["429f46ab.092f38"]]},{"id":"69cb7c62.3416e4","type":"rbe","z":"f313e1b7.08c8b","name":"","func":"rbe","gap":"","start":"","inout":"out","x":1679.15571975708,"y":4173.392871856689,"wires":[["92077e57.fd6d"]]},{"id":"e59a0a9a.8e5138","type":"change","z":"f313e1b7.08c8b","name":"","rules":[{"t":"set","p":"reset","pt":"msg","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":1399.3819618225098,"y":4067.6551694869995,"wires":[["429f46ab.092f38","a1f81464.143e98"]]},{"id":"54e715f1.36945c","type":"switch","z":"f313e1b7.08c8b","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"0","vt":"num"},{"t":"eq","v":"1","vt":"num"}],"checkall":"true","outputs":2,"x":1093.6676025390625,"y":4242.047746658325,"wires":[["53172847.16a698","bc9cabae.32c058"],["4ca88b90.fdb354"]]},{"id":"bc9cabae.32c058","type":"change","z":"f313e1b7.08c8b","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"warnPlo","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1678.8104286193848,"y":4292.333083152771,"wires":[["cc185dbf.634fb"]]},{"id":"234b1f8d.98ad9","type":"trigger","z":"f313e1b7.08c8b","op1":"1","op2":"0","op1type":"num","op2type":"num","duration":"2","extend":false,"units":"s","reset":"reset","name":"","x":1331.2390937805176,"y":4327.476367950439,"wires":[["90aecb53.00c2c8"]]},{"id":"cc5b1ed3.115c8","type":"trigger","z":"f313e1b7.08c8b","op1":"0","op2":"1","op1type":"num","op2type":"num","duration":"2","extend":false,"units":"s","reset":"reset","name":"","x":1332.2390937805176,"y":4400.476367950439,"wires":[["dde7feeb.3a36"]]},{"id":"d3debdd7.5f1d6","type":"change","z":"f313e1b7.08c8b","name":"","rules":[{"t":"set","p":"reset","pt":"msg","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":1153.2391624450684,"y":4327.476272583008,"wires":[["234b1f8d.98ad9"]]},{"id":"20fd95c2.e26c7a","type":"change","z":"f313e1b7.08c8b","name":"","rules":[{"t":"set","p":"reset","pt":"msg","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":1146.239170074463,"y":4386.476272583008,"wires":[["cc5b1ed3.115c8"]]},{"id":"dde7feeb.3a36","type":"switch","z":"f313e1b7.08c8b","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"num"},{"t":"eq","v":"0","vt":"num"}],"checkall":"true","outputs":2,"x":1467.65571975708,"y":4388.642871856689,"wires":[["234b1f8d.98ad9"],["d6ad13b.86b14f","d3debdd7.5f1d6"]]},{"id":"90aecb53.00c2c8","type":"switch","z":"f313e1b7.08c8b","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"num"},{"t":"eq","v":"0","vt":"num"}],"checkall":"true","outputs":2,"x":1469.15571975708,"y":4327.642871856689,"wires":[["d6ad13b.86b14f","20fd95c2.e26c7a"],["cc5b1ed3.115c8"]]},{"id":"d6ad13b.86b14f","type":"rbe","z":"f313e1b7.08c8b","name":"","func":"rbe","gap":"","start":"","inout":"out","x":1659.15571975708,"y":4364.642871856689,"wires":[["bc9cabae.32c058"]]},{"id":"53172847.16a698","type":"change","z":"f313e1b7.08c8b","name":"","rules":[{"t":"set","p":"reset","pt":"msg","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":1379.3819618225098,"y":4258.9051694869995,"wires":[["cc5b1ed3.115c8","234b1f8d.98ad9"]]},{"id":"a019c46d.56da88","type":"function","z":"f313e1b7.08c8b","name":"set warnPhi alarm","func":"global.set('warnPhi',msg.payload);\nreturn;","outputs":1,"noerr":0,"x":887.9047241210938,"y":4768.6666431427,"wires":[[]]},{"id":"2efd54c4.d2427c","type":"function","z":"f313e1b7.08c8b","name":"set warnPlo alarm","func":"global.set('warnPlo',msg.payload);\nreturn;","outputs":1,"noerr":0,"x":890.8594360351562,"y":4838.538146972656,"wires":[[]]},{"id":"f2f37712.29f348","type":"function","z":"f313e1b7.08c8b","name":"set warnDirt alarm","func":"global.set('warnDirt',msg.payload);\nreturn;","outputs":1,"noerr":0,"x":891.8594436645508,"y":4884.538123130798,"wires":[[]]},{"id":"698100c6.e6d8e","type":"function","z":"f313e1b7.08c8b","name":"set warn_timedout","func":"global.set('warn_timedout',msg.payload);\nreturn;","outputs":1,"noerr":0,"x":890.8596496582031,"y":4941.538024902344,"wires":[[]]},{"id":"bc6aa782.31fa08","type":"inject","z":"f313e1b7.08c8b","name":"ALRM 0","topic":"","payload":"0","payloadType":"num","repeat":"","crontab":"","once":false,"x":685.1774444580078,"y":4755.666652679443,"wires":[["a019c46d.56da88"]]},{"id":"1c455248.1b5f9e","type":"inject","z":"f313e1b7.08c8b","name":"ALRM 1","topic":"","payload":"1","payloadType":"num","repeat":"","crontab":"","once":false,"x":688.5108184814453,"y":4788.000008583069,"wires":[["a019c46d.56da88"]]},{"id":"2254eb82.c63c94","type":"inject","z":"f313e1b7.08c8b","name":"ALRM 0","topic":"","payload":"0","payloadType":"num","repeat":"","crontab":"","once":false,"x":685.1774520874023,"y":4824.666660308838,"wires":[["2efd54c4.d2427c"]]},{"id":"73cb6cb4.e29624","type":"inject","z":"f313e1b7.08c8b","name":"ALRM 1","topic":"","payload":"1","payloadType":"num","repeat":"","crontab":"","once":false,"x":689.5108261108398,"y":4856.000031471252,"wires":[["2efd54c4.d2427c"]]},{"id":"6c64d74e.881c98","type":"inject","z":"f313e1b7.08c8b","name":"ALRM 0","topic":"","payload":"0","payloadType":"num","repeat":"","crontab":"","once":false,"x":678.1774444580078,"y":4889.6609926223755,"wires":[["f2f37712.29f348"]]},{"id":"646ba0cf.655e9","type":"inject","z":"f313e1b7.08c8b","name":"ALRM 1","topic":"","payload":"1","payloadType":"num","repeat":"","crontab":"","once":false,"x":678.5108222961426,"y":4920.994333267212,"wires":[["f2f37712.29f348"]]},{"id":"1ed4eb3c.8ba495","type":"inject","z":"f313e1b7.08c8b","name":"ALRM 0","topic":"","payload":"0","payloadType":"num","repeat":"","crontab":"","once":false,"x":676.1632423400879,"y":4952.6666440963745,"wires":[["698100c6.e6d8e"]]},{"id":"bac7e5f6.787328","type":"inject","z":"f313e1b7.08c8b","name":"ALRM 1","topic":"","payload":"1","payloadType":"num","repeat":"","crontab":"","once":false,"x":677.4966163635254,"y":4980,"wires":[["698100c6.e6d8e"]]},{"id":"ef11171d.0174e8","type":"trigger","z":"f313e1b7.08c8b","op1":"1","op2":"","op1type":"num","op2type":"nul","duration":"2","extend":true,"units":"s","reset":"99","name":"","x":1201.3333129882812,"y":4079.38099861145,"wires":[["a1f81464.143e98"]]},{"id":"4ca88b90.fdb354","type":"trigger","z":"f313e1b7.08c8b","op1":"1","op2":"","op1type":"num","op2type":"nul","duration":"2","extend":true,"units":"s","reset":"99","name":"","x":1204.3333129882812,"y":4279.38099861145,"wires":[["234b1f8d.98ad9"]]},{"id":"e837ccef.8ac01","type":"trigger","z":"f313e1b7.08c8b","op1":"1","op2":"","op1type":"num","op2type":"nul","duration":"2","extend":true,"units":"s","reset":"99","name":"","x":1265.3333129882812,"y":4478.38099861145,"wires":[["44ef6b3b.8902f4"]]},{"id":"302fa82e.e17b38","type":"trigger","z":"f313e1b7.08c8b","op1":"1","op2":"","op1type":"num","op2type":"nul","duration":"2","extend":true,"units":"s","reset":"99","name":"","x":1225.3333129882812,"y":4680.38099861145,"wires":[["9980497a.9501d8"]]},{"id":"6e67a230.1e9ccc","type":"inject","z":"f313e1b7.08c8b","name":"","topic":"","payload":"xxx","payloadType":"str","repeat":"","crontab":"","once":false,"x":566.3333053588867,"y":1759.3809604644775,"wires":[["bf32ad03.616ec"]]},{"id":"bf32ad03.616ec","type":"function","z":"f313e1b7.08c8b","name":"","func":"msg.payload = global.get('rsrtest');\nreturn msg;","outputs":1,"noerr":0,"x":688.8333053588867,"y":1715.8810424804688,"wires":[["f4a8cbb0.ab55a8"]]},{"id":"f4a8cbb0.ab55a8","type":"switch","z":"f313e1b7.08c8b","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"num"},{"t":"eq","v":"0","vt":"num"}],"checkall":"true","outputs":2,"x":769.0833206176758,"y":1771.8809547424316,"wires":[["59c4b5c5.e8d05c"],[]]},{"id":"59c4b5c5.e8d05c","type":"trigger","z":"f313e1b7.08c8b","op1":"true","op2":"false","op1type":"bool","op2type":"bool","duration":"2","extend":false,"units":"s","reset":"","name":"","x":918.5833187103271,"y":1776.3809957504272,"wires":[[]]},{"id":"97ecff6d.d7981","type":"debug","z":"f313e1b7.08c8b","name":"","active":true,"console":"false","complete":"false","x":1602.4761701311381,"y":1789.6667071751185,"wires":[]},{"id":"8d56de5e.a0036","type":"comment","z":"f313e1b7.08c8b","name":"test cycle","info":"","x":600.3475189208984,"y":1672.6594352722168,"wires":[]},{"id":"cabc542b.ad5c18","type":"comment","z":"f313e1b7.08c8b","name":"Display last startup","info":"","x":854.4047088623047,"y":98.85718822479248,"wires":[]},{"id":"7070368.bc375c8","type":"inject","z":"f313e1b7.08c8b","name":"","topic":"laststartup","payload":"","payloadType":"date","repeat":"","crontab":"","once":true,"x":531.4047088623047,"y":142.85718822479248,"wires":[["edb7875e.bd6808"]]},{"id":"c2b8a310.9525a","type":"vis in","z":"f313e1b7.08c8b","language":"en","x":1217.9047088623047,"y":183.85718822479248,"wires":[[]]},{"id":"6aa34f9c.c7bb5","type":"function","z":"f313e1b7.08c8b","name":"set last startup","func":"msg.payload = new Date().toString();\nglobal.set ('laststartup', msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":899.9047088623047,"y":141.85718822479248,"wires":[["422540ba.74874"]]},{"id":"422540ba.74874","type":"debug","z":"f313e1b7.08c8b","name":"","active":false,"console":"false","complete":"false","x":1130.4047088623047,"y":123.85718822479248,"wires":[]},{"id":"133bc48.8fe383c","type":"inject","z":"f313e1b7.08c8b","name":"pulse","topic":"","payload":"0","payloadType":"str","repeat":"5","crontab":"","once":false,"x":814.4047088623047,"y":187.85718822479248,"wires":[["64695caf.7e0f84"]]},{"id":"64695caf.7e0f84","type":"function","z":"f313e1b7.08c8b","name":"global get laststartup","func":"msg.payload = global.get('laststartup');\nmsg.topic = 'laststartup';\nreturn msg;","outputs":1,"noerr":0,"x":1002.9047088623047,"y":186.85718822479248,"wires":[["c2b8a310.9525a"]]},{"id":"edb7875e.bd6808","type":"delay","z":"f313e1b7.08c8b","name":"","pauseType":"delay","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":728.4047088623047,"y":143.85718822479248,"wires":[["6aa34f9c.c7bb5"]]},{"id":"80501c55.d86f5","type":"switch","z":"f313e1b7.08c8b","name":"set topic setPhi","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"setPhi","vt":"str"}],"checkall":"true","outputs":1,"x":1020.9173355102539,"y":2406.898935317993,"wires":[["f55c915d.cda2e"]]},{"id":"4cf3ed04.769fb4","type":"switch","z":"f313e1b7.08c8b","name":"set topic setPlo","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"setPlo","vt":"str"}],"checkall":"true","outputs":1,"x":1024.917335510254,"y":2439.898935317993,"wires":[["e5d46b7b.4f10f8"]]},{"id":"f55c915d.cda2e","type":"function","z":"f313e1b7.08c8b","name":"global set setPhi","func":"global.set('setPhi',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":1506.6321182250977,"y":2404.303476333618,"wires":[[]]},{"id":"e5d46b7b.4f10f8","type":"function","z":"f313e1b7.08c8b","name":"global set setPlo","func":"global.set('setPlo',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":1510.6321182250977,"y":2437.303476333618,"wires":[[]]},{"id":"ad87077c.0bf638","type":"switch","z":"f313e1b7.08c8b","name":"set topic setDirt","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"setDirt","vt":"str"}],"checkall":"true","outputs":1,"x":1024.555519104004,"y":2473.301523208618,"wires":[["9114a274.6a05e"]]},{"id":"9114a274.6a05e","type":"function","z":"f313e1b7.08c8b","name":"global set setDirt","func":"global.set('setDirt',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":1510.2703018188477,"y":2470.706064224243,"wires":[[]]},{"id":"3939882.eb79c78","type":"bigexec","z":"eb1ef2a4.108a4","name":"git pull","command":"sudo ","commandArgs":"git pull","minError":1,"minWarning":1,"cwd":"modules","shell":true,"extraArgumentProperty":"","envProperty":"","format":"","limiter":true,"payloadIs":"triggerNoStdin","x":463.33331298828125,"y":183.8333282470703,"wires":[["f54a6d39.c7049"],[],[]]},{"id":"9864232e.28631","type":"inject","z":"eb1ef2a4.108a4","name":"","topic":"","payload":"","payloadType":"num","repeat":"","crontab":"","once":false,"x":246.33331298828125,"y":193.3333282470703,"wires":[["3939882.eb79c78"]]},{"id":"f54a6d39.c7049","type":"delay","z":"eb1ef2a4.108a4","name":"","pauseType":"delay","timeout":"1","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":620.3333129882812,"y":173.3333282470703,"wires":[["bee2ddb1.e433b"]]},{"id":"bee2ddb1.e433b","type":"bigexec","z":"eb1ef2a4.108a4","name":"copy to node red","command":"sudo","commandArgs":"cp /home/pi/modules/flows.json /home/pi/.node-red/flows_casi.json","minError":1,"minWarning":1,"cwd":"","shell":true,"extraArgumentProperty":"","envProperty":"","format":"","limiter":true,"payloadIs":"triggerNoStdin","x":841.3333129882812,"y":181.8333282470703,"wires":[[],[],[]]}]
